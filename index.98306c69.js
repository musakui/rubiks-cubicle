import{r as R,o as z,E as F,w as V,a as T,b as l,c as u,d as b,t as g,n as N,e as P,f as S,g as $,T as U,h as j,u as h,F as w,i as x,j as L,k as K,m as B,l as q,p as G}from"./vendor.db607760.js";const J=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=i(e);fetch(e.href,s)}};J();const H="modulepreload",C={},W="/rubiks-cubicle/",O=function(t,i){return!i||i.length===0?t():Promise.all(i.map(n=>{if(n=`${W}${n}`,n in C)return;C[n]=!0;const e=n.endsWith(".css"),s=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${s}`))return;const o=document.createElement("link");if(o.rel=e?"stylesheet":H,e||(o.as="script",o.crossOrigin=""),o.href=n,document.head.appendChild(o),e)return new Promise((c,r)=>{o.addEventListener("load",c),o.addEventListener("error",r)})})).then(()=>t())};const Y={props:{init:Array,moves:Array},setup(a){const t=a;let i=null,n=null,e=null;const s=R(null);return z(()=>{n=new F(s.value,!0),Promise.all([O(()=>import("./scene.166bd9f8.js").then(function(o){return o.y}),["scene.166bd9f8.js","vendor.db607760.js"]),O(()=>import("./geometry.73316cf1.js"),["geometry.73316cf1.js","scene.166bd9f8.js","vendor.db607760.js"])]).then(async([{createScene:o,createRotator:c},{createCubies:r,animate:v}])=>{i=o(n),n.runRenderLoop(()=>i.render());const p=r(i);e=c(i,p,v);for(const _ of[...t.init].reverse())await e(_.letter,_.mod?_.mod==="\u2032"?1:2:-1,0)})}),V(()=>t.moves,async(o,c)=>{if(!!e){if(o.length)for(const r of o)await e(r.letter,r.mod?r.mod==="\u2032"?-1:2:1,16);else if(c.length)for(const r of[...c].reverse())await e(r.letter,r.mod?r.mod==="\u2032"?1:2:-1,5)}}),T(()=>n==null?void 0:n.dispose()),(o,c)=>(l(),u("canvas",{ref_key:"canvasEl",ref:s},null,512))}};const Q={props:{index:Number,state:Number,letter:String,mod:String},setup(a){const t=a,i=`${t.index*100}ms`,n=`${t.index*300}ms`,e=["","absent","present","gmod","correct"];return(s,o)=>(l(),u("div",{class:P(["tile",a.letter&&"filled",a.state&&"revealed"])},[b("div",{class:"front",style:N({transitionDelay:n})},g(a.letter)+g(a.mod),5),b("div",{class:P(["back",e[a.state]]),style:N({animationDelay:i,transitionDelay:n})},g(a.letter)+g(a.mod),7)],2))}},X=new Date("February 14, 2022 00:00:00").valueOf(),Z=2**32,ee=a=>()=>{let t=a+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/Z},te=["","\u2032","\xB2"],A=[..."FBUDLR"],re=[A,["Enter","\u2032","2","Backspace"]],M=(a,t)=>Array.from({length:a},t),E=a=>new Promise(t=>setTimeout(t,a)),se=Math.floor((Date.now()-X)/864e5),ne=a=>{const t=parseInt(a),i=isNaN(t)?Math.random:ee(t),n=r=>Math.floor(i()*r),e=(r,v)=>{let p=r;for(;p===r;)p=n(v);return p},s=[];let o,c=null;for(o=0;o<5;++o)c=e(c,6),s.push({letter:A[c],mod:te[n(3)]});return s},oe=a=>{const t=()=>JSON.parse(JSON.stringify(a));return i=>{const n=t();for(const[e,s]of i.entries())n[e].letter===s.letter&&n[e].mod===s.mod&&(s.state=4,n[e]={});for(const[e,s]of i.entries())s.state||n[e].letter===s.letter&&(s.state=3,n[e].letter="");for(const e of i){if(e.state)continue;const s=n.find(o=>o.letter===e.letter);s?(e.state=2,s.letter=""):e.state=1}return i.every(e=>e.state===4)}};const ae={key:0,class:"message"},ie={id:"board"},ce={id:"keyboard"},le={class:"krow"},ue={key:0,class:"spacer"},de=["onClick"],me={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",height:"24",width:"24"},fe={key:1,class:"spacer"},he={setup(a){let t=!0;const i=d=>d.length>1&&{class:"big","aria-label":d},n=["Genius","Magnificent","Impressive","Splendid","Great","Phew"],e=`m22 3h-15c-1 0-1 0-2 1l-5 8 5 8c1 1 1 1 2 1h15c1 0 2-1 2-2v-14c0-1-1-2-2-2z
m0 16h-15l-5-7 5-7h15v14zm-12-2 4-4 4 4 1-1-4-4 4-4-1-1-4 4-4-4-1 1 4 4-4 4z`,s=ne(window.location.search.slice(1)||se),o=oe(s),c=S(M(6,()=>M(5,()=>({letter:"",mod:"",state:0})))),r=S({cur:0,shake:-1,done:!1,message:"",show:[]}),v=d=>{for(const m of[...c[r.cur]].reverse())if(!!m.letter){d?m.mod=d:(m.mod="",m.letter="");break}},p=async()=>{const d=c[r.cur];if(!d.every(f=>f.letter)){t=!1,r.shake=r.cur,await E(1e3),t=!0,r.shake=-1;return}t=!1;const m=o(d);r.show=d,m?(await E(1e3),r.message=n[r.cur],r.done=!0):r.cur<5?(await E(2e3),++r.cur,r.show=[],t=!0):(await E(1500),r.message=s.map(f=>`${f.letter}${f.mod}`).join(" "))},_=d=>{if(!t)return;const m=d.key||d;switch(m){case"Enter":p();break;case"Backspace":v();break;case"2":v("\xB2");break;case"`":case"\u2032":case"'":v("\u2032");break;default:if(!/^[bdflruBDFLRU]$/.test(m))return;for(const f of c[r.cur])if(!f.letter){f.letter=m.toUpperCase();return}}};return window.addEventListener("keyup",_),T(()=>window.removeEventListener("keyup",_)),(d,m)=>(l(),u(w,null,[$(U,null,{default:j(()=>[h(r).message?(l(),u("div",ae,g(h(r).message),1)):L("",!0)]),_:1}),$(Y,{init:h(s),moves:h(r).show},null,8,["init","moves"]),b("div",ie,[(l(!0),u(w,null,x(h(c),(f,k)=>(l(),u("div",{class:P(["row",h(r).shake===k&&"shake",h(r).done&&h(r).cur===k&&"jump"])},[(l(!0),u(w,null,x(f,(y,D)=>(l(),K(Q,B(y,{index:D}),null,16,["index"]))),256))],2))),256))]),b("div",ce,[(l(!0),u(w,null,x(h(re),(f,k)=>(l(),u("div",le,[k===1?(l(),u("div",ue)):L("",!0),(l(!0),u(w,null,x(f,y=>(l(),u("button",B(i(y),{onClick:D=>_(y)}),[y!=="Backspace"?(l(),u(w,{key:0},[q(g(y),1)],64)):(l(),u("svg",me,[b("path",{d:e})]))],16,de))),256)),k===1?(l(),u("div",fe)):L("",!0)]))),256))])],64))}},I=()=>document.body.style.setProperty("--vh",window.innerHeight+"px");I();window.addEventListener("resize",I);G(he).mount("#app");
//# sourceMappingURL=index.98306c69.js.map
