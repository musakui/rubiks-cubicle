import{r as q,o as K,E as H,w as J,a as T,b as d,c as m,d as f,t as k,n as D,e as N,f as M,g as S,T as O,h as R,u as _,F as g,i as E,j as A,k as Y,m as B,l as L,p as Q}from"./vendor.db607760.js";const W=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function i(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=i(e);fetch(e.href,n)}};W();const X="modulepreload",F={},Z="/rubiks-cubicle/",ee=function(t,i){return!i||i.length===0?t():Promise.all(i.map(o=>{if(o=`${Z}${o}`,o in F)return;F[o]=!0;const e=o.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${n}`))return;const s=document.createElement("link");if(s.rel=e?"stylesheet":X,e||(s.as="script",s.crossOrigin=""),s.href=o,document.head.appendChild(s),e)return new Promise((h,l)=>{s.addEventListener("load",h),s.addEventListener("error",l)})})).then(()=>t())},te=new Date("February 14, 2022 00:00:00").valueOf(),ne=2**32,se=a=>()=>{let t=a+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/ne},z=[..."FBUDLR"],x="\u2032",U="\xB2",re=[z,["Enter",x,"2","Backspace"]],P=a=>[...a].reverse(),I=(a,t)=>Array.from({length:a},t),b=a=>new Promise(t=>setTimeout(t,a)),oe=Math.floor((Date.now()-te)/864e5),ae=a=>{const t=parseInt(a),i=isNaN(t)?Math.random:se(t),o=r=>Math.floor(i()*r),e=(r,w)=>{let v=r;for(;v===r;)v=o(w);return v},n=[];let s,h,l=null;for(h=0;h<5;++h)l=e(l,6),s=i(),n.push({letter:z[l],mod:s<.2?U:s<.6?x:""});return n},ie=a=>{const t=()=>JSON.parse(JSON.stringify(a));return i=>{const o=t();for(const[e,n]of i.entries())o[e].letter===n.letter&&o[e].mod===n.mod&&(n.state=4,o[e]={});for(const[e,n]of i.entries())n.state||o[e].letter===n.letter&&(n.state=3,o[e].letter="");for(const e of i){if(e.state)continue;const n=o.find(s=>s.letter===e.letter);n?(e.state=2,n.letter=""):e.state=1}return i.every(e=>e.state===4)}};const le={props:{init:Array,moves:Array},setup(a){const t=a;let i=null,o=null;const e=q(null),n=s=>s?s===x?-1:2:1;return K(()=>{i=new H(e.value,!0),ee(()=>import("./scene.c7026f2c.js").then(function(s){return s.X}),["scene.c7026f2c.js","vendor.db607760.js"]).then(async({createScene:s,init:h})=>{const l=s(i),[r,w]=await h;o=w(l);for(const v of P(t.init))await o(v.letter,-n(v.mod));r(l).attachControl(e.value,!0),i.runRenderLoop(()=>l.render())})}),J(()=>t.moves,async(s,h)=>{if(!!o){if(s.length)for(const l of s)await o(l.letter,n(l.mod),16);else if(h.length)for(const l of P(h))await o(l.letter,-n(l.mod),5)}}),T(()=>i==null?void 0:i.dispose()),(s,h)=>(d(),m("canvas",{ref_key:"canvasEl",ref:e},null,512))}};const ce={props:{index:Number,state:Number,letter:String,mod:String},setup(a){const t=a,i=`${t.index*100}ms`,o=`${t.index*300}ms`,e=["","absent","present","gmod","correct"];return(n,s)=>(d(),m("div",{class:N(["tile",a.letter&&"filled",a.state&&"revealed"])},[f("div",{class:"front",style:D({transitionDelay:o})},k(a.letter)+k(a.mod),5),f("div",{class:N(["back",e[a.state]]),style:D({animationDelay:i,transitionDelay:o})},k(a.letter)+k(a.mod),7)],2))}};const ue={key:0,class:"message"},de={key:0,id:"help"},fe=L(" Guess 5 moves to solve the cube. "),me=f("p",null,"Moves are represented in Singmaster Notation where each letter represents a face.",-1),he=f("div",{style:{"text-align":"center"}},"(U)p, (D)own, (F)ront, (B)ack, (L)eft, (R)ight",-1),pe=f("p",null,"For simplicity, F is Blue and R is Orange for this cube.",-1),_e=f("p",null," A given letter means the face should be turned clockwise 90\xB0 (while facing it). A prime mark (\u2032) after the letter means it should be turned anti-clockwise 90\xB0, and a square (\xB2) means it should be turned 180\xB0 ",-1),ve=L(" Colours: "),we=f("ul",null,[f("li",null,"Green: the move is in the correct spot"),f("li",null,"Blue: the face is correct but wrong amount of turning"),f("li",null,"Yellow: the face is used but in the wrong spot"),f("li",null,"Otherwise, the face is not used at all")],-1),ye=L(" Have fun! "),ge=[fe,me,he,pe,_e,ve,we,ye],ke={id:"board"},be={id:"keyboard"},xe={class:"krow"},Ee=["onClick"],Le={setup(a){let t=!0;const i={width:24,height:24},o=c=>c.length>1&&{class:"big","aria-label":c},e=["Genius","Magnificent","Impressive","Splendid","Great","Phew"],n="m0 0l5 7c1 1 1 1 2 1h14c1 0 2-1 2-2v-12c0-1-1-2-2-2h-14c-1 0-1 0-2 1zM9 4l8-8M9-4l8 8",s=ae(window.location.search.slice(1)||oe),h=ie(s),l=M(I(6,()=>I(5,()=>({letter:"",mod:"",state:0})))),r=M({cur:0,shake:-1,done:!1,help:!1,message:"",show:[]}),w=c=>{for(const u of P(l[r.cur]))if(!!u.letter){c?u.mod=c:(u.mod="",u.letter="");break}},v=async(c="")=>{r.message=c,r.shake=r.cur,await b(1200),t=!0,r.shake=-1,r.message=""},j=async()=>{t=!1;const c=l[r.cur];if(!c.every(u=>u.letter))return await v();if(c.slice(1).some((u,p)=>u.letter===c[p].letter))return await v("Adjacent letters should be different");if(r.show=c,h(c))await b(1e3),r.message=e[r.cur],r.done=!0,await b(2e3),r.message="";else if(r.cur<5)await b(2500),++r.cur,r.show=[],t=!0;else{await b(1500);const u=s.map(p=>`${p.letter}${p.mod}`).join(" ");r.message=`Oops. It was ${u}`}},C=c=>{if(!t)return;const u=c.key||c;switch(u){case"Enter":j();break;case"Backspace":w();break;case"2":w(U);break;case"`":case"'":case x:w(x);break;default:if(!/^[bdflruBDFLRU]$/.test(u))return;for(const p of l[r.cur])if(!p.letter){p.letter=u.toUpperCase();return}}};return window.addEventListener("keyup",C),T(()=>window.removeEventListener("keyup",C)),(c,u)=>(d(),m(g,null,[S(O,null,{default:R(()=>[_(r).message?(d(),m("div",ue,k(_(r).message),1)):A("",!0)]),_:1}),S(le,{init:_(s),moves:_(r).show},null,8,["init","moves"]),f("button",{id:"info","aria-label":"help",onClick:u[0]||(u[0]=p=>_(r).help=!_(r).help)},"?"),S(O,null,{default:R(()=>[_(r).help?(d(),m("div",de,ge)):A("",!0)]),_:1}),f("div",ke,[(d(!0),m(g,null,E(_(l),(p,y)=>(d(),m("div",{class:N(["row",_(r).shake===y&&"shake",_(r).done&&_(r).cur===y&&"jump"])},[(d(!0),m(g,null,E(p,($,G)=>(d(),Y(ce,B($,{index:G}),null,16,["index"]))),256))],2))),256))]),f("div",be,[(d(!0),m(g,null,E(_(re),p=>(d(),m("div",xe,[(d(!0),m(g,null,E(p,y=>(d(),m("button",B(o(y),{onClick:$=>C(y)}),[y!=="Backspace"?(d(),m(g,{key:0},[L(k(y),1)],64)):(d(),m("svg",B({key:1},i,{viewBox:"0 -12 24 24"}),[f("path",{d:n})],16))],16,Ee))),256))]))),256))])],64))}},V=()=>document.body.style.setProperty("--vh",window.innerHeight+"px");V();window.addEventListener("resize",V);Q(Le).mount("#app");export{ee as _};
//# sourceMappingURL=index.22ca5c64.js.map
