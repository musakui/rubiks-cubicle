function Xr(t,e){const r=Object.create(null),i=t.split(",");for(let n=0;n<i.length;n++)r[i[n]]=!0;return e?n=>!!r[n.toLowerCase()]:n=>!!r[n]}const is="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ns=Xr(is);function Ki(t){return!!t||t===""}function Wr(t){if(I(t)){const e={};for(let r=0;r<t.length;r++){const i=t[r],n=se(i)?os(i):Wr(i);if(n)for(const s in n)e[s]=n[s]}return e}else{if(se(t))return t;if(ne(t))return t}}const ss=/;(?![^(]*\))/g,as=/:(.+)/;function os(t){const e={};return t.split(ss).forEach(r=>{if(r){const i=r.split(as);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Hr(t){let e="";if(se(t))e=t;else if(I(t))for(let r=0;r<t.length;r++){const i=Hr(t[r]);i&&(e+=i+" ")}else if(ne(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const el=t=>se(t)?t:t==null?"":I(t)||ne(t)&&(t.toString===Ji||!N(t.toString))?JSON.stringify(t,$i,2):String(t),$i=(t,e)=>e&&e.__v_isRef?$i(t,e.value):_t(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[i,n])=>(r[`${i} =>`]=n,r),{})}:Qi(e)?{[`Set(${e.size})`]:[...e.values()]}:ne(e)&&!I(e)&&!en(e)?String(e):e,$={},ht=[],Ce=()=>{},ls=()=>!1,us=/^on[^a-z]/,er=t=>us.test(t),jr=t=>t.startsWith("onUpdate:"),fe=Object.assign,Yr=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},fs=Object.prototype.hasOwnProperty,X=(t,e)=>fs.call(t,e),I=Array.isArray,_t=t=>tr(t)==="[object Map]",Qi=t=>tr(t)==="[object Set]",N=t=>typeof t=="function",se=t=>typeof t=="string",qr=t=>typeof t=="symbol",ne=t=>t!==null&&typeof t=="object",Zi=t=>ne(t)&&N(t.then)&&N(t.catch),Ji=Object.prototype.toString,tr=t=>Ji.call(t),cs=t=>tr(t).slice(8,-1),en=t=>tr(t)==="[object Object]",zr=t=>se(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ht=Xr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),rr=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},hs=/-(\w)/g,gt=rr(t=>t.replace(hs,(e,r)=>r?r.toUpperCase():"")),_s=/\B([A-Z])/g,bt=rr(t=>t.replace(_s,"-$1").toLowerCase()),tn=rr(t=>t.charAt(0).toUpperCase()+t.slice(1)),fr=rr(t=>t?`on${tn(t)}`:""),wt=(t,e)=>!Object.is(t,e),cr=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},qt=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},rn=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let pi;const ds=()=>pi||(pi=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Ue;class ps{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&Ue&&(this.parent=Ue,this.index=(Ue.scopes||(Ue.scopes=[])).push(this)-1)}run(e){if(this.active)try{return Ue=this,e()}finally{Ue=this.parent}}on(){Ue=this}off(){Ue=this.parent}stop(e){if(this.active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.active=!1}}}function gs(t,e=Ue){e&&e.active&&e.effects.push(t)}const Kr=t=>{const e=new Set(t);return e.w=0,e.n=0,e},nn=t=>(t.w&ze)>0,sn=t=>(t.n&ze)>0,Es=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=ze},ms=t=>{const{deps:e}=t;if(e.length){let r=0;for(let i=0;i<e.length;i++){const n=e[i];nn(n)&&!sn(n)?n.delete(t):e[r++]=n,n.w&=~ze,n.n&=~ze}e.length=r}},Ar=new WeakMap;let Ct=0,ze=1;const Rr=30;let Le;const it=Symbol(""),Cr=Symbol("");class $r{constructor(e,r=null,i){this.fn=e,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,gs(this,i)}run(){if(!this.active)return this.fn();let e=Le,r=Ye;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Le,Le=this,Ye=!0,ze=1<<++Ct,Ct<=Rr?Es(this):gi(this),this.fn()}finally{Ct<=Rr&&ms(this),ze=1<<--Ct,Le=this.parent,Ye=r,this.parent=void 0}}stop(){this.active&&(gi(this),this.onStop&&this.onStop(),this.active=!1)}}function gi(t){const{deps:e}=t;if(e.length){for(let r=0;r<e.length;r++)e[r].delete(t);e.length=0}}let Ye=!0;const an=[];function Tt(){an.push(Ye),Ye=!1}function yt(){const t=an.pop();Ye=t===void 0?!0:t}function Te(t,e,r){if(Ye&&Le){let i=Ar.get(t);i||Ar.set(t,i=new Map);let n=i.get(r);n||i.set(r,n=Kr()),on(n)}}function on(t,e){let r=!1;Ct<=Rr?sn(t)||(t.n|=ze,r=!nn(t)):r=!t.has(Le),r&&(t.add(Le),Le.deps.push(t))}function ke(t,e,r,i,n,s){const a=Ar.get(t);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(r==="length"&&I(t))a.forEach((l,u)=>{(u==="length"||u>=i)&&o.push(l)});else switch(r!==void 0&&o.push(a.get(r)),e){case"add":I(t)?zr(r)&&o.push(a.get("length")):(o.push(a.get(it)),_t(t)&&o.push(a.get(Cr)));break;case"delete":I(t)||(o.push(a.get(it)),_t(t)&&o.push(a.get(Cr)));break;case"set":_t(t)&&o.push(a.get(it));break}if(o.length===1)o[0]&&Sr(o[0]);else{const l=[];for(const u of o)u&&l.push(...u);Sr(Kr(l))}}function Sr(t,e){for(const r of I(t)?t:[...t])(r!==Le||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const bs=Xr("__proto__,__v_isRef,__isVue"),ln=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(qr)),Ts=Qr(),ys=Qr(!1,!0),vs=Qr(!0),Ei=As();function As(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const i=W(this);for(let s=0,a=this.length;s<a;s++)Te(i,"get",s+"");const n=i[e](...r);return n===-1||n===!1?i[e](...r.map(W)):n}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){Tt();const i=W(this)[e].apply(this,r);return yt(),i}}),t}function Qr(t=!1,e=!1){return function(i,n,s){if(n==="__v_isReactive")return!t;if(n==="__v_isReadonly")return t;if(n==="__v_isShallow")return e;if(n==="__v_raw"&&s===(t?e?ks:_n:e?hn:cn).get(i))return i;const a=I(i);if(!t&&a&&X(Ei,n))return Reflect.get(Ei,n,s);const o=Reflect.get(i,n,s);return(qr(n)?ln.has(n):bs(n))||(t||Te(i,"get",n),e)?o:ue(o)?!a||!zr(n)?o.value:o:ne(o)?t?dn(o):ei(o):o}}const Rs=un(),Cs=un(!0);function un(t=!1){return function(r,i,n,s){let a=r[i];if(Lt(a)&&ue(a)&&!ue(n))return!1;if(!t&&!Lt(n)&&(pn(n)||(n=W(n),a=W(a)),!I(r)&&ue(a)&&!ue(n)))return a.value=n,!0;const o=I(r)&&zr(i)?Number(i)<r.length:X(r,i),l=Reflect.set(r,i,n,s);return r===W(s)&&(o?wt(n,a)&&ke(r,"set",i,n):ke(r,"add",i,n)),l}}function Ss(t,e){const r=X(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&r&&ke(t,"delete",e,void 0),i}function Fs(t,e){const r=Reflect.has(t,e);return(!qr(e)||!ln.has(e))&&Te(t,"has",e),r}function Ps(t){return Te(t,"iterate",I(t)?"length":it),Reflect.ownKeys(t)}const fn={get:Ts,set:Rs,deleteProperty:Ss,has:Fs,ownKeys:Ps},Os={get:vs,set(t,e){return!0},deleteProperty(t,e){return!0}},xs=fe({},fn,{get:ys,set:Cs}),Zr=t=>t,ir=t=>Reflect.getPrototypeOf(t);function Nt(t,e,r=!1,i=!1){t=t.__v_raw;const n=W(t),s=W(e);e!==s&&!r&&Te(n,"get",e),!r&&Te(n,"get",s);const{has:a}=ir(n),o=i?Zr:r?ri:Dt;if(a.call(n,e))return o(t.get(e));if(a.call(n,s))return o(t.get(s));t!==n&&t.get(e)}function kt(t,e=!1){const r=this.__v_raw,i=W(r),n=W(t);return t!==n&&!e&&Te(i,"has",t),!e&&Te(i,"has",n),t===n?r.has(t):r.has(t)||r.has(n)}function Gt(t,e=!1){return t=t.__v_raw,!e&&Te(W(t),"iterate",it),Reflect.get(t,"size",t)}function mi(t){t=W(t);const e=W(this);return ir(e).has.call(e,t)||(e.add(t),ke(e,"add",t,t)),this}function bi(t,e){e=W(e);const r=W(this),{has:i,get:n}=ir(r);let s=i.call(r,t);s||(t=W(t),s=i.call(r,t));const a=n.call(r,t);return r.set(t,e),s?wt(e,a)&&ke(r,"set",t,e):ke(r,"add",t,e),this}function Ti(t){const e=W(this),{has:r,get:i}=ir(e);let n=r.call(e,t);n||(t=W(t),n=r.call(e,t)),i&&i.call(e,t);const s=e.delete(t);return n&&ke(e,"delete",t,void 0),s}function yi(){const t=W(this),e=t.size!==0,r=t.clear();return e&&ke(t,"clear",void 0,void 0),r}function Vt(t,e){return function(i,n){const s=this,a=s.__v_raw,o=W(a),l=e?Zr:t?ri:Dt;return!t&&Te(o,"iterate",it),a.forEach((u,c)=>i.call(n,l(u),l(c),s))}}function Xt(t,e,r){return function(...i){const n=this.__v_raw,s=W(n),a=_t(s),o=t==="entries"||t===Symbol.iterator&&a,l=t==="keys"&&a,u=n[t](...i),c=r?Zr:e?ri:Dt;return!e&&Te(s,"iterate",l?Cr:it),{next(){const{value:_,done:d}=u.next();return d?{value:_,done:d}:{value:o?[c(_[0]),c(_[1])]:c(_),done:d}},[Symbol.iterator](){return this}}}}function Ve(t){return function(...e){return t==="delete"?!1:this}}function ws(){const t={get(s){return Nt(this,s)},get size(){return Gt(this)},has:kt,add:mi,set:bi,delete:Ti,clear:yi,forEach:Vt(!1,!1)},e={get(s){return Nt(this,s,!1,!0)},get size(){return Gt(this)},has:kt,add:mi,set:bi,delete:Ti,clear:yi,forEach:Vt(!1,!0)},r={get(s){return Nt(this,s,!0)},get size(){return Gt(this,!0)},has(s){return kt.call(this,s,!0)},add:Ve("add"),set:Ve("set"),delete:Ve("delete"),clear:Ve("clear"),forEach:Vt(!0,!1)},i={get(s){return Nt(this,s,!0,!0)},get size(){return Gt(this,!0)},has(s){return kt.call(this,s,!0)},add:Ve("add"),set:Ve("set"),delete:Ve("delete"),clear:Ve("clear"),forEach:Vt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Xt(s,!1,!1),r[s]=Xt(s,!0,!1),e[s]=Xt(s,!1,!0),i[s]=Xt(s,!0,!0)}),[t,r,e,i]}const[Ls,Ds,Is,Bs]=ws();function Jr(t,e){const r=e?t?Bs:Is:t?Ds:Ls;return(i,n,s)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?i:Reflect.get(X(r,n)&&n in i?r:i,n,s)}const Ms={get:Jr(!1,!1)},Us={get:Jr(!1,!0)},Ns={get:Jr(!0,!1)},cn=new WeakMap,hn=new WeakMap,_n=new WeakMap,ks=new WeakMap;function Gs(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Vs(t){return t.__v_skip||!Object.isExtensible(t)?0:Gs(cs(t))}function ei(t){return Lt(t)?t:ti(t,!1,fn,Ms,cn)}function Xs(t){return ti(t,!1,xs,Us,hn)}function dn(t){return ti(t,!0,Os,Ns,_n)}function ti(t,e,r,i,n){if(!ne(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=n.get(t);if(s)return s;const a=Vs(t);if(a===0)return t;const o=new Proxy(t,a===2?i:r);return n.set(t,o),o}function dt(t){return Lt(t)?dt(t.__v_raw):!!(t&&t.__v_isReactive)}function Lt(t){return!!(t&&t.__v_isReadonly)}function pn(t){return!!(t&&t.__v_isShallow)}function gn(t){return dt(t)||Lt(t)}function W(t){const e=t&&t.__v_raw;return e?W(e):t}function En(t){return qt(t,"__v_skip",!0),t}const Dt=t=>ne(t)?ei(t):t,ri=t=>ne(t)?dn(t):t;function mn(t){Ye&&Le&&(t=W(t),on(t.dep||(t.dep=Kr())))}function bn(t,e){t=W(t),t.dep&&Sr(t.dep)}function ue(t){return!!(t&&t.__v_isRef===!0)}function tl(t){return Ws(t,!1)}function Ws(t,e){return ue(t)?t:new Hs(t,e)}class Hs{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:W(e),this._value=r?e:Dt(e)}get value(){return mn(this),this._value}set value(e){e=this.__v_isShallow?e:W(e),wt(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:Dt(e),bn(this))}}function js(t){return ue(t)?t.value:t}const Ys={get:(t,e,r)=>js(Reflect.get(t,e,r)),set:(t,e,r,i)=>{const n=t[e];return ue(n)&&!ue(r)?(n.value=r,!0):Reflect.set(t,e,r,i)}};function Tn(t){return dt(t)?t:new Proxy(t,Ys)}class qs{constructor(e,r,i,n){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new $r(e,()=>{this._dirty||(this._dirty=!0,bn(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){const e=W(this);return mn(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function zs(t,e,r=!1){let i,n;const s=N(t);return s?(i=t,n=Ce):(i=t.get,n=t.set),new qs(i,n,s||!n,r)}Promise.resolve();function qe(t,e,r,i){let n;try{n=i?t(...i):t()}catch(s){nr(s,e,r)}return n}function Ae(t,e,r,i){if(N(t)){const s=qe(t,e,r,i);return s&&Zi(s)&&s.catch(a=>{nr(a,e,r)}),s}const n=[];for(let s=0;s<t.length;s++)n.push(Ae(t[s],e,r,i));return n}function nr(t,e,r,i=!0){const n=e?e.vnode:null;if(e){let s=e.parent;const a=e.proxy,o=r;for(;s;){const u=s.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,a,o)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){qe(l,null,10,[t,a,o]);return}}Ks(t,r,n,i)}function Ks(t,e,r,i=!0){console.error(t)}let zt=!1,Fr=!1;const Ee=[];let Ne=0;const Ft=[];let St=null,ut=0;const Pt=[];let He=null,ft=0;const yn=Promise.resolve();let ii=null,Pr=null;function $s(t){const e=ii||yn;return t?e.then(this?t.bind(this):t):e}function Qs(t){let e=Ne+1,r=Ee.length;for(;e<r;){const i=e+r>>>1;It(Ee[i])<t?e=i+1:r=i}return e}function vn(t){(!Ee.length||!Ee.includes(t,zt&&t.allowRecurse?Ne+1:Ne))&&t!==Pr&&(t.id==null?Ee.push(t):Ee.splice(Qs(t.id),0,t),An())}function An(){!zt&&!Fr&&(Fr=!0,ii=yn.then(Sn))}function Zs(t){const e=Ee.indexOf(t);e>Ne&&Ee.splice(e,1)}function Rn(t,e,r,i){I(t)?r.push(...t):(!e||!e.includes(t,t.allowRecurse?i+1:i))&&r.push(t),An()}function Js(t){Rn(t,St,Ft,ut)}function ea(t){Rn(t,He,Pt,ft)}function ni(t,e=null){if(Ft.length){for(Pr=e,St=[...new Set(Ft)],Ft.length=0,ut=0;ut<St.length;ut++)St[ut]();St=null,ut=0,Pr=null,ni(t,e)}}function Cn(t){if(Pt.length){const e=[...new Set(Pt)];if(Pt.length=0,He){He.push(...e);return}for(He=e,He.sort((r,i)=>It(r)-It(i)),ft=0;ft<He.length;ft++)He[ft]();He=null,ft=0}}const It=t=>t.id==null?1/0:t.id;function Sn(t){Fr=!1,zt=!0,ni(t),Ee.sort((r,i)=>It(r)-It(i));const e=Ce;try{for(Ne=0;Ne<Ee.length;Ne++){const r=Ee[Ne];r&&r.active!==!1&&qe(r,null,14)}}finally{Ne=0,Ee.length=0,Cn(),zt=!1,ii=null,(Ee.length||Ft.length||Pt.length)&&Sn(t)}}function ta(t,e,...r){const i=t.vnode.props||$;let n=r;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in i){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:_,trim:d}=i[c]||$;d?n=r.map(v=>v.trim()):_&&(n=r.map(rn))}let o,l=i[o=fr(e)]||i[o=fr(gt(e))];!l&&s&&(l=i[o=fr(bt(e))]),l&&Ae(l,t,6,n);const u=i[o+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,Ae(u,t,6,n)}}function Fn(t,e,r=!1){const i=e.emitsCache,n=i.get(t);if(n!==void 0)return n;const s=t.emits;let a={},o=!1;if(!N(t)){const l=u=>{const c=Fn(u,e,!0);c&&(o=!0,fe(a,c))};!r&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!o?(i.set(t,null),null):(I(s)?s.forEach(l=>a[l]=null):fe(a,s),i.set(t,a),a)}function si(t,e){return!t||!er(e)?!1:(e=e.slice(2).replace(/Once$/,""),X(t,e[0].toLowerCase()+e.slice(1))||X(t,bt(e))||X(t,e))}let De=null,Pn=null;function Kt(t){const e=De;return De=t,Pn=t&&t.type.__scopeId||null,e}function ra(t,e=De,r){if(!e||t._n)return t;const i=(...n)=>{i._d&&wi(-1);const s=Kt(e),a=t(...n);return Kt(s),i._d&&wi(1),a};return i._n=!0,i._c=!0,i._d=!0,i}function hr(t){const{type:e,vnode:r,proxy:i,withProxy:n,props:s,propsOptions:[a],slots:o,attrs:l,emit:u,render:c,renderCache:_,data:d,setupState:v,ctx:b,inheritAttrs:L}=t;let F,w;const P=Kt(t);try{if(r.shapeFlag&4){const k=n||i;F=xe(c.call(k,k,_,s,v,d,b)),w=l}else{const k=e;F=xe(k.length>1?k(s,{attrs:l,slots:o,emit:u}):k(s,null)),w=e.props?l:ia(l)}}catch(k){Ot.length=0,nr(k,t,1),F=be(Ie)}let U=F;if(w&&L!==!1){const k=Object.keys(w),{shapeFlag:q}=U;k.length&&q&7&&(a&&k.some(jr)&&(w=na(w,a)),U=Et(U,w))}return r.dirs&&(U.dirs=U.dirs?U.dirs.concat(r.dirs):r.dirs),r.transition&&(U.transition=r.transition),F=U,Kt(P),F}const ia=t=>{let e;for(const r in t)(r==="class"||r==="style"||er(r))&&((e||(e={}))[r]=t[r]);return e},na=(t,e)=>{const r={};for(const i in t)(!jr(i)||!(i.slice(9)in e))&&(r[i]=t[i]);return r};function sa(t,e,r){const{props:i,children:n,component:s}=t,{props:a,children:o,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return i?vi(i,a,u):!!a;if(l&8){const c=e.dynamicProps;for(let _=0;_<c.length;_++){const d=c[_];if(a[d]!==i[d]&&!si(u,d))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:i===a?!1:i?a?vi(i,a,u):!0:!!a;return!1}function vi(t,e,r){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(e[s]!==t[s]&&!si(r,s))return!0}return!1}function aa({vnode:t,parent:e},r){for(;e&&e.subTree===t;)(t=e.vnode).el=r,e=e.parent}const oa=t=>t.__isSuspense;function la(t,e){e&&e.pendingBranch?I(t)?e.effects.push(...t):e.effects.push(t):ea(t)}function ua(t,e){if(le){let r=le.provides;const i=le.parent&&le.parent.provides;i===r&&(r=le.provides=Object.create(i)),r[t]=e}}function _r(t,e,r=!1){const i=le||De;if(i){const n=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(n&&t in n)return n[t];if(arguments.length>1)return r&&N(e)?e.call(i.proxy):e}}const Ai={};function dr(t,e,r){return On(t,e,r)}function On(t,e,{immediate:r,deep:i,flush:n,onTrack:s,onTrigger:a}=$){const o=le;let l,u=!1,c=!1;if(ue(t)?(l=()=>t.value,u=pn(t)):dt(t)?(l=()=>t,i=!0):I(t)?(c=!0,u=t.some(dt),l=()=>t.map(w=>{if(ue(w))return w.value;if(dt(w))return ct(w);if(N(w))return qe(w,o,2)})):N(t)?e?l=()=>qe(t,o,2):l=()=>{if(!(o&&o.isUnmounted))return _&&_(),Ae(t,o,3,[d])}:l=Ce,e&&i){const w=l;l=()=>ct(w())}let _,d=w=>{_=F.onStop=()=>{qe(w,o,4)}};if(Bt)return d=Ce,e?r&&Ae(e,o,3,[l(),c?[]:void 0,d]):l(),Ce;let v=c?[]:Ai;const b=()=>{if(!!F.active)if(e){const w=F.run();(i||u||(c?w.some((P,U)=>wt(P,v[U])):wt(w,v)))&&(_&&_(),Ae(e,o,3,[w,v===Ai?void 0:v,d]),v=w)}else F.run()};b.allowRecurse=!!e;let L;n==="sync"?L=b:n==="post"?L=()=>pe(b,o&&o.suspense):L=()=>{!o||o.isMounted?Js(b):b()};const F=new $r(l,L);return e?r?b():v=F.run():n==="post"?pe(F.run.bind(F),o&&o.suspense):F.run(),()=>{F.stop(),o&&o.scope&&Yr(o.scope.effects,F)}}function fa(t,e,r){const i=this.proxy,n=se(t)?t.includes(".")?xn(i,t):()=>i[t]:t.bind(i,i);let s;N(e)?s=e:(s=e.handler,r=e);const a=le;mt(this);const o=On(n,s.bind(i),r);return a?mt(a):st(),o}function xn(t,e){const r=e.split(".");return()=>{let i=t;for(let n=0;n<r.length&&i;n++)i=i[r[n]];return i}}function ct(t,e){if(!ne(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),ue(t))ct(t.value,e);else if(I(t))for(let r=0;r<t.length;r++)ct(t[r],e);else if(Qi(t)||_t(t))t.forEach(r=>{ct(r,e)});else if(en(t))for(const r in t)ct(t[r],e);return t}function ca(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Bn(()=>{t.isMounted=!0}),Mn(()=>{t.isUnmounting=!0}),t}const ve=[Function,Array],ha={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ve,onEnter:ve,onAfterEnter:ve,onEnterCancelled:ve,onBeforeLeave:ve,onLeave:ve,onAfterLeave:ve,onLeaveCancelled:ve,onBeforeAppear:ve,onAppear:ve,onAfterAppear:ve,onAppearCancelled:ve},setup(t,{slots:e}){const r=Qa(),i=ca();let n;return()=>{const s=e.default&&Dn(e.default(),!0);if(!s||!s.length)return;const a=W(t),{mode:o}=a,l=s[0];if(i.isLeaving)return pr(l);const u=Ri(l);if(!u)return pr(l);const c=Or(u,a,i,r);xr(u,c);const _=r.subTree,d=_&&Ri(_);let v=!1;const{getTransitionKey:b}=u.type;if(b){const L=b();n===void 0?n=L:L!==n&&(n=L,v=!0)}if(d&&d.type!==Ie&&(!tt(u,d)||v)){const L=Or(d,a,i,r);if(xr(d,L),o==="out-in")return i.isLeaving=!0,L.afterLeave=()=>{i.isLeaving=!1,r.update()},pr(l);o==="in-out"&&u.type!==Ie&&(L.delayLeave=(F,w,P)=>{const U=Ln(i,d);U[String(d.key)]=d,F._leaveCb=()=>{w(),F._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=P})}return l}}},wn=ha;function Ln(t,e){const{leavingVNodes:r}=t;let i=r.get(e.type);return i||(i=Object.create(null),r.set(e.type,i)),i}function Or(t,e,r,i){const{appear:n,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:_,onLeave:d,onAfterLeave:v,onLeaveCancelled:b,onBeforeAppear:L,onAppear:F,onAfterAppear:w,onAppearCancelled:P}=e,U=String(t.key),k=Ln(r,t),q=(B,Q)=>{B&&Ae(B,i,9,Q)},ee={mode:s,persisted:a,beforeEnter(B){let Q=o;if(!r.isMounted)if(n)Q=L||o;else return;B._leaveCb&&B._leaveCb(!0);const H=k[U];H&&tt(t,H)&&H.el._leaveCb&&H.el._leaveCb(),q(Q,[B])},enter(B){let Q=l,H=u,te=c;if(!r.isMounted)if(n)Q=F||l,H=w||u,te=P||c;else return;let ie=!1;const S=B._enterCb=K=>{ie||(ie=!0,K?q(te,[B]):q(H,[B]),ee.delayedLeave&&ee.delayedLeave(),B._enterCb=void 0)};Q?(Q(B,S),Q.length<=1&&S()):S()},leave(B,Q){const H=String(t.key);if(B._enterCb&&B._enterCb(!0),r.isUnmounting)return Q();q(_,[B]);let te=!1;const ie=B._leaveCb=S=>{te||(te=!0,Q(),S?q(b,[B]):q(v,[B]),B._leaveCb=void 0,k[H]===t&&delete k[H])};k[H]=t,d?(d(B,ie),d.length<=1&&ie()):ie()},clone(B){return Or(B,e,r,i)}};return ee}function pr(t){if(sr(t))return t=Et(t),t.children=null,t}function Ri(t){return sr(t)?t.children?t.children[0]:void 0:t}function xr(t,e){t.shapeFlag&6&&t.component?xr(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Dn(t,e=!1){let r=[],i=0;for(let n=0;n<t.length;n++){const s=t[n];s.type===Oe?(s.patchFlag&128&&i++,r=r.concat(Dn(s.children,e))):(e||s.type!==Ie)&&r.push(s)}if(i>1)for(let n=0;n<r.length;n++)r[n].patchFlag=-2;return r}const wr=t=>!!t.type.__asyncLoader,sr=t=>t.type.__isKeepAlive;function _a(t,e){In(t,"a",e)}function da(t,e){In(t,"da",e)}function In(t,e,r=le){const i=t.__wdc||(t.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(ar(e,i,r),r){let n=r.parent;for(;n&&n.parent;)sr(n.parent.vnode)&&pa(i,e,r,n),n=n.parent}}function pa(t,e,r,i){const n=ar(e,t,i,!0);Un(()=>{Yr(i[e],n)},r)}function ar(t,e,r=le,i=!1){if(r){const n=r[t]||(r[t]=[]),s=e.__weh||(e.__weh=(...a)=>{if(r.isUnmounted)return;Tt(),mt(r);const o=Ae(e,r,t,a);return st(),yt(),o});return i?n.unshift(s):n.push(s),s}}const Ge=t=>(e,r=le)=>(!Bt||t==="sp")&&ar(t,e,r),ga=Ge("bm"),Bn=Ge("m"),Ea=Ge("bu"),ma=Ge("u"),Mn=Ge("bum"),Un=Ge("um"),ba=Ge("sp"),Ta=Ge("rtg"),ya=Ge("rtc");function va(t,e=le){ar("ec",t,e)}let Lr=!0;function Aa(t){const e=kn(t),r=t.proxy,i=t.ctx;Lr=!1,e.beforeCreate&&Ci(e.beforeCreate,t,"bc");const{data:n,computed:s,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:_,mounted:d,beforeUpdate:v,updated:b,activated:L,deactivated:F,beforeDestroy:w,beforeUnmount:P,destroyed:U,unmounted:k,render:q,renderTracked:ee,renderTriggered:B,errorCaptured:Q,serverPrefetch:H,expose:te,inheritAttrs:ie,components:S,directives:K,filters:ae}=e;if(u&&Ra(u,i,null,t.appContext.config.unwrapInjectedRef),a)for(const G in a){const Y=a[G];N(Y)&&(i[G]=Y.bind(r))}if(n){const G=n.call(r,r);ne(G)&&(t.data=ei(G))}if(Lr=!0,s)for(const G in s){const Y=s[G],Z=N(Y)?Y.bind(r,r):N(Y.get)?Y.get.bind(r,r):Ce,$e=!N(Y)&&N(Y.set)?Y.set.bind(r):Ce,_e=io({get:Z,set:$e});Object.defineProperty(i,G,{enumerable:!0,configurable:!0,get:()=>_e.value,set:Be=>_e.value=Be})}if(o)for(const G in o)Nn(o[G],i,r,G);if(l){const G=N(l)?l.call(r):l;Reflect.ownKeys(G).forEach(Y=>{ua(Y,G[Y])})}c&&Ci(c,t,"c");function M(G,Y){I(Y)?Y.forEach(Z=>G(Z.bind(r))):Y&&G(Y.bind(r))}if(M(ga,_),M(Bn,d),M(Ea,v),M(ma,b),M(_a,L),M(da,F),M(va,Q),M(ya,ee),M(Ta,B),M(Mn,P),M(Un,k),M(ba,H),I(te))if(te.length){const G=t.exposed||(t.exposed={});te.forEach(Y=>{Object.defineProperty(G,Y,{get:()=>r[Y],set:Z=>r[Y]=Z})})}else t.exposed||(t.exposed={});q&&t.render===Ce&&(t.render=q),ie!=null&&(t.inheritAttrs=ie),S&&(t.components=S),K&&(t.directives=K)}function Ra(t,e,r=Ce,i=!1){I(t)&&(t=Dr(t));for(const n in t){const s=t[n];let a;ne(s)?"default"in s?a=_r(s.from||n,s.default,!0):a=_r(s.from||n):a=_r(s),ue(a)&&i?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):e[n]=a}}function Ci(t,e,r){Ae(I(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,r)}function Nn(t,e,r,i){const n=i.includes(".")?xn(r,i):()=>r[i];if(se(t)){const s=e[t];N(s)&&dr(n,s)}else if(N(t))dr(n,t.bind(r));else if(ne(t))if(I(t))t.forEach(s=>Nn(s,e,r,i));else{const s=N(t.handler)?t.handler.bind(r):e[t.handler];N(s)&&dr(n,s,t)}}function kn(t){const e=t.type,{mixins:r,extends:i}=e,{mixins:n,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,o=s.get(e);let l;return o?l=o:!n.length&&!r&&!i?l=e:(l={},n.length&&n.forEach(u=>$t(l,u,a,!0)),$t(l,e,a)),s.set(e,l),l}function $t(t,e,r,i=!1){const{mixins:n,extends:s}=e;s&&$t(t,s,r,!0),n&&n.forEach(a=>$t(t,a,r,!0));for(const a in e)if(!(i&&a==="expose")){const o=Ca[a]||r&&r[a];t[a]=o?o(t[a],e[a]):e[a]}return t}const Ca={data:Si,props:et,emits:et,methods:et,computed:et,beforeCreate:de,created:de,beforeMount:de,mounted:de,beforeUpdate:de,updated:de,beforeDestroy:de,beforeUnmount:de,destroyed:de,unmounted:de,activated:de,deactivated:de,errorCaptured:de,serverPrefetch:de,components:et,directives:et,watch:Fa,provide:Si,inject:Sa};function Si(t,e){return e?t?function(){return fe(N(t)?t.call(this,this):t,N(e)?e.call(this,this):e)}:e:t}function Sa(t,e){return et(Dr(t),Dr(e))}function Dr(t){if(I(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function de(t,e){return t?[...new Set([].concat(t,e))]:e}function et(t,e){return t?fe(fe(Object.create(null),t),e):e}function Fa(t,e){if(!t)return e;if(!e)return t;const r=fe(Object.create(null),t);for(const i in e)r[i]=de(t[i],e[i]);return r}function Pa(t,e,r,i=!1){const n={},s={};qt(s,or,1),t.propsDefaults=Object.create(null),Gn(t,e,n,s);for(const a in t.propsOptions[0])a in n||(n[a]=void 0);r?t.props=i?n:Xs(n):t.type.props?t.props=n:t.props=s,t.attrs=s}function Oa(t,e,r,i){const{props:n,attrs:s,vnode:{patchFlag:a}}=t,o=W(n),[l]=t.propsOptions;let u=!1;if((i||a>0)&&!(a&16)){if(a&8){const c=t.vnode.dynamicProps;for(let _=0;_<c.length;_++){let d=c[_];const v=e[d];if(l)if(X(s,d))v!==s[d]&&(s[d]=v,u=!0);else{const b=gt(d);n[b]=Ir(l,o,b,v,t,!1)}else v!==s[d]&&(s[d]=v,u=!0)}}}else{Gn(t,e,n,s)&&(u=!0);let c;for(const _ in o)(!e||!X(e,_)&&((c=bt(_))===_||!X(e,c)))&&(l?r&&(r[_]!==void 0||r[c]!==void 0)&&(n[_]=Ir(l,o,_,void 0,t,!0)):delete n[_]);if(s!==o)for(const _ in s)(!e||!X(e,_)&&!0)&&(delete s[_],u=!0)}u&&ke(t,"set","$attrs")}function Gn(t,e,r,i){const[n,s]=t.propsOptions;let a=!1,o;if(e)for(let l in e){if(Ht(l))continue;const u=e[l];let c;n&&X(n,c=gt(l))?!s||!s.includes(c)?r[c]=u:(o||(o={}))[c]=u:si(t.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,a=!0)}if(s){const l=W(r),u=o||$;for(let c=0;c<s.length;c++){const _=s[c];r[_]=Ir(n,l,_,u[_],t,!X(u,_))}}return a}function Ir(t,e,r,i,n,s){const a=t[r];if(a!=null){const o=X(a,"default");if(o&&i===void 0){const l=a.default;if(a.type!==Function&&N(l)){const{propsDefaults:u}=n;r in u?i=u[r]:(mt(n),i=u[r]=l.call(null,e),st())}else i=l}a[0]&&(s&&!o?i=!1:a[1]&&(i===""||i===bt(r))&&(i=!0))}return i}function Vn(t,e,r=!1){const i=e.propsCache,n=i.get(t);if(n)return n;const s=t.props,a={},o=[];let l=!1;if(!N(t)){const c=_=>{l=!0;const[d,v]=Vn(_,e,!0);fe(a,d),v&&o.push(...v)};!r&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!l)return i.set(t,ht),ht;if(I(s))for(let c=0;c<s.length;c++){const _=gt(s[c]);Fi(_)&&(a[_]=$)}else if(s)for(const c in s){const _=gt(c);if(Fi(_)){const d=s[c],v=a[_]=I(d)||N(d)?{type:d}:d;if(v){const b=xi(Boolean,v.type),L=xi(String,v.type);v[0]=b>-1,v[1]=L<0||b<L,(b>-1||X(v,"default"))&&o.push(_)}}}const u=[a,o];return i.set(t,u),u}function Fi(t){return t[0]!=="$"}function Pi(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Oi(t,e){return Pi(t)===Pi(e)}function xi(t,e){return I(e)?e.findIndex(r=>Oi(r,t)):N(e)&&Oi(e,t)?0:-1}const Xn=t=>t[0]==="_"||t==="$stable",ai=t=>I(t)?t.map(xe):[xe(t)],xa=(t,e,r)=>{const i=ra((...n)=>ai(e(...n)),r);return i._c=!1,i},Wn=(t,e,r)=>{const i=t._ctx;for(const n in t){if(Xn(n))continue;const s=t[n];if(N(s))e[n]=xa(n,s,i);else if(s!=null){const a=ai(s);e[n]=()=>a}}},Hn=(t,e)=>{const r=ai(e);t.slots.default=()=>r},wa=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=W(e),qt(e,"_",r)):Wn(e,t.slots={})}else t.slots={},e&&Hn(t,e);qt(t.slots,or,1)},La=(t,e,r)=>{const{vnode:i,slots:n}=t;let s=!0,a=$;if(i.shapeFlag&32){const o=e._;o?r&&o===1?s=!1:(fe(n,e),!r&&o===1&&delete n._):(s=!e.$stable,Wn(e,n)),a=e}else e&&(Hn(t,e),a={default:1});if(s)for(const o in n)!Xn(o)&&!(o in a)&&delete n[o]};function Qe(t,e,r,i){const n=t.dirs,s=e&&e.dirs;for(let a=0;a<n.length;a++){const o=n[a];s&&(o.oldValue=s[a].value);let l=o.dir[i];l&&(Tt(),Ae(l,r,8,[t.el,o,t,e]),yt())}}function jn(){return{app:null,config:{isNativeTag:ls,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Da=0;function Ia(t,e){return function(i,n=null){n!=null&&!ne(n)&&(n=null);const s=jn(),a=new Set;let o=!1;const l=s.app={_uid:Da++,_component:i,_props:n,_container:null,_context:s,_instance:null,version:so,get config(){return s.config},set config(u){},use(u,...c){return a.has(u)||(u&&N(u.install)?(a.add(u),u.install(l,...c)):N(u)&&(a.add(u),u(l,...c))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,c){return c?(s.components[u]=c,l):s.components[u]},directive(u,c){return c?(s.directives[u]=c,l):s.directives[u]},mount(u,c,_){if(!o){const d=be(i,n);return d.appContext=s,c&&e?e(d,u):t(d,u,_),o=!0,l._container=u,u.__vue_app__=l,ui(d.component)||d.component.proxy}},unmount(){o&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return s.provides[u]=c,l}};return l}}function Br(t,e,r,i,n=!1){if(I(t)){t.forEach((d,v)=>Br(d,e&&(I(e)?e[v]:e),r,i,n));return}if(wr(i)&&!n)return;const s=i.shapeFlag&4?ui(i.component)||i.component.proxy:i.el,a=n?null:s,{i:o,r:l}=t,u=e&&e.r,c=o.refs===$?o.refs={}:o.refs,_=o.setupState;if(u!=null&&u!==l&&(se(u)?(c[u]=null,X(_,u)&&(_[u]=null)):ue(u)&&(u.value=null)),N(l))qe(l,o,12,[a,c]);else{const d=se(l),v=ue(l);if(d||v){const b=()=>{if(t.f){const L=d?c[l]:l.value;n?I(L)&&Yr(L,s):I(L)?L.includes(s)||L.push(s):d?c[l]=[s]:(l.value=[s],t.k&&(c[t.k]=l.value))}else d?(c[l]=a,X(_,l)&&(_[l]=a)):ue(l)&&(l.value=a,t.k&&(c[t.k]=a))};a?(b.id=-1,pe(b,r)):b()}}}const pe=la;function Ba(t){return Ma(t)}function Ma(t,e){const r=ds();r.__VUE__=!0;const{insert:i,remove:n,patchProp:s,createElement:a,createText:o,createComment:l,setText:u,setElementText:c,parentNode:_,nextSibling:d,setScopeId:v=Ce,cloneNode:b,insertStaticContent:L}=t,F=(f,h,p,E=null,g=null,y=null,R=!1,T=null,A=!!h.dynamicChildren)=>{if(f===h)return;f&&!tt(f,h)&&(E=Ut(f),ye(f,g,y,!0),f=null),h.patchFlag===-2&&(A=!1,h.dynamicChildren=null);const{type:m,ref:O,shapeFlag:C}=h;switch(m){case oi:w(f,h,p,E);break;case Ie:P(f,h,p,E);break;case gr:f==null&&U(h,p,E,R);break;case Oe:K(f,h,p,E,g,y,R,T,A);break;default:C&1?ee(f,h,p,E,g,y,R,T,A):C&6?ae(f,h,p,E,g,y,R,T,A):(C&64||C&128)&&m.process(f,h,p,E,g,y,R,T,A,at)}O!=null&&g&&Br(O,f&&f.ref,y,h||f,!h)},w=(f,h,p,E)=>{if(f==null)i(h.el=o(h.children),p,E);else{const g=h.el=f.el;h.children!==f.children&&u(g,h.children)}},P=(f,h,p,E)=>{f==null?i(h.el=l(h.children||""),p,E):h.el=f.el},U=(f,h,p,E)=>{[f.el,f.anchor]=L(f.children,h,p,E,f.el,f.anchor)},k=({el:f,anchor:h},p,E)=>{let g;for(;f&&f!==h;)g=d(f),i(f,p,E),f=g;i(h,p,E)},q=({el:f,anchor:h})=>{let p;for(;f&&f!==h;)p=d(f),n(f),f=p;n(h)},ee=(f,h,p,E,g,y,R,T,A)=>{R=R||h.type==="svg",f==null?B(h,p,E,g,y,R,T,A):te(f,h,g,y,R,T,A)},B=(f,h,p,E,g,y,R,T)=>{let A,m;const{type:O,props:C,shapeFlag:x,transition:D,patchFlag:V,dirs:re}=f;if(f.el&&b!==void 0&&V===-1)A=f.el=b(f.el);else{if(A=f.el=a(f.type,y,C&&C.is,C),x&8?c(A,f.children):x&16&&H(f.children,A,null,E,g,y&&O!=="foreignObject",R,T),re&&Qe(f,null,E,"created"),C){for(const J in C)J!=="value"&&!Ht(J)&&s(A,J,null,C[J],y,f.children,E,g,Me);"value"in C&&s(A,"value",null,C.value),(m=C.onVnodeBeforeMount)&&Pe(m,E,f)}Q(A,f,f.scopeId,R,E)}re&&Qe(f,null,E,"beforeMount");const z=(!g||g&&!g.pendingBranch)&&D&&!D.persisted;z&&D.beforeEnter(A),i(A,h,p),((m=C&&C.onVnodeMounted)||z||re)&&pe(()=>{m&&Pe(m,E,f),z&&D.enter(A),re&&Qe(f,null,E,"mounted")},g)},Q=(f,h,p,E,g)=>{if(p&&v(f,p),E)for(let y=0;y<E.length;y++)v(f,E[y]);if(g){let y=g.subTree;if(h===y){const R=g.vnode;Q(f,R,R.scopeId,R.slotScopeIds,g.parent)}}},H=(f,h,p,E,g,y,R,T,A=0)=>{for(let m=A;m<f.length;m++){const O=f[m]=T?je(f[m]):xe(f[m]);F(null,O,h,p,E,g,y,R,T)}},te=(f,h,p,E,g,y,R)=>{const T=h.el=f.el;let{patchFlag:A,dynamicChildren:m,dirs:O}=h;A|=f.patchFlag&16;const C=f.props||$,x=h.props||$;let D;p&&Ze(p,!1),(D=x.onVnodeBeforeUpdate)&&Pe(D,p,h,f),O&&Qe(h,f,p,"beforeUpdate"),p&&Ze(p,!0);const V=g&&h.type!=="foreignObject";if(m?ie(f.dynamicChildren,m,T,p,E,V,y):R||Z(f,h,T,null,p,E,V,y,!1),A>0){if(A&16)S(T,h,C,x,p,E,g);else if(A&2&&C.class!==x.class&&s(T,"class",null,x.class,g),A&4&&s(T,"style",C.style,x.style,g),A&8){const re=h.dynamicProps;for(let z=0;z<re.length;z++){const J=re[z],Re=C[J],ot=x[J];(ot!==Re||J==="value")&&s(T,J,Re,ot,g,f.children,p,E,Me)}}A&1&&f.children!==h.children&&c(T,h.children)}else!R&&m==null&&S(T,h,C,x,p,E,g);((D=x.onVnodeUpdated)||O)&&pe(()=>{D&&Pe(D,p,h,f),O&&Qe(h,f,p,"updated")},E)},ie=(f,h,p,E,g,y,R)=>{for(let T=0;T<h.length;T++){const A=f[T],m=h[T],O=A.el&&(A.type===Oe||!tt(A,m)||A.shapeFlag&70)?_(A.el):p;F(A,m,O,null,E,g,y,R,!0)}},S=(f,h,p,E,g,y,R)=>{if(p!==E){for(const T in E){if(Ht(T))continue;const A=E[T],m=p[T];A!==m&&T!=="value"&&s(f,T,m,A,R,h.children,g,y,Me)}if(p!==$)for(const T in p)!Ht(T)&&!(T in E)&&s(f,T,p[T],null,R,h.children,g,y,Me);"value"in E&&s(f,"value",p.value,E.value)}},K=(f,h,p,E,g,y,R,T,A)=>{const m=h.el=f?f.el:o(""),O=h.anchor=f?f.anchor:o("");let{patchFlag:C,dynamicChildren:x,slotScopeIds:D}=h;D&&(T=T?T.concat(D):D),f==null?(i(m,p,E),i(O,p,E),H(h.children,p,O,g,y,R,T,A)):C>0&&C&64&&x&&f.dynamicChildren?(ie(f.dynamicChildren,x,p,g,y,R,T),(h.key!=null||g&&h===g.subTree)&&Yn(f,h,!0)):Z(f,h,p,O,g,y,R,T,A)},ae=(f,h,p,E,g,y,R,T,A)=>{h.slotScopeIds=T,f==null?h.shapeFlag&512?g.ctx.activate(h,p,E,R,A):j(h,p,E,g,y,R,A):M(f,h,A)},j=(f,h,p,E,g,y,R)=>{const T=f.component=$a(f,E,g);if(sr(f)&&(T.ctx.renderer=at),Za(T),T.asyncDep){if(g&&g.registerDep(T,G),!f.el){const A=T.subTree=be(Ie);P(null,A,h,p)}return}G(T,f,h,p,g,y,R)},M=(f,h,p)=>{const E=h.component=f.component;if(sa(f,h,p))if(E.asyncDep&&!E.asyncResolved){Y(E,h,p);return}else E.next=h,Zs(E.update),E.update();else h.component=f.component,h.el=f.el,E.vnode=h},G=(f,h,p,E,g,y,R)=>{const T=()=>{if(f.isMounted){let{next:O,bu:C,u:x,parent:D,vnode:V}=f,re=O,z;Ze(f,!1),O?(O.el=V.el,Y(f,O,R)):O=V,C&&cr(C),(z=O.props&&O.props.onVnodeBeforeUpdate)&&Pe(z,D,O,V),Ze(f,!0);const J=hr(f),Re=f.subTree;f.subTree=J,F(Re,J,_(Re.el),Ut(Re),f,g,y),O.el=J.el,re===null&&aa(f,J.el),x&&pe(x,g),(z=O.props&&O.props.onVnodeUpdated)&&pe(()=>Pe(z,D,O,V),g)}else{let O;const{el:C,props:x}=h,{bm:D,m:V,parent:re}=f,z=wr(h);if(Ze(f,!1),D&&cr(D),!z&&(O=x&&x.onVnodeBeforeMount)&&Pe(O,re,h),Ze(f,!0),C&&ur){const J=()=>{f.subTree=hr(f),ur(C,f.subTree,f,g,null)};z?h.type.__asyncLoader().then(()=>!f.isUnmounted&&J()):J()}else{const J=f.subTree=hr(f);F(null,J,p,E,f,g,y),h.el=J.el}if(V&&pe(V,g),!z&&(O=x&&x.onVnodeMounted)){const J=h;pe(()=>Pe(O,re,J),g)}h.shapeFlag&256&&f.a&&pe(f.a,g),f.isMounted=!0,h=p=E=null}},A=f.effect=new $r(T,()=>vn(f.update),f.scope),m=f.update=A.run.bind(A);m.id=f.uid,Ze(f,!0),m()},Y=(f,h,p)=>{h.component=f;const E=f.vnode.props;f.vnode=h,f.next=null,Oa(f,h.props,E,p),La(f,h.children,p),Tt(),ni(void 0,f.update),yt()},Z=(f,h,p,E,g,y,R,T,A=!1)=>{const m=f&&f.children,O=f?f.shapeFlag:0,C=h.children,{patchFlag:x,shapeFlag:D}=h;if(x>0){if(x&128){_e(m,C,p,E,g,y,R,T,A);return}else if(x&256){$e(m,C,p,E,g,y,R,T,A);return}}D&8?(O&16&&Me(m,g,y),C!==m&&c(p,C)):O&16?D&16?_e(m,C,p,E,g,y,R,T,A):Me(m,g,y,!0):(O&8&&c(p,""),D&16&&H(C,p,E,g,y,R,T,A))},$e=(f,h,p,E,g,y,R,T,A)=>{f=f||ht,h=h||ht;const m=f.length,O=h.length,C=Math.min(m,O);let x;for(x=0;x<C;x++){const D=h[x]=A?je(h[x]):xe(h[x]);F(f[x],D,p,null,g,y,R,T,A)}m>O?Me(f,g,y,!0,!1,C):H(h,p,E,g,y,R,T,A,C)},_e=(f,h,p,E,g,y,R,T,A)=>{let m=0;const O=h.length;let C=f.length-1,x=O-1;for(;m<=C&&m<=x;){const D=f[m],V=h[m]=A?je(h[m]):xe(h[m]);if(tt(D,V))F(D,V,p,null,g,y,R,T,A);else break;m++}for(;m<=C&&m<=x;){const D=f[C],V=h[x]=A?je(h[x]):xe(h[x]);if(tt(D,V))F(D,V,p,null,g,y,R,T,A);else break;C--,x--}if(m>C){if(m<=x){const D=x+1,V=D<O?h[D].el:E;for(;m<=x;)F(null,h[m]=A?je(h[m]):xe(h[m]),p,V,g,y,R,T,A),m++}}else if(m>x)for(;m<=C;)ye(f[m],g,y,!0),m++;else{const D=m,V=m,re=new Map;for(m=V;m<=x;m++){const ge=h[m]=A?je(h[m]):xe(h[m]);ge.key!=null&&re.set(ge.key,m)}let z,J=0;const Re=x-V+1;let ot=!1,hi=0;const vt=new Array(Re);for(m=0;m<Re;m++)vt[m]=0;for(m=D;m<=C;m++){const ge=f[m];if(J>=Re){ye(ge,g,y,!0);continue}let Fe;if(ge.key!=null)Fe=re.get(ge.key);else for(z=V;z<=x;z++)if(vt[z-V]===0&&tt(ge,h[z])){Fe=z;break}Fe===void 0?ye(ge,g,y,!0):(vt[Fe-V]=m+1,Fe>=hi?hi=Fe:ot=!0,F(ge,h[Fe],p,null,g,y,R,T,A),J++)}const _i=ot?Ua(vt):ht;for(z=_i.length-1,m=Re-1;m>=0;m--){const ge=V+m,Fe=h[ge],di=ge+1<O?h[ge+1].el:E;vt[m]===0?F(null,Fe,p,di,g,y,R,T,A):ot&&(z<0||m!==_i[z]?Be(Fe,p,di,2):z--)}}},Be=(f,h,p,E,g=null)=>{const{el:y,type:R,transition:T,children:A,shapeFlag:m}=f;if(m&6){Be(f.component.subTree,h,p,E);return}if(m&128){f.suspense.move(h,p,E);return}if(m&64){R.move(f,h,p,at);return}if(R===Oe){i(y,h,p);for(let C=0;C<A.length;C++)Be(A[C],h,p,E);i(f.anchor,h,p);return}if(R===gr){k(f,h,p);return}if(E!==2&&m&1&&T)if(E===0)T.beforeEnter(y),i(y,h,p),pe(()=>T.enter(y),g);else{const{leave:C,delayLeave:x,afterLeave:D}=T,V=()=>i(y,h,p),re=()=>{C(y,()=>{V(),D&&D()})};x?x(y,V,re):re()}else i(y,h,p)},ye=(f,h,p,E=!1,g=!1)=>{const{type:y,props:R,ref:T,children:A,dynamicChildren:m,shapeFlag:O,patchFlag:C,dirs:x}=f;if(T!=null&&Br(T,null,p,f,!0),O&256){h.ctx.deactivate(f);return}const D=O&1&&x,V=!wr(f);let re;if(V&&(re=R&&R.onVnodeBeforeUnmount)&&Pe(re,h,f),O&6)rs(f.component,p,E);else{if(O&128){f.suspense.unmount(p,E);return}D&&Qe(f,null,h,"beforeUnmount"),O&64?f.type.remove(f,h,p,g,at,E):m&&(y!==Oe||C>0&&C&64)?Me(m,h,p,!1,!0):(y===Oe&&C&384||!g&&O&16)&&Me(A,h,p),E&&fi(f)}(V&&(re=R&&R.onVnodeUnmounted)||D)&&pe(()=>{re&&Pe(re,h,f),D&&Qe(f,null,h,"unmounted")},p)},fi=f=>{const{type:h,el:p,anchor:E,transition:g}=f;if(h===Oe){ts(p,E);return}if(h===gr){q(f);return}const y=()=>{n(p),g&&!g.persisted&&g.afterLeave&&g.afterLeave()};if(f.shapeFlag&1&&g&&!g.persisted){const{leave:R,delayLeave:T}=g,A=()=>R(p,y);T?T(f.el,y,A):A()}else y()},ts=(f,h)=>{let p;for(;f!==h;)p=d(f),n(f),f=p;n(h)},rs=(f,h,p)=>{const{bum:E,scope:g,update:y,subTree:R,um:T}=f;E&&cr(E),g.stop(),y&&(y.active=!1,ye(R,f,h,p)),T&&pe(T,h),pe(()=>{f.isUnmounted=!0},h),h&&h.pendingBranch&&!h.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===h.pendingId&&(h.deps--,h.deps===0&&h.resolve())},Me=(f,h,p,E=!1,g=!1,y=0)=>{for(let R=y;R<f.length;R++)ye(f[R],h,p,E,g)},Ut=f=>f.shapeFlag&6?Ut(f.component.subTree):f.shapeFlag&128?f.suspense.next():d(f.anchor||f.el),ci=(f,h,p)=>{f==null?h._vnode&&ye(h._vnode,null,null,!0):F(h._vnode||null,f,h,null,null,null,p),Cn(),h._vnode=f},at={p:F,um:ye,m:Be,r:fi,mt:j,mc:H,pc:Z,pbc:ie,n:Ut,o:t};let lr,ur;return e&&([lr,ur]=e(at)),{render:ci,hydrate:lr,createApp:Ia(ci,lr)}}function Ze({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function Yn(t,e,r=!1){const i=t.children,n=e.children;if(I(i)&&I(n))for(let s=0;s<i.length;s++){const a=i[s];let o=n[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[s]=je(n[s]),o.el=a.el),r||Yn(a,o))}}function Ua(t){const e=t.slice(),r=[0];let i,n,s,a,o;const l=t.length;for(i=0;i<l;i++){const u=t[i];if(u!==0){if(n=r[r.length-1],t[n]<u){e[i]=n,r.push(i);continue}for(s=0,a=r.length-1;s<a;)o=s+a>>1,t[r[o]]<u?s=o+1:a=o;u<t[r[s]]&&(s>0&&(e[i]=r[s-1]),r[s]=i)}}for(s=r.length,a=r[s-1];s-- >0;)r[s]=a,a=e[a];return r}const Na=t=>t.__isTeleport,ka=Symbol(),Oe=Symbol(void 0),oi=Symbol(void 0),Ie=Symbol(void 0),gr=Symbol(void 0),Ot=[];let nt=null;function Ga(t=!1){Ot.push(nt=t?null:[])}function Va(){Ot.pop(),nt=Ot[Ot.length-1]||null}let Qt=1;function wi(t){Qt+=t}function qn(t){return t.dynamicChildren=Qt>0?nt||ht:null,Va(),Qt>0&&nt&&nt.push(t),t}function rl(t,e,r,i,n,s){return qn(Kn(t,e,r,i,n,s,!0))}function Xa(t,e,r,i,n){return qn(be(t,e,r,i,n,!0))}function Mr(t){return t?t.__v_isVNode===!0:!1}function tt(t,e){return t.type===e.type&&t.key===e.key}const or="__vInternal",zn=({key:t})=>t!=null?t:null,jt=({ref:t,ref_key:e,ref_for:r})=>t!=null?se(t)||ue(t)||N(t)?{i:De,r:t,k:e,f:!!r}:t:null;function Kn(t,e=null,r=null,i=0,n=null,s=t===Oe?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&zn(e),ref:e&&jt(e),scopeId:Pn,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null};return o?(li(l,r),s&128&&t.normalize(l)):r&&(l.shapeFlag|=se(r)?8:16),Qt>0&&!a&&nt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&nt.push(l),l}const be=Wa;function Wa(t,e=null,r=null,i=0,n=null,s=!1){if((!t||t===ka)&&(t=Ie),Mr(t)){const o=Et(t,e,!0);return r&&li(o,r),o}if(ro(t)&&(t=t.__vccOpts),e){e=Ha(e);let{class:o,style:l}=e;o&&!se(o)&&(e.class=Hr(o)),ne(l)&&(gn(l)&&!I(l)&&(l=fe({},l)),e.style=Wr(l))}const a=se(t)?1:oa(t)?128:Na(t)?64:ne(t)?4:N(t)?2:0;return Kn(t,e,r,i,n,a,s,!0)}function Ha(t){return t?gn(t)||or in t?fe({},t):t:null}function Et(t,e,r=!1){const{props:i,ref:n,patchFlag:s,children:a}=t,o=e?Ya(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:o,key:o&&zn(o),ref:e&&e.ref?r&&n?I(n)?n.concat(jt(e)):[n,jt(e)]:jt(e):n,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Oe?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Et(t.ssContent),ssFallback:t.ssFallback&&Et(t.ssFallback),el:t.el,anchor:t.anchor}}function ja(t=" ",e=0){return be(oi,null,t,e)}function il(t="",e=!1){return e?(Ga(),Xa(Ie,null,t)):be(Ie,null,t)}function xe(t){return t==null||typeof t=="boolean"?be(Ie):I(t)?be(Oe,null,t.slice()):typeof t=="object"?je(t):be(oi,null,String(t))}function je(t){return t.el===null||t.memo?t:Et(t)}function li(t,e){let r=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(I(e))r=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),li(t,n()),n._c&&(n._d=!0));return}else{r=32;const n=e._;!n&&!(or in e)?e._ctx=De:n===3&&De&&(De.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else N(e)?(e={default:e,_ctx:De},r=32):(e=String(e),i&64?(r=16,e=[ja(e)]):r=8);t.children=e,t.shapeFlag|=r}function Ya(...t){const e={};for(let r=0;r<t.length;r++){const i=t[r];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=Hr([e.class,i.class]));else if(n==="style")e.style=Wr([e.style,i.style]);else if(er(n)){const s=e[n],a=i[n];a&&s!==a&&!(I(s)&&s.includes(a))&&(e[n]=s?[].concat(s,a):a)}else n!==""&&(e[n]=i[n])}return e}function Pe(t,e,r,i=null){Ae(t,e,7,[r,i])}function nl(t,e,r,i){let n;const s=r&&r[i];if(I(t)||se(t)){n=new Array(t.length);for(let a=0,o=t.length;a<o;a++)n[a]=e(t[a],a,void 0,s&&s[a])}else if(typeof t=="number"){n=new Array(t);for(let a=0;a<t;a++)n[a]=e(a+1,a,void 0,s&&s[a])}else if(ne(t))if(t[Symbol.iterator])n=Array.from(t,(a,o)=>e(a,o,void 0,s&&s[o]));else{const a=Object.keys(t);n=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const u=a[o];n[o]=e(t[u],u,o,s&&s[o])}}else n=[];return r&&(r[i]=n),n}const Ur=t=>t?$n(t)?ui(t)||t.proxy:Ur(t.parent):null,Zt=fe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ur(t.parent),$root:t=>Ur(t.root),$emit:t=>t.emit,$options:t=>kn(t),$forceUpdate:t=>()=>vn(t.update),$nextTick:t=>$s.bind(t.proxy),$watch:t=>fa.bind(t)}),qa={get({_:t},e){const{ctx:r,setupState:i,data:n,props:s,accessCache:a,type:o,appContext:l}=t;let u;if(e[0]!=="$"){const v=a[e];if(v!==void 0)switch(v){case 1:return i[e];case 2:return n[e];case 4:return r[e];case 3:return s[e]}else{if(i!==$&&X(i,e))return a[e]=1,i[e];if(n!==$&&X(n,e))return a[e]=2,n[e];if((u=t.propsOptions[0])&&X(u,e))return a[e]=3,s[e];if(r!==$&&X(r,e))return a[e]=4,r[e];Lr&&(a[e]=0)}}const c=Zt[e];let _,d;if(c)return e==="$attrs"&&Te(t,"get",e),c(t);if((_=o.__cssModules)&&(_=_[e]))return _;if(r!==$&&X(r,e))return a[e]=4,r[e];if(d=l.config.globalProperties,X(d,e))return d[e]},set({_:t},e,r){const{data:i,setupState:n,ctx:s}=t;return n!==$&&X(n,e)?(n[e]=r,!0):i!==$&&X(i,e)?(i[e]=r,!0):X(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:i,appContext:n,propsOptions:s}},a){let o;return!!r[a]||t!==$&&X(t,a)||e!==$&&X(e,a)||(o=s[0])&&X(o,a)||X(i,a)||X(Zt,a)||X(n.config.globalProperties,a)},defineProperty(t,e,r){return r.get!=null?this.set(t,e,r.get(),null):r.value!=null&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}},za=jn();let Ka=0;function $a(t,e,r){const i=t.type,n=(e?e.appContext:t.appContext)||za,s={uid:Ka++,vnode:t,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new ps(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vn(i,n),emitsOptions:Fn(i,n),emit:null,emitted:null,propsDefaults:$,inheritAttrs:i.inheritAttrs,ctx:$,data:$,props:$,attrs:$,slots:$,refs:$,setupState:$,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=ta.bind(null,s),t.ce&&t.ce(s),s}let le=null;const Qa=()=>le||De,mt=t=>{le=t,t.scope.on()},st=()=>{le&&le.scope.off(),le=null};function $n(t){return t.vnode.shapeFlag&4}let Bt=!1;function Za(t,e=!1){Bt=e;const{props:r,children:i}=t.vnode,n=$n(t);Pa(t,r,n,e),wa(t,i);const s=n?Ja(t,e):void 0;return Bt=!1,s}function Ja(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=En(new Proxy(t.ctx,qa));const{setup:i}=r;if(i){const n=t.setupContext=i.length>1?to(t):null;mt(t),Tt();const s=qe(i,t,0,[t.props,n]);if(yt(),st(),Zi(s)){if(s.then(st,st),e)return s.then(a=>{Li(t,a,e)}).catch(a=>{nr(a,t,0)});t.asyncDep=s}else Li(t,s,e)}else Qn(t,e)}function Li(t,e,r){N(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ne(e)&&(t.setupState=Tn(e)),Qn(t,r)}let Di;function Qn(t,e,r){const i=t.type;if(!t.render){if(!e&&Di&&!i.render){const n=i.template;if(n){const{isCustomElement:s,compilerOptions:a}=t.appContext.config,{delimiters:o,compilerOptions:l}=i,u=fe(fe({isCustomElement:s,delimiters:o},a),l);i.render=Di(n,u)}}t.render=i.render||Ce}mt(t),Tt(),Aa(t),yt(),st()}function eo(t){return new Proxy(t.attrs,{get(e,r){return Te(t,"get","$attrs"),e[r]}})}function to(t){const e=i=>{t.exposed=i||{}};let r;return{get attrs(){return r||(r=eo(t))},slots:t.slots,emit:t.emit,expose:e}}function ui(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Tn(En(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in Zt)return Zt[r](t)}}))}function ro(t){return N(t)&&"__vccOpts"in t}const io=(t,e)=>zs(t,e,Bt);function no(t,e,r){const i=arguments.length;return i===2?ne(e)&&!I(e)?Mr(e)?be(t,null,[e]):be(t,e):be(t,null,e):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&Mr(r)&&(r=[r]),be(t,e,r))}const so="3.2.31",ao="http://www.w3.org/2000/svg",rt=typeof document!="undefined"?document:null,Ii=rt&&rt.createElement("template"),oo={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,i)=>{const n=e?rt.createElementNS(ao,t):rt.createElement(t,r?{is:r}:void 0);return t==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:t=>rt.createTextNode(t),createComment:t=>rt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>rt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,r,i,n,s){const a=r?r.previousSibling:e.lastChild;if(n&&(n===s||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),r),!(n===s||!(n=n.nextSibling)););else{Ii.innerHTML=i?`<svg>${t}</svg>`:t;const o=Ii.content;if(i){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,r)}return[a?a.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}};function lo(t,e,r){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}function uo(t,e,r){const i=t.style,n=se(r);if(r&&!n){for(const s in r)Nr(i,s,r[s]);if(e&&!se(e))for(const s in e)r[s]==null&&Nr(i,s,"")}else{const s=i.display;n?e!==r&&(i.cssText=r):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=s)}}const Bi=/\s*!important$/;function Nr(t,e,r){if(I(r))r.forEach(i=>Nr(t,e,i));else if(e.startsWith("--"))t.setProperty(e,r);else{const i=fo(t,e);Bi.test(r)?t.setProperty(bt(i),r.replace(Bi,""),"important"):t[i]=r}}const Mi=["Webkit","Moz","ms"],Er={};function fo(t,e){const r=Er[e];if(r)return r;let i=gt(e);if(i!=="filter"&&i in t)return Er[e]=i;i=tn(i);for(let n=0;n<Mi.length;n++){const s=Mi[n]+i;if(s in t)return Er[e]=s}return e}const Ui="http://www.w3.org/1999/xlink";function co(t,e,r,i,n){if(i&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(Ui,e.slice(6,e.length)):t.setAttributeNS(Ui,e,r);else{const s=ns(e);r==null||s&&!Ki(r)?t.removeAttribute(e):t.setAttribute(e,s?"":r)}}function ho(t,e,r,i,n,s,a){if(e==="innerHTML"||e==="textContent"){i&&a(i,n,s),t[e]=r==null?"":r;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=r;const o=r==null?"":r;(t.value!==o||t.tagName==="OPTION")&&(t.value=o),r==null&&t.removeAttribute(e);return}if(r===""||r==null){const o=typeof t[e];if(o==="boolean"){t[e]=Ki(r);return}else if(r==null&&o==="string"){t[e]="",t.removeAttribute(e);return}else if(o==="number"){try{t[e]=0}catch{}t.removeAttribute(e);return}}try{t[e]=r}catch{}}let Jt=Date.now,Zn=!1;if(typeof window!="undefined"){Jt()>document.createEvent("Event").timeStamp&&(Jt=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);Zn=!!(t&&Number(t[1])<=53)}let kr=0;const _o=Promise.resolve(),po=()=>{kr=0},go=()=>kr||(_o.then(po),kr=Jt());function Eo(t,e,r,i){t.addEventListener(e,r,i)}function mo(t,e,r,i){t.removeEventListener(e,r,i)}function bo(t,e,r,i,n=null){const s=t._vei||(t._vei={}),a=s[e];if(i&&a)a.value=i;else{const[o,l]=To(e);if(i){const u=s[e]=yo(i,n);Eo(t,o,u,l)}else a&&(mo(t,o,a,l),s[e]=void 0)}}const Ni=/(?:Once|Passive|Capture)$/;function To(t){let e;if(Ni.test(t)){e={};let r;for(;r=t.match(Ni);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[bt(t.slice(2)),e]}function yo(t,e){const r=i=>{const n=i.timeStamp||Jt();(Zn||n>=r.attached-1)&&Ae(vo(i,r.value),e,5,[i])};return r.value=t,r.attached=go(),r}function vo(t,e){if(I(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const ki=/^on[a-z]/,Ao=(t,e,r,i,n=!1,s,a,o,l)=>{e==="class"?lo(t,i,n):e==="style"?uo(t,r,i):er(e)?jr(e)||bo(t,e,r,i,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ro(t,e,i,n))?ho(t,e,i,s,a,o,l):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),co(t,e,i,n))};function Ro(t,e,r,i){return i?!!(e==="innerHTML"||e==="textContent"||e in t&&ki.test(e)&&N(r)):e==="spellcheck"||e==="draggable"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||ki.test(e)&&se(r)?!1:e in t}const Xe="transition",At="animation",Jn=(t,{slots:e})=>no(wn,Co(t),e);Jn.displayName="Transition";const es={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Jn.props=fe({},wn.props,es);const Je=(t,e=[])=>{I(t)?t.forEach(r=>r(...e)):t&&t(...e)},Gi=t=>t?I(t)?t.some(e=>e.length>1):t.length>1:!1;function Co(t){const e={};for(const S in t)S in es||(e[S]=t[S]);if(t.css===!1)return e;const{name:r="v",type:i,duration:n,enterFromClass:s=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:l=s,appearActiveClass:u=a,appearToClass:c=o,leaveFromClass:_=`${r}-leave-from`,leaveActiveClass:d=`${r}-leave-active`,leaveToClass:v=`${r}-leave-to`}=t,b=So(n),L=b&&b[0],F=b&&b[1],{onBeforeEnter:w,onEnter:P,onEnterCancelled:U,onLeave:k,onLeaveCancelled:q,onBeforeAppear:ee=w,onAppear:B=P,onAppearCancelled:Q=U}=e,H=(S,K,ae)=>{lt(S,K?c:o),lt(S,K?u:a),ae&&ae()},te=(S,K)=>{lt(S,v),lt(S,d),K&&K()},ie=S=>(K,ae)=>{const j=S?B:P,M=()=>H(K,S,ae);Je(j,[K,M]),Vi(()=>{lt(K,S?l:s),We(K,S?c:o),Gi(j)||Xi(K,i,L,M)})};return fe(e,{onBeforeEnter(S){Je(w,[S]),We(S,s),We(S,a)},onBeforeAppear(S){Je(ee,[S]),We(S,l),We(S,u)},onEnter:ie(!1),onAppear:ie(!0),onLeave(S,K){const ae=()=>te(S,K);We(S,_),Oo(),We(S,d),Vi(()=>{lt(S,_),We(S,v),Gi(k)||Xi(S,i,F,ae)}),Je(k,[S,ae])},onEnterCancelled(S){H(S,!1),Je(U,[S])},onAppearCancelled(S){H(S,!0),Je(Q,[S])},onLeaveCancelled(S){te(S),Je(q,[S])}})}function So(t){if(t==null)return null;if(ne(t))return[mr(t.enter),mr(t.leave)];{const e=mr(t);return[e,e]}}function mr(t){return rn(t)}function We(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t._vtc||(t._vtc=new Set)).add(e)}function lt(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const{_vtc:r}=t;r&&(r.delete(e),r.size||(t._vtc=void 0))}function Vi(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Fo=0;function Xi(t,e,r,i){const n=t._endId=++Fo,s=()=>{n===t._endId&&i()};if(r)return setTimeout(s,r);const{type:a,timeout:o,propCount:l}=Po(t,e);if(!a)return i();const u=a+"end";let c=0;const _=()=>{t.removeEventListener(u,d),s()},d=v=>{v.target===t&&++c>=l&&_()};setTimeout(()=>{c<l&&_()},o+1),t.addEventListener(u,d)}function Po(t,e){const r=window.getComputedStyle(t),i=b=>(r[b]||"").split(", "),n=i(Xe+"Delay"),s=i(Xe+"Duration"),a=Wi(n,s),o=i(At+"Delay"),l=i(At+"Duration"),u=Wi(o,l);let c=null,_=0,d=0;e===Xe?a>0&&(c=Xe,_=a,d=s.length):e===At?u>0&&(c=At,_=u,d=l.length):(_=Math.max(a,u),c=_>0?a>u?Xe:At:null,d=c?c===Xe?s.length:l.length:0);const v=c===Xe&&/\b(transform|all)(,|$)/.test(r[Xe+"Property"]);return{type:c,timeout:_,propCount:d,hasTransform:v}}function Wi(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,i)=>Hi(r)+Hi(t[i])))}function Hi(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function Oo(){return document.body.offsetHeight}const xo=fe({patchProp:Ao},oo);let ji;function wo(){return ji||(ji=Ba(xo))}const sl=(...t)=>{const e=wo().createApp(...t),{mount:r}=e;return e.mount=i=>{const n=Lo(i);if(!n)return;const s=e._component;!N(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.innerHTML="";const a=r(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},e};function Lo(t){return se(t)?document.querySelector(t):t}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gr=function(t,e){return Gr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},Gr(t,e)};function Ke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Gr(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Yi=function(){return Yi=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Yi.apply(this,arguments)};function al(t,e,r,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,i);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(n<3?a(s):n>3?a(e,r,s):a(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}var Do=function(){function t(e,r,i,n){r===void 0&&(r=!1),this.initalize(e,r,i,n)}return t.prototype.initalize=function(e,r,i,n){return r===void 0&&(r=!1),this.mask=e,this.skipNextObservers=r,this.target=i,this.currentTarget=n,this},t}(),Io=function(){function t(e,r,i){i===void 0&&(i=null),this.callback=e,this.mask=r,this.scope=i,this._willBeUnregistered=!1,this.unregisterOnNextCall=!1}return t}(),he=function(){function t(e){this._observers=new Array,this._eventState=new Do(0),e&&(this._onObserverAdded=e)}return Object.defineProperty(t.prototype,"observers",{get:function(){return this._observers},enumerable:!1,configurable:!0}),t.prototype.add=function(e,r,i,n,s){if(r===void 0&&(r=-1),i===void 0&&(i=!1),n===void 0&&(n=null),s===void 0&&(s=!1),!e)return null;var a=new Io(e,r,n);return a.unregisterOnNextCall=s,i?this._observers.unshift(a):this._observers.push(a),this._onObserverAdded&&this._onObserverAdded(a),a},t.prototype.addOnce=function(e){return this.add(e,void 0,void 0,void 0,!0)},t.prototype.remove=function(e){if(!e)return!1;var r=this._observers.indexOf(e);return r!==-1?(this._deferUnregister(e),!0):!1},t.prototype.removeCallback=function(e,r){for(var i=0;i<this._observers.length;i++){var n=this._observers[i];if(!n._willBeUnregistered&&n.callback===e&&(!r||r===n.scope))return this._deferUnregister(n),!0}return!1},t.prototype._deferUnregister=function(e){var r=this;e.unregisterOnNextCall=!1,e._willBeUnregistered=!0,setTimeout(function(){r._remove(e)},0)},t.prototype._remove=function(e){if(!e)return!1;var r=this._observers.indexOf(e);return r!==-1?(this._observers.splice(r,1),!0):!1},t.prototype.makeObserverTopPriority=function(e){this._remove(e),this._observers.unshift(e)},t.prototype.makeObserverBottomPriority=function(e){this._remove(e),this._observers.push(e)},t.prototype.notifyObservers=function(e,r,i,n,s){if(r===void 0&&(r=-1),!this._observers.length)return!0;var a=this._eventState;a.mask=r,a.target=i,a.currentTarget=n,a.skipNextObservers=!1,a.lastReturnValue=e,a.userInfo=s;for(var o=0,l=this._observers;o<l.length;o++){var u=l[o];if(!u._willBeUnregistered&&(u.mask&r&&(u.scope?a.lastReturnValue=u.callback.apply(u.scope,[e,a]):a.lastReturnValue=u.callback(e,a),u.unregisterOnNextCall&&this._deferUnregister(u)),a.skipNextObservers))return!1}return!0},t.prototype.notifyObserversWithPromise=function(e,r,i,n,s){var a=this;r===void 0&&(r=-1);var o=Promise.resolve(e);if(!this._observers.length)return o;var l=this._eventState;return l.mask=r,l.target=i,l.currentTarget=n,l.skipNextObservers=!1,l.userInfo=s,this._observers.forEach(function(u){l.skipNextObservers||u._willBeUnregistered||u.mask&r&&(u.scope?o=o.then(function(c){return l.lastReturnValue=c,u.callback.apply(u.scope,[e,l])}):o=o.then(function(c){return l.lastReturnValue=c,u.callback(e,l)}),u.unregisterOnNextCall&&a._deferUnregister(u))}),o.then(function(){return e})},t.prototype.notifyObserver=function(e,r,i){i===void 0&&(i=-1);var n=this._eventState;n.mask=i,n.skipNextObservers=!1,e.callback(r,n)},t.prototype.hasObservers=function(){return this._observers.length>0},t.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},t.prototype.clone=function(){var e=new t;return e._observers=this._observers.slice(0),e},t.prototype.hasSpecificMask=function(e){e===void 0&&(e=-1);for(var r=0,i=this._observers;r<i.length;r++){var n=i[r];if(n.mask&e||n.mask===e)return!0}return!1},t}(),me=function(){function t(){}return t.IsWindowObjectExist=function(){return typeof window!="undefined"},t.IsNavigatorAvailable=function(){return typeof navigator!="undefined"},t.IsDocumentAvailable=function(){return typeof document!="undefined"},t.GetDOMTextContent=function(e){for(var r="",i=e.firstChild;i;)i.nodeType===3&&(r+=i.textContent),i=i.nextSibling;return r},t}(),pt=function(){function t(){}return Object.defineProperty(t,"LastCreatedEngine",{get:function(){return this.Instances.length===0?null:this.Instances[this.Instances.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"LastCreatedScene",{get:function(){return this._LastCreatedScene},enumerable:!1,configurable:!0}),t.Instances=new Array,t._LastCreatedScene=null,t.UseFallbackTexture=!0,t.FallbackTexture="",t}(),we=function(){function t(){}return t.WarnImport=function(e){return e+" needs to be imported before as it contains a side-effect required by your code."},t}(),ce=function(){function t(){}return t._AddLogEntry=function(e){t._LogCache=e+t._LogCache,t.OnNewCacheEntry&&t.OnNewCacheEntry(e)},t._FormatMessage=function(e){var r=function(n){return n<10?"0"+n:""+n},i=new Date;return"["+r(i.getHours())+":"+r(i.getMinutes())+":"+r(i.getSeconds())+"]: "+e},t._LogDisabled=function(e){},t._LogEnabled=function(e){var r=t._FormatMessage(e);console.log("BJS - "+r);var i="<div style='color:white'>"+r+"</div><br>";t._AddLogEntry(i)},t._WarnDisabled=function(e){},t._WarnEnabled=function(e){var r=t._FormatMessage(e);console.warn("BJS - "+r);var i="<div style='color:orange'>"+r+"</div><br>";t._AddLogEntry(i)},t._ErrorDisabled=function(e){},t._ErrorEnabled=function(e){t.errorsCount++;var r=t._FormatMessage(e);console.error("BJS - "+r);var i="<div style='color:red'>"+r+"</div><br>";t._AddLogEntry(i)},Object.defineProperty(t,"LogCache",{get:function(){return t._LogCache},enumerable:!1,configurable:!0}),t.ClearLogCache=function(){t._LogCache="",t.errorsCount=0},Object.defineProperty(t,"LogLevels",{set:function(e){(e&t.MessageLogLevel)===t.MessageLogLevel?t.Log=t._LogEnabled:t.Log=t._LogDisabled,(e&t.WarningLogLevel)===t.WarningLogLevel?t.Warn=t._WarnEnabled:t.Warn=t._WarnDisabled,(e&t.ErrorLogLevel)===t.ErrorLogLevel?t.Error=t._ErrorEnabled:t.Error=t._ErrorDisabled},enumerable:!1,configurable:!0}),t.NoneLogLevel=0,t.MessageLogLevel=1,t.WarningLogLevel=2,t.ErrorLogLevel=4,t.AllLogLevel=7,t._LogCache="",t.errorsCount=0,t.Log=t._LogEnabled,t.Warn=t._WarnEnabled,t.Error=t._ErrorEnabled,t}(),br=function(){function t(){}return t.EndsWith=function(e,r){return e.indexOf(r,e.length-r.length)!==-1},t.StartsWith=function(e,r){return e?e.indexOf(r)===0:!1},t.Decode=function(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);for(var r="",i=0;i<e.byteLength;i++)r+=String.fromCharCode(e[i]);return r},t.EncodeArrayBufferToBase64=function(e){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",n,s,a,o,l,u,c,_=0,d=ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e);_<d.length;)n=d[_++],s=_<d.length?d[_++]:Number.NaN,a=_<d.length?d[_++]:Number.NaN,o=n>>2,l=(n&3)<<4|s>>4,u=(s&15)<<2|a>>6,c=a&63,isNaN(s)?u=c=64:isNaN(a)&&(c=64),i+=r.charAt(o)+r.charAt(l)+r.charAt(u)+r.charAt(c);return i},t.PadNumber=function(e,r){for(var i=String(e);i.length<r;)i="0"+i;return i},t}(),xt=function(){function t(){this.children=[]}return t.prototype.isValid=function(e){return!0},t.prototype.process=function(e,r){var i="";if(this.line){var n=this.line,s=r.processor;if(s){if(s.lineProcessor&&(n=s.lineProcessor(n,r.isFragment)),s.attributeProcessor&&br.StartsWith(this.line,"attribute"))n=s.attributeProcessor(this.line);else if(s.varyingProcessor&&br.StartsWith(this.line,"varying"))n=s.varyingProcessor(this.line,r.isFragment);else if((s.uniformProcessor||s.uniformBufferProcessor)&&br.StartsWith(this.line,"uniform")){var a=/uniform (.+) (.+)/;a.test(this.line)?s.uniformProcessor&&(n=s.uniformProcessor(this.line,r.isFragment)):s.uniformBufferProcessor&&(n=s.uniformBufferProcessor(this.line,r.isFragment),r.lookForClosingBracketForUniformBuffer=!0)}s.endOfUniformBufferProcessor&&r.lookForClosingBracketForUniformBuffer&&this.line.indexOf("}")!==-1&&(r.lookForClosingBracketForUniformBuffer=!1,n=s.endOfUniformBufferProcessor(this.line,r.isFragment))}i+=n+`\r
`}return this.children.forEach(function(o){i+=o.process(e,r)}),this.additionalDefineKey&&(e[this.additionalDefineKey]=this.additionalDefineValue||"true"),i},t}(),Bo=function(){function t(){}return Object.defineProperty(t.prototype,"currentLine",{get:function(){return this._lines[this.lineIndex]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canRead",{get:function(){return this.lineIndex<this._lines.length-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lines",{set:function(e){this._lines=[];for(var r=0,i=e;r<i.length;r++){var n=i[r];if(n[0]==="#"){this._lines.push(n);continue}for(var s=n.split(";"),a=0;a<s.length;a++){var o=s[a];o=o.trim(),!!o&&this._lines.push(o+(a!==s.length-1?";":""))}}},enumerable:!1,configurable:!0}),t}(),Tr=function(t){Ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.process=function(r,i){for(var n=0;n<this.children.length;n++){var s=this.children[n];if(s.isValid(r))return s.process(r,i)}return""},e}(xt),Mo=function(t){Ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.isValid=function(r){return this.testExpression.isTrue(r)},e}(xt),Mt=function(){function t(){}return t.prototype.isTrue=function(e){return!0},t.postfixToInfix=function(e){for(var r=[],i=0,n=e;i<n.length;i++){var s=n[i];if(t._OperatorPriority[s]===void 0)r.push(s);else{var a=r[r.length-1],o=r[r.length-2];r.length-=2,r.push("("+o+s+a+")")}}return r[r.length-1]},t.infixToPostfix=function(e){for(var r=[],i=-1,n=function(){u=u.trim(),u!==""&&(r.push(u),u="")},s=function(d){i<t._Stack.length-1&&(t._Stack[++i]=d)},a=function(){return t._Stack[i]},o=function(){return i===-1?"!!INVALID EXPRESSION!!":t._Stack[i--]},l=0,u="";l<e.length;){var c=e.charAt(l),_=l<e.length-1?e.substr(l,2):"";if(c==="(")u="",s(c);else if(c===")"){for(n();i!==-1&&a()!=="(";)r.push(o());o()}else if(t._OperatorPriority[_]>1){for(n();i!==-1&&t._OperatorPriority[a()]>=t._OperatorPriority[_];)r.push(o());s(_),l++}else u+=c;l++}for(n();i!==-1;)a()==="("?o():r.push(o());return r},t._OperatorPriority={")":0,"(":1,"||":2,"&&":3},t._Stack=["","","","","","","","","","","","","","","","","","","",""],t}(),Wt=function(t){Ke(e,t);function e(r,i){i===void 0&&(i=!1);var n=t.call(this)||this;return n.define=r,n.not=i,n}return e.prototype.isTrue=function(r){var i=r[this.define]!==void 0;return this.not&&(i=!i),i},e}(Mt),Uo=function(t){Ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.isTrue=function(r){return this.leftOperand.isTrue(r)||this.rightOperand.isTrue(r)},e}(Mt),No=function(t){Ke(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.isTrue=function(r){return this.leftOperand.isTrue(r)&&this.rightOperand.isTrue(r)},e}(Mt),ko=function(t){Ke(e,t);function e(r,i,n){var s=t.call(this)||this;return s.define=r,s.operand=i,s.testValue=n,s}return e.prototype.isTrue=function(r){var i=r[this.define];i===void 0&&(i=this.define);var n=!1,s=parseInt(i),a=parseInt(this.testValue);switch(this.operand){case">":n=s>a;break;case"<":n=s<a;break;case"<=":n=s<=a;break;case">=":n=s>=a;break;case"==":n=s===a;break}return n},e}(Mt),Go=/defined\s*?\((.+?)\)/g,yr=/defined\s*?\[(.+?)\]/g,qi=function(){function t(){}return t.Process=function(e,r,i,n){var s=this;this._ProcessIncludes(e,r,function(a){var o=s._ProcessShaderConversion(a,r,n);i(o)})},t._ProcessPrecision=function(e,r){var i=r.shouldUseHighPrecisionShader;return e.indexOf("precision highp float")===-1?i?e=`precision highp float;
`+e:e=`precision mediump float;
`+e:i||(e=e.replace("precision highp float","precision mediump float")),e},t._ExtractOperation=function(e){var r=/defined\((.+)\)/,i=r.exec(e);if(i&&i.length)return new Wt(i[1].trim(),e[0]==="!");for(var n=["==",">=","<=","<",">"],s="",a=0,o=0,l=n;o<l.length&&(s=l[o],a=e.indexOf(s),!(a>-1));o++);if(a===-1)return new Wt(e);var u=e.substring(0,a).trim(),c=e.substring(a+s.length).trim();return new ko(u,s,c)},t._BuildSubExpression=function(e){e=e.replace(Go,"defined[$1]");for(var r=Mt.infixToPostfix(e),i=[],n=0,s=r;n<s.length;n++){var a=s[n];if(a!=="||"&&a!=="&&")i.push(a);else if(i.length>=2){var o=i[i.length-1],l=i[i.length-2];i.length-=2;var u=a=="&&"?new No:new Uo;typeof o=="string"&&(o=o.replace(yr,"defined($1)")),typeof l=="string"&&(l=l.replace(yr,"defined($1)")),u.leftOperand=typeof l=="string"?this._ExtractOperation(l):l,u.rightOperand=typeof o=="string"?this._ExtractOperation(o):o,i.push(u)}}var c=i[i.length-1];return typeof c=="string"&&(c=c.replace(yr,"defined($1)")),typeof c=="string"?this._ExtractOperation(c):c},t._BuildExpression=function(e,r){var i=new Mo,n=e.substring(0,r),s=e.substring(r);return s=s.substring(0,(s.indexOf("//")+1||s.length+1)-1).trim(),n==="#ifdef"?i.testExpression=new Wt(s):n==="#ifndef"?i.testExpression=new Wt(s,!0):i.testExpression=this._BuildSubExpression(s),i},t._MoveCursorWithinIf=function(e,r,i){for(var n=e.currentLine;this._MoveCursor(e,i);){n=e.currentLine;var s=n.substring(0,5).toLowerCase();if(s==="#else"){var a=new xt;r.children.push(a),this._MoveCursor(e,a);return}else if(s==="#elif"){var o=this._BuildExpression(n,5);r.children.push(o),i=o}}},t._MoveCursor=function(e,r){for(;e.canRead;){e.lineIndex++;var i=e.currentLine,n=/(#ifdef)|(#else)|(#elif)|(#endif)|(#ifndef)|(#if)/,s=n.exec(i);if(s&&s.length){var a=s[0];switch(a){case"#ifdef":{var o=new Tr;r.children.push(o);var l=this._BuildExpression(i,6);o.children.push(l),this._MoveCursorWithinIf(e,o,l);break}case"#else":case"#elif":return!0;case"#endif":return!1;case"#ifndef":{var o=new Tr;r.children.push(o);var l=this._BuildExpression(i,7);o.children.push(l),this._MoveCursorWithinIf(e,o,l);break}case"#if":{var o=new Tr,l=this._BuildExpression(i,3);r.children.push(o),o.children.push(l),this._MoveCursorWithinIf(e,o,l);break}}}else{var u=new xt;if(u.line=i,r.children.push(u),i[0]==="#"&&i[1]==="d"){var c=i.replace(";","").split(" ");u.additionalDefineKey=c[1],c.length===3&&(u.additionalDefineValue=c[2])}}}return!1},t._EvaluatePreProcessors=function(e,r,i){var n=new xt,s=new Bo;return s.lineIndex=-1,s.lines=e.split(`
`),this._MoveCursor(s,n),n.process(r,i)},t._PreparePreProcessors=function(e){for(var r=e.defines,i={},n=0,s=r;n<s.length;n++){var a=s[n],o=a.replace("#define","").replace(";","").trim(),l=o.split(" ");i[l[0]]=l.length>1?l[1]:""}return i.GL_ES="true",i.__VERSION__=e.version,i[e.platformName]="true",i},t._ProcessShaderConversion=function(e,r,i){var n=this._ProcessPrecision(e,r);if(!r.processor)return n;if(n.indexOf("#version 3")!==-1)return n.replace("#version 300 es","");var s=r.defines,a=this._PreparePreProcessors(r);return r.processor.preProcessor&&(n=r.processor.preProcessor(n,s,r.isFragment)),n=this._EvaluatePreProcessors(n,a,r),r.processor.postProcessor&&(n=r.processor.postProcessor(n,s,r.isFragment,i)),n},t._ProcessIncludes=function(e,r,i){for(var n=this,s=/#include<(.+)>(\((.*)\))*(\[(.*)\])*/g,a=s.exec(e),o=new String(e),l=!1;a!=null;){var u=a[1];if(u.indexOf("__decl__")!==-1&&(u=u.replace(/__decl__/,""),r.supportsUniformBuffers&&(u=u.replace(/Vertex/,"Ubo"),u=u.replace(/Fragment/,"Ubo")),u=u+"Declaration"),r.includesShadersStore[u]){var c=r.includesShadersStore[u];if(a[2])for(var _=a[3].split(","),d=0;d<_.length;d+=2){var v=new RegExp(_[d],"g"),b=_[d+1];c=c.replace(v,b)}if(a[4]){var L=a[5];if(L.indexOf("..")!==-1){var F=L.split(".."),w=parseInt(F[0]),P=parseInt(F[1]),U=c.slice(0);c="",isNaN(P)&&(P=r.indexParameters[F[1]]);for(var k=w;k<P;k++)r.supportsUniformBuffers||(U=U.replace(/light\{X\}.(\w*)/g,function(ee,B){return B+"{X}"})),c+=U.replace(/\{X\}/g,k.toString())+`
`}else r.supportsUniformBuffers||(c=c.replace(/light\{X\}.(\w*)/g,function(ee,B){return B+"{X}"})),c=c.replace(/\{X\}/g,L)}o=o.replace(a[0],c),l=l||c.indexOf("#include<")>=0}else{var q=r.shadersRepository+"ShadersInclude/"+u+".fx";t._FileToolsLoadFile(q,function(ee){r.includesShadersStore[u]=ee,n._ProcessIncludes(o,r,i)});return}a=s.exec(e)}l?this._ProcessIncludes(o.toString(),r,i):i(o)},t._FileToolsLoadFile=function(e,r,i,n,s,a){throw we.WarnImport("FileTools")},t}(),Rt=function(){function t(e,r,i,n,s,a,o,l,u,c){var _=this;n===void 0&&(n=null),a===void 0&&(a=null),o===void 0&&(o=null),l===void 0&&(l=null),u===void 0&&(u=null);var d;this.name=null,this.defines="",this.onCompiled=null,this.onError=null,this.onBind=null,this.uniqueId=0,this.onCompileObservable=new he,this.onErrorObservable=new he,this._onBindObservable=null,this._wasPreviouslyReady=!1,this._bonesComputationForcedToCPU=!1,this._multiTarget=!1,this._uniformBuffersNames={},this._samplers={},this._isReady=!1,this._compilationError="",this._allFallbacksProcessed=!1,this._uniforms={},this._key="",this._fallbacks=null,this._vertexSourceCode="",this._fragmentSourceCode="",this._vertexSourceCodeOverride="",this._fragmentSourceCodeOverride="",this._transformFeedbackVaryings=null,this._rawVertexSourceCode="",this._rawFragmentSourceCode="",this._pipelineContext=null,this._valueCache={},this.name=e;var v=null;if(r.attributes){var b=r;if(this._engine=i,this._attributesNames=b.attributes,this._uniformsNames=b.uniformsNames.concat(b.samplers),this._samplerList=b.samplers.slice(),this.defines=b.defines,this.onError=b.onError,this.onCompiled=b.onCompiled,this._fallbacks=b.fallbacks,this._indexParameters=b.indexParameters,this._transformFeedbackVaryings=b.transformFeedbackVaryings||null,this._multiTarget=!!b.multiTarget,b.uniformBuffersNames){this._uniformBuffersNamesList=b.uniformBuffersNames.slice();for(var L=0;L<b.uniformBuffersNames.length;L++)this._uniformBuffersNames[b.uniformBuffersNames[L]]=L}v=(d=b.processFinalCode)!==null&&d!==void 0?d:null}else this._engine=s,this.defines=a==null?"":a,this._uniformsNames=i.concat(n),this._samplerList=n?n.slice():[],this._attributesNames=r,this._uniformBuffersNamesList=[],this.onError=u,this.onCompiled=l,this._indexParameters=c,this._fallbacks=o;this._attributeLocationByName={},this.uniqueId=t._uniqueIdSeed++;var F,w,P=me.IsWindowObjectExist()?this._engine.getHostDocument():null;e.vertexSource?F="source:"+e.vertexSource:e.vertexElement?(F=P?P.getElementById(e.vertexElement):null,F||(F=e.vertexElement)):F=e.vertex||e,e.fragmentSource?w="source:"+e.fragmentSource:e.fragmentElement?(w=P?P.getElementById(e.fragmentElement):null,w||(w=e.fragmentElement)):w=e.fragment||e;var U={defines:this.defines.split(`
`),indexParameters:this._indexParameters,isFragment:!1,shouldUseHighPrecisionShader:this._engine._shouldUseHighPrecisionShader,processor:this._engine._shaderProcessor,supportsUniformBuffers:this._engine.supportsUniformBuffers,shadersRepository:t.ShadersRepository,includesShadersStore:t.IncludesShadersStore,version:(this._engine.webGLVersion*100).toString(),platformName:this._engine.webGLVersion>=2?"WEBGL2":"WEBGL1"};this._loadShader(F,"Vertex","",function(k){_._rawVertexSourceCode=k,_._loadShader(w,"Fragment","Pixel",function(q){_._rawFragmentSourceCode=q,qi.Process(k,U,function(ee){v&&(ee=v("vertex",ee)),U.isFragment=!0,qi.Process(q,U,function(B){v&&(B=v("fragment",B)),_._useFinalCode(ee,B,e)},_._engine)},_._engine)})})}return Object.defineProperty(t.prototype,"onBindObservable",{get:function(){return this._onBindObservable||(this._onBindObservable=new he),this._onBindObservable},enumerable:!1,configurable:!0}),t.prototype._useFinalCode=function(e,r,i){if(i){var n=i.vertexElement||i.vertex||i.spectorName||i,s=i.fragmentElement||i.fragment||i.spectorName||i;this._vertexSourceCode="#define SHADER_NAME vertex:"+n+`
`+e,this._fragmentSourceCode="#define SHADER_NAME fragment:"+s+`
`+r}else this._vertexSourceCode=e,this._fragmentSourceCode=r;this._prepareEffect()},Object.defineProperty(t.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),t.prototype.isReady=function(){try{return this._isReadyInternal()}catch{return!1}},t.prototype._isReadyInternal=function(){return this._isReady?!0:this._pipelineContext?this._pipelineContext.isReady:!1},t.prototype.getEngine=function(){return this._engine},t.prototype.getPipelineContext=function(){return this._pipelineContext},t.prototype.getAttributesNames=function(){return this._attributesNames},t.prototype.getAttributeLocation=function(e){return this._attributes[e]},t.prototype.getAttributeLocationByName=function(e){return this._attributeLocationByName[e]},t.prototype.getAttributesCount=function(){return this._attributes.length},t.prototype.getUniformIndex=function(e){return this._uniformsNames.indexOf(e)},t.prototype.getUniform=function(e){return this._uniforms[e]},t.prototype.getSamplers=function(){return this._samplerList},t.prototype.getUniformNames=function(){return this._uniformsNames},t.prototype.getUniformBuffersNames=function(){return this._uniformBuffersNamesList},t.prototype.getIndexParameters=function(){return this._indexParameters},t.prototype.getCompilationError=function(){return this._compilationError},t.prototype.allFallbacksProcessed=function(){return this._allFallbacksProcessed},t.prototype.executeWhenCompiled=function(e){var r=this;if(this.isReady()){e(this);return}this.onCompileObservable.add(function(i){e(i)}),(!this._pipelineContext||this._pipelineContext.isAsync)&&setTimeout(function(){r._checkIsReady(null)},16)},t.prototype._checkIsReady=function(e){var r=this;try{if(this._isReadyInternal())return}catch(i){this._processCompilationErrors(i,e);return}setTimeout(function(){r._checkIsReady(e)},16)},t.prototype._loadShader=function(e,r,i,n){if(typeof HTMLElement!="undefined"&&e instanceof HTMLElement){var s=me.GetDOMTextContent(e);n(s);return}if(e.substr(0,7)==="source:"){n(e.substr(7));return}if(e.substr(0,7)==="base64:"){var a=window.atob(e.substr(7));n(a);return}if(t.ShadersStore[e+r+"Shader"]){n(t.ShadersStore[e+r+"Shader"]);return}if(i&&t.ShadersStore[e+i+"Shader"]){n(t.ShadersStore[e+i+"Shader"]);return}var o;e[0]==="."||e[0]==="/"||e.indexOf("http")>-1?o=e:o=t.ShadersRepository+e,this._engine._loadFile(o+"."+r.toLowerCase()+".fx",n)},Object.defineProperty(t.prototype,"vertexSourceCode",{get:function(){return this._vertexSourceCodeOverride&&this._fragmentSourceCodeOverride?this._vertexSourceCodeOverride:this._vertexSourceCode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fragmentSourceCode",{get:function(){return this._vertexSourceCodeOverride&&this._fragmentSourceCodeOverride?this._fragmentSourceCodeOverride:this._fragmentSourceCode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rawVertexSourceCode",{get:function(){return this._rawVertexSourceCode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rawFragmentSourceCode",{get:function(){return this._rawFragmentSourceCode},enumerable:!1,configurable:!0}),t.prototype._rebuildProgram=function(e,r,i,n){var s=this;this._isReady=!1,this._vertexSourceCodeOverride=e,this._fragmentSourceCodeOverride=r,this.onError=function(a,o){n&&n(o)},this.onCompiled=function(){var a=s.getEngine().scenes;if(a)for(var o=0;o<a.length;o++)a[o].markAllMaterialsAsDirty(63);s._pipelineContext._handlesSpectorRebuildCallback(i)},this._fallbacks=null,this._prepareEffect()},t.prototype._prepareEffect=function(){var e=this,r=this._attributesNames,i=this.defines;this._valueCache={};var n=this._pipelineContext;try{var s=this._engine;this._pipelineContext=s.createPipelineContext();var a=this._rebuildProgram.bind(this);this._vertexSourceCodeOverride&&this._fragmentSourceCodeOverride?s._preparePipelineContext(this._pipelineContext,this._vertexSourceCodeOverride,this._fragmentSourceCodeOverride,!0,a,null,this._transformFeedbackVaryings):s._preparePipelineContext(this._pipelineContext,this._vertexSourceCode,this._fragmentSourceCode,!1,a,i,this._transformFeedbackVaryings),s._executeWhenRenderingStateIsCompiled(this._pipelineContext,function(){if(s.supportsUniformBuffers)for(var o in e._uniformBuffersNames)e.bindUniformBlock(o,e._uniformBuffersNames[o]);var l=s.getUniforms(e._pipelineContext,e._uniformsNames);if(l.forEach(function(v,b){e._uniforms[e._uniformsNames[b]]=v}),e._attributes=s.getAttributes(e._pipelineContext,r),r)for(var u=0;u<r.length;u++){var c=r[u];e._attributeLocationByName[c]=e._attributes[u]}var _;for(_=0;_<e._samplerList.length;_++){var d=e.getUniform(e._samplerList[_]);d==null&&(e._samplerList.splice(_,1),_--)}e._samplerList.forEach(function(v,b){e._samplers[v]=b}),s.bindSamplers(e),e._compilationError="",e._isReady=!0,e.onCompiled&&e.onCompiled(e),e.onCompileObservable.notifyObservers(e),e.onCompileObservable.clear(),e._fallbacks&&e._fallbacks.unBindMesh(),n&&e.getEngine()._deletePipelineContext(n)}),this._pipelineContext.isAsync&&this._checkIsReady(n)}catch(o){this._processCompilationErrors(o,n)}},t.prototype._getShaderCodeAndErrorLine=function(e,r,i){var n=i?/FRAGMENT SHADER ERROR: 0:(\d+?):/:/VERTEX SHADER ERROR: 0:(\d+?):/,s=null;if(r&&e){var a=r.match(n);if(a&&a.length===2){var o=parseInt(a[1]),l=e.split(`
`,-1);l.length>=o&&(s="Offending line ["+o+"] in "+(i?"fragment":"vertex")+" code: "+l[o-1])}}return[e,s]},t.prototype._processCompilationErrors=function(e,r){var i,n,s,a,o;r===void 0&&(r=null),this._compilationError=e.message;var l=this._attributesNames,u=this._fallbacks;if(ce.Error("Unable to compile effect:"),ce.Error("Uniforms: "+this._uniformsNames.map(function(v){return" "+v})),ce.Error("Attributes: "+l.map(function(v){return" "+v})),ce.Error(`Defines:\r
`+this.defines),t.LogShaderCodeOnCompilationError){var c=null,_=null,d=null;((s=this._pipelineContext)===null||s===void 0?void 0:s._getVertexShaderCode())&&(i=this._getShaderCodeAndErrorLine(this._pipelineContext._getVertexShaderCode(),this._compilationError,!1),d=i[0],c=i[1],d&&(ce.Error("Vertex code:"),ce.Error(d))),((a=this._pipelineContext)===null||a===void 0?void 0:a._getFragmentShaderCode())&&(n=this._getShaderCodeAndErrorLine((o=this._pipelineContext)===null||o===void 0?void 0:o._getFragmentShaderCode(),this._compilationError,!0),d=n[0],_=n[1],d&&(ce.Error("Fragment code:"),ce.Error(d))),c&&ce.Error(c),_&&ce.Error(_)}ce.Error("Error: "+this._compilationError),r&&(this._pipelineContext=r,this._isReady=!0,this.onError&&this.onError(this,this._compilationError),this.onErrorObservable.notifyObservers(this)),u?(this._pipelineContext=null,u.hasMoreFallbacks?(this._allFallbacksProcessed=!1,ce.Error("Trying next fallback."),this.defines=u.reduce(this.defines,this),this._prepareEffect()):(this._allFallbacksProcessed=!0,this.onError&&this.onError(this,this._compilationError),this.onErrorObservable.notifyObservers(this),this.onErrorObservable.clear(),this._fallbacks&&this._fallbacks.unBindMesh())):this._allFallbacksProcessed=!0},Object.defineProperty(t.prototype,"isSupported",{get:function(){return this._compilationError===""},enumerable:!1,configurable:!0}),t.prototype._bindTexture=function(e,r){this._engine._bindTexture(this._samplers[e],r)},t.prototype.setTexture=function(e,r){this._engine.setTexture(this._samplers[e],this._uniforms[e],r)},t.prototype.setDepthStencilTexture=function(e,r){this._engine.setDepthStencilTexture(this._samplers[e],this._uniforms[e],r)},t.prototype.setTextureArray=function(e,r){var i=e+"Ex";if(this._samplerList.indexOf(i+"0")===-1){for(var n=this._samplerList.indexOf(e),s=1;s<r.length;s++){var a=i+(s-1).toString();this._samplerList.splice(n+s,0,a)}for(var o=0,l=0,u=this._samplerList;l<u.length;l++){var c=u[l];this._samplers[c]=o,o+=1}}this._engine.setTextureArray(this._samplers[e],this._uniforms[e],r)},t.prototype.setTextureFromPostProcess=function(e,r){this._engine.setTextureFromPostProcess(this._samplers[e],r)},t.prototype.setTextureFromPostProcessOutput=function(e,r){this._engine.setTextureFromPostProcessOutput(this._samplers[e],r)},t.prototype._cacheMatrix=function(e,r){var i=this._valueCache[e],n=r.updateFlag;return i!==void 0&&i===n?!1:(this._valueCache[e]=n,!0)},t.prototype._cacheFloat2=function(e,r,i){var n=this._valueCache[e];if(!n||n.length!==2)return n=[r,i],this._valueCache[e]=n,!0;var s=!1;return n[0]!==r&&(n[0]=r,s=!0),n[1]!==i&&(n[1]=i,s=!0),s},t.prototype._cacheFloat3=function(e,r,i,n){var s=this._valueCache[e];if(!s||s.length!==3)return s=[r,i,n],this._valueCache[e]=s,!0;var a=!1;return s[0]!==r&&(s[0]=r,a=!0),s[1]!==i&&(s[1]=i,a=!0),s[2]!==n&&(s[2]=n,a=!0),a},t.prototype._cacheFloat4=function(e,r,i,n,s){var a=this._valueCache[e];if(!a||a.length!==4)return a=[r,i,n,s],this._valueCache[e]=a,!0;var o=!1;return a[0]!==r&&(a[0]=r,o=!0),a[1]!==i&&(a[1]=i,o=!0),a[2]!==n&&(a[2]=n,o=!0),a[3]!==s&&(a[3]=s,o=!0),o},t.prototype.bindUniformBuffer=function(e,r){var i=this._uniformBuffersNames[r];i===void 0||t._baseCache[i]===e||(t._baseCache[i]=e,this._engine.bindUniformBufferBase(e,i))},t.prototype.bindUniformBlock=function(e,r){this._engine.bindUniformBlock(this._pipelineContext,e,r)},t.prototype.setInt=function(e,r){var i=this._valueCache[e];return i!==void 0&&i===r?this:(this._engine.setInt(this._uniforms[e],r)&&(this._valueCache[e]=r),this)},t.prototype.setIntArray=function(e,r){return this._valueCache[e]=null,this._engine.setIntArray(this._uniforms[e],r),this},t.prototype.setIntArray2=function(e,r){return this._valueCache[e]=null,this._engine.setIntArray2(this._uniforms[e],r),this},t.prototype.setIntArray3=function(e,r){return this._valueCache[e]=null,this._engine.setIntArray3(this._uniforms[e],r),this},t.prototype.setIntArray4=function(e,r){return this._valueCache[e]=null,this._engine.setIntArray4(this._uniforms[e],r),this},t.prototype.setFloatArray=function(e,r){return this._valueCache[e]=null,this._engine.setArray(this._uniforms[e],r),this},t.prototype.setFloatArray2=function(e,r){return this._valueCache[e]=null,this._engine.setArray2(this._uniforms[e],r),this},t.prototype.setFloatArray3=function(e,r){return this._valueCache[e]=null,this._engine.setArray3(this._uniforms[e],r),this},t.prototype.setFloatArray4=function(e,r){return this._valueCache[e]=null,this._engine.setArray4(this._uniforms[e],r),this},t.prototype.setArray=function(e,r){return this._valueCache[e]=null,this._engine.setArray(this._uniforms[e],r),this},t.prototype.setArray2=function(e,r){return this._valueCache[e]=null,this._engine.setArray2(this._uniforms[e],r),this},t.prototype.setArray3=function(e,r){return this._valueCache[e]=null,this._engine.setArray3(this._uniforms[e],r),this},t.prototype.setArray4=function(e,r){return this._valueCache[e]=null,this._engine.setArray4(this._uniforms[e],r),this},t.prototype.setMatrices=function(e,r){return r?(this._valueCache[e]=null,this._engine.setMatrices(this._uniforms[e],r),this):this},t.prototype.setMatrix=function(e,r){return this._cacheMatrix(e,r)&&(this._engine.setMatrices(this._uniforms[e],r.toArray())||(this._valueCache[e]=null)),this},t.prototype.setMatrix3x3=function(e,r){return this._valueCache[e]=null,this._engine.setMatrix3x3(this._uniforms[e],r),this},t.prototype.setMatrix2x2=function(e,r){return this._valueCache[e]=null,this._engine.setMatrix2x2(this._uniforms[e],r),this},t.prototype.setFloat=function(e,r){var i=this._valueCache[e];return i!==void 0&&i===r?this:(this._engine.setFloat(this._uniforms[e],r)&&(this._valueCache[e]=r),this)},t.prototype.setBool=function(e,r){var i=this._valueCache[e];return i!==void 0&&i===r?this:(this._engine.setInt(this._uniforms[e],r?1:0)&&(this._valueCache[e]=r),this)},t.prototype.setVector2=function(e,r){return this._cacheFloat2(e,r.x,r.y)&&(this._engine.setFloat2(this._uniforms[e],r.x,r.y)||(this._valueCache[e]=null)),this},t.prototype.setFloat2=function(e,r,i){return this._cacheFloat2(e,r,i)&&(this._engine.setFloat2(this._uniforms[e],r,i)||(this._valueCache[e]=null)),this},t.prototype.setVector3=function(e,r){return this._cacheFloat3(e,r.x,r.y,r.z)&&(this._engine.setFloat3(this._uniforms[e],r.x,r.y,r.z)||(this._valueCache[e]=null)),this},t.prototype.setFloat3=function(e,r,i,n){return this._cacheFloat3(e,r,i,n)&&(this._engine.setFloat3(this._uniforms[e],r,i,n)||(this._valueCache[e]=null)),this},t.prototype.setVector4=function(e,r){return this._cacheFloat4(e,r.x,r.y,r.z,r.w)&&(this._engine.setFloat4(this._uniforms[e],r.x,r.y,r.z,r.w)||(this._valueCache[e]=null)),this},t.prototype.setFloat4=function(e,r,i,n,s){return this._cacheFloat4(e,r,i,n,s)&&(this._engine.setFloat4(this._uniforms[e],r,i,n,s)||(this._valueCache[e]=null)),this},t.prototype.setColor3=function(e,r){return this._cacheFloat3(e,r.r,r.g,r.b)&&(this._engine.setFloat3(this._uniforms[e],r.r,r.g,r.b)||(this._valueCache[e]=null)),this},t.prototype.setColor4=function(e,r,i){return this._cacheFloat4(e,r.r,r.g,r.b,i)&&(this._engine.setFloat4(this._uniforms[e],r.r,r.g,r.b,i)||(this._valueCache[e]=null)),this},t.prototype.setDirectColor4=function(e,r){return this._cacheFloat4(e,r.r,r.g,r.b,r.a)&&(this._engine.setFloat4(this._uniforms[e],r.r,r.g,r.b,r.a)||(this._valueCache[e]=null)),this},t.prototype.dispose=function(){this._engine._releaseEffect(this)},t.RegisterShader=function(e,r,i){r&&(t.ShadersStore[e+"PixelShader"]=r),i&&(t.ShadersStore[e+"VertexShader"]=i)},t.ResetCache=function(){t._baseCache={}},t.ShadersRepository="src/Shaders/",t.LogShaderCodeOnCompilationError=!0,t._uniqueIdSeed=0,t._baseCache={},t.ShadersStore={},t.IncludesShadersStore={},t}(),Vo=function(){function t(){this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,this.reset()}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zOffset",{get:function(){return this._zOffset},set:function(e){this._zOffset!==e&&(this._zOffset=e,this._isZOffsetDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullFace",{get:function(){return this._cullFace},set:function(e){this._cullFace!==e&&(this._cullFace=e,this._isCullFaceDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cull",{get:function(){return this._cull},set:function(e){this._cull!==e&&(this._cull=e,this._isCullDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthFunc",{get:function(){return this._depthFunc},set:function(e){this._depthFunc!==e&&(this._depthFunc=e,this._isDepthFuncDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return this._depthMask},set:function(e){this._depthMask!==e&&(this._depthMask=e,this._isDepthMaskDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return this._depthTest},set:function(e){this._depthTest!==e&&(this._depthTest=e,this._isDepthTestDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frontFace",{get:function(){return this._frontFace},set:function(e){this._frontFace!==e&&(this._frontFace=e,this._isFrontFaceDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1},t.prototype.apply=function(e){!this.isDirty||(this._isCullDirty&&(this.cull?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(e.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(e.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(e.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset?(e.enable(e.POLYGON_OFFSET_FILL),e.polygonOffset(this.zOffset,0)):e.disable(e.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(e.frontFace(this.frontFace),this._isFrontFaceDirty=!1))},t}(),Xo=function(){function t(){this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.reset()}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilFunc",{get:function(){return this._stencilFunc},set:function(e){this._stencilFunc!==e&&(this._stencilFunc=e,this._isStencilFuncDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilFuncRef",{get:function(){return this._stencilFuncRef},set:function(e){this._stencilFuncRef!==e&&(this._stencilFuncRef=e,this._isStencilFuncDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilFuncMask",{get:function(){return this._stencilFuncMask},set:function(e){this._stencilFuncMask!==e&&(this._stencilFuncMask=e,this._isStencilFuncDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilOpStencilFail",{get:function(){return this._stencilOpStencilFail},set:function(e){this._stencilOpStencilFail!==e&&(this._stencilOpStencilFail=e,this._isStencilOpDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilOpDepthFail",{get:function(){return this._stencilOpDepthFail},set:function(e){this._stencilOpDepthFail!==e&&(this._stencilOpDepthFail=e,this._isStencilOpDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilOpStencilDepthPass",{get:function(){return this._stencilOpStencilDepthPass},set:function(e){this._stencilOpStencilDepthPass!==e&&(this._stencilOpStencilDepthPass=e,this._isStencilOpDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilMask",{get:function(){return this._stencilMask},set:function(e){this._stencilMask!==e&&(this._stencilMask=e,this._isStencilMaskDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilTest",{get:function(){return this._stencilTest},set:function(e){this._stencilTest!==e&&(this._stencilTest=e,this._isStencilTestDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._stencilTest=!1,this._stencilMask=255,this._stencilFunc=t.ALWAYS,this._stencilFuncRef=1,this._stencilFuncMask=255,this._stencilOpStencilFail=t.KEEP,this._stencilOpDepthFail=t.KEEP,this._stencilOpStencilDepthPass=t.REPLACE,this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0},t.prototype.apply=function(e){!this.isDirty||(this._isStencilTestDirty&&(this.stencilTest?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(e.stencilMask(this.stencilMask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(e.stencilFunc(this.stencilFunc,this.stencilFuncRef,this.stencilFuncMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(e.stencilOp(this.stencilOpStencilFail,this.stencilOpDepthFail,this.stencilOpStencilDepthPass),this._isStencilOpDirty=!1))},t.ALWAYS=519,t.KEEP=7680,t.REPLACE=7681,t}(),Wo=function(){function t(){this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this.reset()}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alphaBlend",{get:function(){return this._alphaBlend},set:function(e){this._alphaBlend!==e&&(this._alphaBlend=e,this._isAlphaBlendDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.setAlphaBlendConstants=function(e,r,i,n){this._blendConstants[0]===e&&this._blendConstants[1]===r&&this._blendConstants[2]===i&&this._blendConstants[3]===n||(this._blendConstants[0]=e,this._blendConstants[1]=r,this._blendConstants[2]=i,this._blendConstants[3]=n,this._isBlendConstantsDirty=!0)},t.prototype.setAlphaBlendFunctionParameters=function(e,r,i,n){this._blendFunctionParameters[0]===e&&this._blendFunctionParameters[1]===r&&this._blendFunctionParameters[2]===i&&this._blendFunctionParameters[3]===n||(this._blendFunctionParameters[0]=e,this._blendFunctionParameters[1]=r,this._blendFunctionParameters[2]=i,this._blendFunctionParameters[3]=n,this._isBlendFunctionParametersDirty=!0)},t.prototype.setAlphaEquationParameters=function(e,r){this._blendEquationParameters[0]===e&&this._blendEquationParameters[1]===r||(this._blendEquationParameters[0]=e,this._blendEquationParameters[1]=r,this._isBlendEquationParametersDirty=!0)},t.prototype.reset=function(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1},t.prototype.apply=function(e){!this.isDirty||(this._isAlphaBlendDirty&&(this._alphaBlend?e.enable(e.BLEND):e.disable(e.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(e.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(e.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(e.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))},t}(),Ho=function(){function t(){}return t}(),oe;(function(t){t[t.Unknown=0]="Unknown",t[t.Url=1]="Url",t[t.Temp=2]="Temp",t[t.Raw=3]="Raw",t[t.Dynamic=4]="Dynamic",t[t.RenderTarget=5]="RenderTarget",t[t.MultiRenderTarget=6]="MultiRenderTarget",t[t.Cube=7]="Cube",t[t.CubeRaw=8]="CubeRaw",t[t.CubePrefiltered=9]="CubePrefiltered",t[t.Raw3D=10]="Raw3D",t[t.Raw2DArray=11]="Raw2DArray",t[t.Depth=12]="Depth",t[t.CubeRawRGBD=13]="CubeRawRGBD"})(oe||(oe={}));var zi=function(){function t(e,r,i){i===void 0&&(i=!1),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.samplingMode=-1,this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new he,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=oe.Unknown,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._framebuffer=null,this._depthStencilBuffer=null,this._MSAAFramebuffer=null,this._MSAARenderBuffer=null,this._attachments=null,this._textureArray=null,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._isDisabled=!1,this._compression=null,this._generateStencilBuffer=!1,this._generateDepthBuffer=!1,this._comparisonFunction=0,this._sphericalPolynomial=null,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._colorTextureArray=null,this._depthStencilTextureArray=null,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._webGLTexture=null,this._references=1,this._gammaSpace=null,this._engine=e,this._source=r,i||(this._webGLTexture=e._createTexture())}return t.prototype.getEngine=function(){return this._engine},Object.defineProperty(t.prototype,"source",{get:function(){return this._source},enumerable:!1,configurable:!0}),t.prototype.incrementReferences=function(){this._references++},t.prototype.updateSize=function(e,r,i){i===void 0&&(i=1),this.width=e,this.height=r,this.depth=i,this.baseWidth=e,this.baseHeight=r,this.baseDepth=i,this._size=e*r*i},t.prototype._rebuild=function(){var e=this,r,i;switch(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedAnisotropicFilteringLevel=null,this.source){case oe.Temp:return;case oe.Url:i=this._engine.createTexture((r=this._originalUrl)!==null&&r!==void 0?r:this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,function(){i._swapAndDie(e),e.isReady=!0},null,this._buffer,void 0,this.format);return;case oe.Raw:i=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),i._swapAndDie(this),this.isReady=!0;return;case oe.Raw3D:i=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),i._swapAndDie(this),this.isReady=!0;return;case oe.Raw2DArray:i=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),i._swapAndDie(this),this.isReady=!0;return;case oe.Dynamic:i=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),i._swapAndDie(this),this._engine.updateDynamicTexture(this,this._engine.getRenderingCanvas(),this.invertY,void 0,void 0,!0);return;case oe.RenderTarget:var n=new Ho;if(n.generateDepthBuffer=this._generateDepthBuffer,n.generateMipMaps=this.generateMipMaps,n.generateStencilBuffer=this._generateStencilBuffer,n.samplingMode=this.samplingMode,n.type=this.type,this.isCube)i=this._engine.createRenderTargetCubeTexture(this.width,n);else{var s={width:this.width,height:this.height,layers:this.is2DArray?this.depth:void 0};i=this._engine.createRenderTargetTexture(s,n)}i._swapAndDie(this),this.isReady=!0;return;case oe.Depth:var a={bilinearFiltering:this.samplingMode!==2,comparisonFunction:this._comparisonFunction,generateStencil:this._generateStencilBuffer,isCube:this.isCube},o={width:this.width,height:this.height,layers:this.is2DArray?this.depth:void 0};i=this._engine.createDepthStencilTexture(o,a),i._swapAndDie(this),this.isReady=!0;return;case oe.Cube:i=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,function(){i._swapAndDie(e),e.isReady=!0},null,this.format,this._extension);return;case oe.CubeRaw:i=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),i._swapAndDie(this),this.isReady=!0;return;case oe.CubeRawRGBD:i=this._engine.createRawCubeTexture(null,this.width,this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),t._UpdateRGBDAsync(i,this._bufferViewArrayArray,this._sphericalPolynomial,this._lodGenerationScale,this._lodGenerationOffset).then(function(){i._swapAndDie(e),e.isReady=!0});return;case oe.CubePrefiltered:i=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,function(l){l&&l._swapAndDie(e),e.isReady=!0},null,this.format,this._extension),i._sphericalPolynomial=this._sphericalPolynomial;return}},t.prototype._swapAndDie=function(e){e._webGLTexture=this._webGLTexture,e._isRGBD=this._isRGBD,this._framebuffer&&(e._framebuffer=this._framebuffer),this._depthStencilBuffer&&(e._depthStencilBuffer=this._depthStencilBuffer),e._depthStencilTexture=this._depthStencilTexture,this._lodTextureHigh&&(e._lodTextureHigh&&e._lodTextureHigh.dispose(),e._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(e._lodTextureMid&&e._lodTextureMid.dispose(),e._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(e._lodTextureLow&&e._lodTextureLow.dispose(),e._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(e._irradianceTexture&&e._irradianceTexture.dispose(),e._irradianceTexture=this._irradianceTexture);var r=this._engine.getLoadedTexturesCache(),i=r.indexOf(this);i!==-1&&r.splice(i,1);var i=r.indexOf(e);i===-1&&r.push(e)},t.prototype.dispose=function(){!this._webGLTexture||(this._references--,this._references===0&&(this._engine._releaseTexture(this),this._webGLTexture=null))},t._UpdateRGBDAsync=function(e,r,i,n,s){throw we.WarnImport("environmentTextureTools")},t}(),jo=function(){function t(){}return t.prototype.postProcessor=function(e,r,i,n){if(!n.getCaps().drawBuffersExtension){var s=/#extension.+GL_EXT_draw_buffers.+(enable|require)/g;e=e.replace(s,"")}return e},t}(),Yo=function(){function t(){}return t.prototype.attributeProcessor=function(e){return e.replace("attribute","in")},t.prototype.varyingProcessor=function(e,r){return e.replace("varying",r?"in":"out")},t.prototype.postProcessor=function(e,r,i){var n=e.search(/#extension.+GL_EXT_draw_buffers.+require/)!==-1,s=/#extension.+(GL_OVR_multiview2|GL_OES_standard_derivatives|GL_EXT_shader_texture_lod|GL_EXT_frag_depth|GL_EXT_draw_buffers).+(enable|require)/g;if(e=e.replace(s,""),e=e.replace(/texture2D\s*\(/g,"texture("),i)e=e.replace(/texture2DLodEXT\s*\(/g,"textureLod("),e=e.replace(/textureCubeLodEXT\s*\(/g,"textureLod("),e=e.replace(/textureCube\s*\(/g,"texture("),e=e.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),e=e.replace(/gl_FragColor/g,"glFragColor"),e=e.replace(/gl_FragData/g,"glFragData"),e=e.replace(/void\s+?main\s*\(/g,(n?"":`out vec4 glFragColor;
`)+"void main(");else{var a=r.indexOf("#define MULTIVIEW")!==-1;if(a)return`#extension GL_OVR_multiview2 : require
layout (num_views = 2) in;
`+e}return e},t}(),qo=function(){function t(){this.references=0,this.capacity=0,this.is32Bits=!1}return Object.defineProperty(t.prototype,"underlyingResource",{get:function(){return null},enumerable:!1,configurable:!0}),t}(),Vr=function(t){Ke(e,t);function e(r){var i=t.call(this)||this;return i._buffer=r,i}return Object.defineProperty(e.prototype,"underlyingResource",{get:function(){return this._buffer},enumerable:!1,configurable:!0}),e}(qo),zo=function(){function t(){this.vertexCompilationError=null,this.fragmentCompilationError=null,this.programLinkError=null,this.programValidationError=null}return Object.defineProperty(t.prototype,"isAsync",{get:function(){return this.isParallelCompiled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReady",{get:function(){return this.program?this.isParallelCompiled?this.engine._isRenderingStateCompiled(this):!0:!1},enumerable:!1,configurable:!0}),t.prototype._handlesSpectorRebuildCallback=function(e){e&&this.program&&e(this.program)},t.prototype._getVertexShaderCode=function(){return this.vertexShader?this.engine._getShaderSource(this.vertexShader):null},t.prototype._getFragmentShaderCode=function(){return this.fragmentShader?this.engine._getShaderSource(this.fragmentShader):null},t}(),vr=function(){function t(){}return t.CreateCanvas=function(e,r){if(typeof document=="undefined")return new OffscreenCanvas(e,r);var i=document.createElement("canvas");return i.width=e,i.height=r,i},t}(),Ko=function(){function t(){}return t.SetMatrixPrecision=function(e){if(t.MatrixTrackPrecisionChange=!1,e&&!t.MatrixUse64Bits&&t.MatrixTrackedMatrices)for(var r=0;r<t.MatrixTrackedMatrices.length;++r){var i=t.MatrixTrackedMatrices[r],n=i._m;i._m=new Array(16);for(var s=0;s<16;++s)i._m[s]=n[s]}t.MatrixUse64Bits=e,t.MatrixCurrentType=t.MatrixUse64Bits?Array:Float32Array,t.MatrixTrackedMatrices=null},t.MatrixUse64Bits=!1,t.MatrixTrackPrecisionChange=!0,t.MatrixCurrentType=Float32Array,t.MatrixTrackedMatrices=[],t}(),$o=function(){function t(){}return t}(),Se=function(){function t(e,r,i,n){var s=this;n===void 0&&(n=!1),this.forcePOTTextures=!1,this.isFullscreen=!1,this.cullBackFaces=!0,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this.validateShaderPrograms=!1,this.useReverseDepthBuffer=!1,this.disableUniformBuffers=!1,this._uniformBuffers=new Array,this._webGLVersion=1,this._windowIsBackground=!1,this._highPrecisionShadersAllowed=!0,this._badOS=!1,this._badDesktopOS=!1,this._renderingQueueLaunched=!1,this._activeRenderLoops=new Array,this.onContextLostObservable=new he,this.onContextRestoredObservable=new he,this._contextWasLost=!1,this._doNotHandleContextLost=!1,this.disableVertexArrayObjects=!1,this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new Vo,this._stencilState=new Xo,this._alphaState=new Wo,this._alphaMode=1,this._alphaEquation=0,this._internalTexturesCache=new Array,this._activeChannel=0,this._currentTextureChannel=-1,this._boundTexturesCache={},this._compiledEffects={},this._vertexAttribArraysEnabled=[],this._uintIndicesCurrentlySet=!1,this._currentBoundBuffer=new Array,this._currentFramebuffer=null,this._dummyFramebuffer=null,this._currentBufferPointers=new Array,this._currentInstanceLocations=new Array,this._currentInstanceBuffers=new Array,this._vaoRecordInProgress=!1,this._mustWipeVertexAttributes=!1,this._nextFreeTextureSlots=new Array,this._maxSimultaneousTextures=0,this._activeRequests=new Array,this._transformTextureUrl=null,this.hostInformation={isMobile:!1},this.premultipliedAlpha=!0,this.onBeforeTextureInitObservable=new he,this._viewportCached={x:0,y:0,z:0,w:0},this._unpackFlipYCached=null,this.enableUnpackFlipYCached=!0,this._getDepthStencilBuffer=function(te,ie,S,K,ae,j){var M=s._gl,G=M.createRenderbuffer();return M.bindRenderbuffer(M.RENDERBUFFER,G),S>1&&M.renderbufferStorageMultisample?M.renderbufferStorageMultisample(M.RENDERBUFFER,S,ae,te,ie):M.renderbufferStorage(M.RENDERBUFFER,K,te,ie),M.framebufferRenderbuffer(M.FRAMEBUFFER,j,M.RENDERBUFFER,G),M.bindRenderbuffer(M.RENDERBUFFER,null),G},this._boundUniforms={};var a=null;if(!!e){if(i=i||{},Ko.SetMatrixPrecision(!!i.useHighPrecisionMatrix),e.getContext){if(a=e,this._renderingCanvas=a,r!=null&&(i.antialias=r),i.deterministicLockstep===void 0&&(i.deterministicLockstep=!1),i.lockstepMaxSteps===void 0&&(i.lockstepMaxSteps=4),i.timeStep===void 0&&(i.timeStep=1/60),i.preserveDrawingBuffer===void 0&&(i.preserveDrawingBuffer=!1),i.audioEngine===void 0&&(i.audioEngine=!0),i.stencil===void 0&&(i.stencil=!0),i.premultipliedAlpha===!1&&(this.premultipliedAlpha=!1),i.xrCompatible===void 0&&(i.xrCompatible=!0),this._doNotHandleContextLost=!!i.doNotHandleContextLost,navigator&&navigator.userAgent){var o=navigator.userAgent;this.hostInformation.isMobile=o.indexOf("Mobile")!==-1;for(var l=0,u=t.ExceptionList;l<u.length;l++){var c=u[l],_=c.key,d=c.targets,v=new RegExp(_);if(v.test(o)){if(c.capture&&c.captureConstraint){var b=c.capture,L=c.captureConstraint,F=new RegExp(b),w=F.exec(o);if(w&&w.length>0){var P=parseInt(w[w.length-1]);if(P>=L)continue}}for(var U=0,k=d;U<k.length;U++){var q=k[U];switch(q){case"uniformBuffer":this.disableUniformBuffers=!0;break;case"vao":this.disableVertexArrayObjects=!0;break}}}}}if(this._doNotHandleContextLost||(this._onContextLost=function(te){te.preventDefault(),s._contextWasLost=!0,ce.Warn("WebGL context lost."),s.onContextLostObservable.notifyObservers(s)},this._onContextRestored=function(){setTimeout(function(){s._initGLContext(),s._rebuildEffects(),s._rebuildInternalTextures(),s._rebuildBuffers(),s.wipeCaches(!0),ce.Warn("WebGL context successfully restored."),s.onContextRestoredObservable.notifyObservers(s),s._contextWasLost=!1},0)},a.addEventListener("webglcontextlost",this._onContextLost,!1),a.addEventListener("webglcontextrestored",this._onContextRestored,!1),i.powerPreference="high-performance"),!i.disableWebGL2Support)try{this._gl=a.getContext("webgl2",i)||a.getContext("experimental-webgl2",i),this._gl&&(this._webGLVersion=2,this._gl.deleteQuery||(this._webGLVersion=1))}catch{}if(!this._gl){if(!a)throw new Error("The provided canvas is null or undefined.");try{this._gl=a.getContext("webgl",i)||a.getContext("experimental-webgl",i)}catch{throw new Error("WebGL not supported")}}if(!this._gl)throw new Error("WebGL not supported")}else{this._gl=e,this._renderingCanvas=this._gl.canvas,this._gl.renderbufferStorageMultisample&&(this._webGLVersion=2);var ee=this._gl.getContextAttributes();ee&&(i.stencil=ee.stencil)}this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL,this._gl.NONE),i.useHighPrecisionFloats!==void 0&&(this._highPrecisionShadersAllowed=i.useHighPrecisionFloats);var B=me.IsWindowObjectExist()&&window.devicePixelRatio||1,Q=i.limitDeviceRatio||B;this._hardwareScalingLevel=n?1/Math.min(Q,B):1,this.resize(),this._isStencilEnable=!!i.stencil,this._initGLContext();for(var H=0;H<this._caps.maxVertexAttribs;H++)this._currentBufferPointers[H]=new $o;this.webGLVersion>1?this._shaderProcessor=new Yo:this._shaderProcessor=new jo,this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this._creationOptions=i,console.log("Babylon.js v"+t.Version+" - "+this.description)}}return Object.defineProperty(t,"NpmPackage",{get:function(){return"babylonjs@4.2.1"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"Version",{get:function(){return"4.2.1"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){var e="WebGL"+this.webGLVersion;return this._caps.parallelShaderCompile&&(e+=" - Parallel shader compilation"),e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ShadersRepository",{get:function(){return Rt.ShadersRepository},set:function(e){Rt.ShadersRepository=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportsUniformBuffers",{get:function(){return this.webGLVersion>1&&!this.disableUniformBuffers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_shouldUseHighPrecisionShader",{get:function(){return!!(this._caps.highPrecisionShaderSupported&&this._highPrecisionShadersAllowed)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"needPOTTextures",{get:function(){return this._webGLVersion<2||this.forcePOTTextures},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doNotHandleContextLost",{get:function(){return this._doNotHandleContextLost},set:function(e){this._doNotHandleContextLost=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_supportsHardwareTextureRescaling",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"framebufferDimensionsObject",{set:function(e){this._framebufferDimensionsObject=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentViewport",{get:function(){return this._cachedViewport},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emptyTexture",{get:function(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emptyTexture3D",{get:function(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emptyTexture2DArray",{get:function(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emptyCubeTexture",{get:function(){if(!this._emptyCubeTexture){var e=new Uint8Array(4),r=[e,e,e,e,e,e];this._emptyCubeTexture=this.createRawCubeTexture(r,1,5,0,!1,!1,1)}return this._emptyCubeTexture},enumerable:!1,configurable:!0}),t.prototype._rebuildInternalTextures=function(){for(var e=this._internalTexturesCache.slice(),r=0,i=e;r<i.length;r++){var n=i[r];n._rebuild()}},t.prototype._rebuildEffects=function(){for(var e in this._compiledEffects){var r=this._compiledEffects[e];r._prepareEffect()}Rt.ResetCache()},t.prototype.areAllEffectsReady=function(){for(var e in this._compiledEffects){var r=this._compiledEffects[e];if(!r.isReady())return!1}return!0},t.prototype._rebuildBuffers=function(){for(var e=0,r=this._uniformBuffers;e<r.length;e++){var i=r[e];i._rebuild()}},t.prototype._initGLContext=function(){this._caps={maxTexturesImageUnits:this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS),maxCombinedTexturesImageUnits:this._gl.getParameter(this._gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),maxVertexTextureImageUnits:this._gl.getParameter(this._gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxTextureSize:this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE),maxSamples:this._webGLVersion>1?this._gl.getParameter(this._gl.MAX_SAMPLES):1,maxCubemapTextureSize:this._gl.getParameter(this._gl.MAX_CUBE_MAP_TEXTURE_SIZE),maxRenderTextureSize:this._gl.getParameter(this._gl.MAX_RENDERBUFFER_SIZE),maxVertexAttribs:this._gl.getParameter(this._gl.MAX_VERTEX_ATTRIBS),maxVaryingVectors:this._gl.getParameter(this._gl.MAX_VARYING_VECTORS),maxFragmentUniformVectors:this._gl.getParameter(this._gl.MAX_FRAGMENT_UNIFORM_VECTORS),maxVertexUniformVectors:this._gl.getParameter(this._gl.MAX_VERTEX_UNIFORM_VECTORS),parallelShaderCompile:this._gl.getExtension("KHR_parallel_shader_compile"),standardDerivatives:this._webGLVersion>1||this._gl.getExtension("OES_standard_derivatives")!==null,maxAnisotropy:1,astc:this._gl.getExtension("WEBGL_compressed_texture_astc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_astc"),bptc:this._gl.getExtension("EXT_texture_compression_bptc")||this._gl.getExtension("WEBKIT_EXT_texture_compression_bptc"),s3tc:this._gl.getExtension("WEBGL_compressed_texture_s3tc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"),pvrtc:this._gl.getExtension("WEBGL_compressed_texture_pvrtc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:this._gl.getExtension("WEBGL_compressed_texture_etc1")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_etc1"),etc2:this._gl.getExtension("WEBGL_compressed_texture_etc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_etc")||this._gl.getExtension("WEBGL_compressed_texture_es3_0"),textureAnisotropicFilterExtension:this._gl.getExtension("EXT_texture_filter_anisotropic")||this._gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this._gl.getExtension("MOZ_EXT_texture_filter_anisotropic"),uintIndices:this._webGLVersion>1||this._gl.getExtension("OES_element_index_uint")!==null,fragmentDepthSupported:this._webGLVersion>1||this._gl.getExtension("EXT_frag_depth")!==null,highPrecisionShaderSupported:!1,timerQuery:this._gl.getExtension("EXT_disjoint_timer_query_webgl2")||this._gl.getExtension("EXT_disjoint_timer_query"),canUseTimestampForTimerQuery:!1,drawBuffersExtension:!1,maxMSAASamples:1,colorBufferFloat:this._webGLVersion>1&&this._gl.getExtension("EXT_color_buffer_float"),textureFloat:!!(this._webGLVersion>1||this._gl.getExtension("OES_texture_float")),textureHalfFloat:!!(this._webGLVersion>1||this._gl.getExtension("OES_texture_half_float")),textureHalfFloatRender:!1,textureFloatLinearFiltering:!1,textureFloatRender:!1,textureHalfFloatLinearFiltering:!1,vertexArrayObject:!1,instancedArrays:!1,textureLOD:!!(this._webGLVersion>1||this._gl.getExtension("EXT_shader_texture_lod")),blendMinMax:!1,multiview:this._gl.getExtension("OVR_multiview2"),oculusMultiview:this._gl.getExtension("OCULUS_multiview"),depthTextureExtension:!1},this._glVersion=this._gl.getParameter(this._gl.VERSION);var e=this._gl.getExtension("WEBGL_debug_renderer_info");if(e!=null&&(this._glRenderer=this._gl.getParameter(e.UNMASKED_RENDERER_WEBGL),this._glVendor=this._gl.getParameter(e.UNMASKED_VENDOR_WEBGL)),this._glVendor||(this._glVendor="Unknown vendor"),this._glRenderer||(this._glRenderer="Unknown renderer"),this._gl.HALF_FLOAT_OES!==36193&&(this._gl.HALF_FLOAT_OES=36193),this._gl.RGBA16F!==34842&&(this._gl.RGBA16F=34842),this._gl.RGBA32F!==34836&&(this._gl.RGBA32F=34836),this._gl.DEPTH24_STENCIL8!==35056&&(this._gl.DEPTH24_STENCIL8=35056),this._caps.timerQuery&&(this._webGLVersion===1&&(this._gl.getQuery=this._caps.timerQuery.getQueryEXT.bind(this._caps.timerQuery)),this._caps.canUseTimestampForTimerQuery=this._gl.getQuery(this._caps.timerQuery.TIMESTAMP_EXT,this._caps.timerQuery.QUERY_COUNTER_BITS_EXT)>0),this._caps.maxAnisotropy=this._caps.textureAnisotropicFilterExtension?this._gl.getParameter(this._caps.textureAnisotropicFilterExtension.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,this._caps.textureFloatLinearFiltering=!!(this._caps.textureFloat&&this._gl.getExtension("OES_texture_float_linear")),this._caps.textureFloatRender=!!(this._caps.textureFloat&&this._canRenderToFloatFramebuffer()),this._caps.textureHalfFloatLinearFiltering=!!(this._webGLVersion>1||this._caps.textureHalfFloat&&this._gl.getExtension("OES_texture_half_float_linear")),this._webGLVersion>1&&this._gl.HALF_FLOAT_OES!==5131&&(this._gl.HALF_FLOAT_OES=5131),this._caps.textureHalfFloatRender=this._caps.textureHalfFloat&&this._canRenderToHalfFloatFramebuffer(),this._webGLVersion>1)this._caps.drawBuffersExtension=!0,this._caps.maxMSAASamples=this._gl.getParameter(this._gl.MAX_SAMPLES);else{var r=this._gl.getExtension("WEBGL_draw_buffers");if(r!==null){this._caps.drawBuffersExtension=!0,this._gl.drawBuffers=r.drawBuffersWEBGL.bind(r),this._gl.DRAW_FRAMEBUFFER=this._gl.FRAMEBUFFER;for(var i=0;i<16;i++)this._gl["COLOR_ATTACHMENT"+i+"_WEBGL"]=r["COLOR_ATTACHMENT"+i+"_WEBGL"]}}if(this._webGLVersion>1)this._caps.depthTextureExtension=!0;else{var n=this._gl.getExtension("WEBGL_depth_texture");n!=null&&(this._caps.depthTextureExtension=!0,this._gl.UNSIGNED_INT_24_8=n.UNSIGNED_INT_24_8_WEBGL)}if(this.disableVertexArrayObjects)this._caps.vertexArrayObject=!1;else if(this._webGLVersion>1)this._caps.vertexArrayObject=!0;else{var s=this._gl.getExtension("OES_vertex_array_object");s!=null&&(this._caps.vertexArrayObject=!0,this._gl.createVertexArray=s.createVertexArrayOES.bind(s),this._gl.bindVertexArray=s.bindVertexArrayOES.bind(s),this._gl.deleteVertexArray=s.deleteVertexArrayOES.bind(s))}if(this._webGLVersion>1)this._caps.instancedArrays=!0;else{var a=this._gl.getExtension("ANGLE_instanced_arrays");a!=null?(this._caps.instancedArrays=!0,this._gl.drawArraysInstanced=a.drawArraysInstancedANGLE.bind(a),this._gl.drawElementsInstanced=a.drawElementsInstancedANGLE.bind(a),this._gl.vertexAttribDivisor=a.vertexAttribDivisorANGLE.bind(a)):this._caps.instancedArrays=!1}if(this._gl.getShaderPrecisionFormat){var o=this._gl.getShaderPrecisionFormat(this._gl.VERTEX_SHADER,this._gl.HIGH_FLOAT),l=this._gl.getShaderPrecisionFormat(this._gl.FRAGMENT_SHADER,this._gl.HIGH_FLOAT);o&&l&&(this._caps.highPrecisionShaderSupported=o.precision!==0&&l.precision!==0)}if(this._webGLVersion>1)this._caps.blendMinMax=!0;else{var u=this._gl.getExtension("EXT_blend_minmax");u!=null&&(this._caps.blendMinMax=!0,this._gl.MAX=u.MAX_EXT,this._gl.MIN=u.MIN_EXT)}this._depthCullingState.depthTest=!0,this._depthCullingState.depthFunc=this._gl.LEQUAL,this._depthCullingState.depthMask=!0,this._maxSimultaneousTextures=this._caps.maxCombinedTexturesImageUnits;for(var c=0;c<this._maxSimultaneousTextures;c++)this._nextFreeTextureSlots.push(c)},Object.defineProperty(t.prototype,"webGLVersion",{get:function(){return this._webGLVersion},enumerable:!1,configurable:!0}),t.prototype.getClassName=function(){return"ThinEngine"},Object.defineProperty(t.prototype,"isStencilEnable",{get:function(){return this._isStencilEnable},enumerable:!1,configurable:!0}),t.prototype._prepareWorkingCanvas=function(){if(!this._workingCanvas){this._workingCanvas=vr.CreateCanvas(1,1);var e=this._workingCanvas.getContext("2d");e&&(this._workingContext=e)}},t.prototype.resetTextureCache=function(){for(var e in this._boundTexturesCache)!this._boundTexturesCache.hasOwnProperty(e)||(this._boundTexturesCache[e]=null);this._currentTextureChannel=-1},t.prototype.getGlInfo=function(){return{vendor:this._glVendor,renderer:this._glRenderer,version:this._glVersion}},t.prototype.setHardwareScalingLevel=function(e){this._hardwareScalingLevel=e,this.resize()},t.prototype.getHardwareScalingLevel=function(){return this._hardwareScalingLevel},t.prototype.getLoadedTexturesCache=function(){return this._internalTexturesCache},t.prototype.getCaps=function(){return this._caps},t.prototype.stopRenderLoop=function(e){if(!e){this._activeRenderLoops=[];return}var r=this._activeRenderLoops.indexOf(e);r>=0&&this._activeRenderLoops.splice(r,1)},t.prototype._renderLoop=function(){if(!this._contextWasLost){var e=!0;if(!this.renderEvenInBackground&&this._windowIsBackground&&(e=!1),e){this.beginFrame();for(var r=0;r<this._activeRenderLoops.length;r++){var i=this._activeRenderLoops[r];i()}this.endFrame()}}this._activeRenderLoops.length>0?this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()):this._renderingQueueLaunched=!1},t.prototype.getRenderingCanvas=function(){return this._renderingCanvas},t.prototype.getHostWindow=function(){return me.IsWindowObjectExist()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null},t.prototype.getRenderWidth=function(e){return e===void 0&&(e=!1),!e&&this._currentRenderTarget?this._currentRenderTarget.width:this._framebufferDimensionsObject?this._framebufferDimensionsObject.framebufferWidth:this._gl.drawingBufferWidth},t.prototype.getRenderHeight=function(e){return e===void 0&&(e=!1),!e&&this._currentRenderTarget?this._currentRenderTarget.height:this._framebufferDimensionsObject?this._framebufferDimensionsObject.framebufferHeight:this._gl.drawingBufferHeight},t.prototype._queueNewFrame=function(e,r){return t.QueueNewFrame(e,r)},t.prototype.runRenderLoop=function(e){this._activeRenderLoops.indexOf(e)===-1&&(this._activeRenderLoops.push(e),this._renderingQueueLaunched||(this._renderingQueueLaunched=!0,this._boundRenderFunction=this._renderLoop.bind(this),this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))},t.prototype.clear=function(e,r,i,n){n===void 0&&(n=!1),this.applyStates();var s=0;r&&e&&(this._gl.clearColor(e.r,e.g,e.b,e.a!==void 0?e.a:1),s|=this._gl.COLOR_BUFFER_BIT),i&&(this.useReverseDepthBuffer?(this._depthCullingState.depthFunc=this._gl.GREATER,this._gl.clearDepth(0)):this._gl.clearDepth(1),s|=this._gl.DEPTH_BUFFER_BIT),n&&(this._gl.clearStencil(0),s|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(s)},t.prototype._viewport=function(e,r,i,n){(e!==this._viewportCached.x||r!==this._viewportCached.y||i!==this._viewportCached.z||n!==this._viewportCached.w)&&(this._viewportCached.x=e,this._viewportCached.y=r,this._viewportCached.z=i,this._viewportCached.w=n,this._gl.viewport(e,r,i,n))},t.prototype.setViewport=function(e,r,i){var n=r||this.getRenderWidth(),s=i||this.getRenderHeight(),a=e.x||0,o=e.y||0;this._cachedViewport=e,this._viewport(a*n,o*s,n*e.width,s*e.height)},t.prototype.beginFrame=function(){},t.prototype.endFrame=function(){this._badOS&&this.flushFramebuffer()},t.prototype.resize=function(){var e,r;me.IsWindowObjectExist()?(e=this._renderingCanvas?this._renderingCanvas.clientWidth||this._renderingCanvas.width:window.innerWidth,r=this._renderingCanvas?this._renderingCanvas.clientHeight||this._renderingCanvas.height:window.innerHeight):(e=this._renderingCanvas?this._renderingCanvas.width:100,r=this._renderingCanvas?this._renderingCanvas.height:100),this.setSize(e/this._hardwareScalingLevel,r/this._hardwareScalingLevel)},t.prototype.setSize=function(e,r){return!this._renderingCanvas||(e=e|0,r=r|0,this._renderingCanvas.width===e&&this._renderingCanvas.height===r)?!1:(this._renderingCanvas.width=e,this._renderingCanvas.height=r,!0)},t.prototype.bindFramebuffer=function(e,r,i,n,s,a,o){r===void 0&&(r=0),a===void 0&&(a=0),o===void 0&&(o=0),this._currentRenderTarget&&this.unBindFramebuffer(this._currentRenderTarget),this._currentRenderTarget=e,this._bindUnboundFramebuffer(e._MSAAFramebuffer?e._MSAAFramebuffer:e._framebuffer);var l=this._gl;e.is2DArray?l.framebufferTextureLayer(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,e._webGLTexture,a,o):e.isCube&&l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_CUBE_MAP_POSITIVE_X+r,e._webGLTexture,a);var u=e._depthStencilTexture;if(u){var c=u._generateStencilBuffer?l.DEPTH_STENCIL_ATTACHMENT:l.DEPTH_ATTACHMENT;e.is2DArray?l.framebufferTextureLayer(l.FRAMEBUFFER,c,u._webGLTexture,a,o):e.isCube?l.framebufferTexture2D(l.FRAMEBUFFER,c,l.TEXTURE_CUBE_MAP_POSITIVE_X+r,u._webGLTexture,a):l.framebufferTexture2D(l.FRAMEBUFFER,c,l.TEXTURE_2D,u._webGLTexture,a)}this._cachedViewport&&!s?this.setViewport(this._cachedViewport,i,n):(i||(i=e.width,a&&(i=i/Math.pow(2,a))),n||(n=e.height,a&&(n=n/Math.pow(2,a))),this._viewport(0,0,i,n)),this.wipeCaches()},t.prototype._bindUnboundFramebuffer=function(e){this._currentFramebuffer!==e&&(this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,e),this._currentFramebuffer=e)},t.prototype.unBindFramebuffer=function(e,r,i){r===void 0&&(r=!1),this._currentRenderTarget=null;var n=this._gl;if(e._MSAAFramebuffer){if(e._textureArray){this.unBindMultiColorAttachmentFramebuffer(e._textureArray,r,i);return}n.bindFramebuffer(n.READ_FRAMEBUFFER,e._MSAAFramebuffer),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,e._framebuffer),n.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,n.COLOR_BUFFER_BIT,n.NEAREST)}e.generateMipMaps&&!r&&!e.isCube&&(this._bindTextureDirectly(n.TEXTURE_2D,e,!0),n.generateMipmap(n.TEXTURE_2D),this._bindTextureDirectly(n.TEXTURE_2D,null)),i&&(e._MSAAFramebuffer&&this._bindUnboundFramebuffer(e._framebuffer),i()),this._bindUnboundFramebuffer(null)},t.prototype.flushFramebuffer=function(){this._gl.flush()},t.prototype.restoreDefaultFramebuffer=function(){this._currentRenderTarget?this.unBindFramebuffer(this._currentRenderTarget):this._bindUnboundFramebuffer(null),this._cachedViewport&&this.setViewport(this._cachedViewport),this.wipeCaches()},t.prototype._resetVertexBufferBinding=function(){this.bindArrayBuffer(null),this._cachedVertexBuffers=null},t.prototype.createVertexBuffer=function(e){return this._createVertexBuffer(e,this._gl.STATIC_DRAW)},t.prototype._createVertexBuffer=function(e,r){var i=this._gl.createBuffer();if(!i)throw new Error("Unable to create vertex buffer");var n=new Vr(i);return this.bindArrayBuffer(n),e instanceof Array?this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(e),this._gl.STATIC_DRAW):this._gl.bufferData(this._gl.ARRAY_BUFFER,e,this._gl.STATIC_DRAW),this._resetVertexBufferBinding(),n.references=1,n},t.prototype.createDynamicVertexBuffer=function(e){return this._createVertexBuffer(e,this._gl.DYNAMIC_DRAW)},t.prototype._resetIndexBufferBinding=function(){this.bindIndexBuffer(null),this._cachedIndexBuffer=null},t.prototype.createIndexBuffer=function(e,r){var i=this._gl.createBuffer(),n=new Vr(i);if(!i)throw new Error("Unable to create index buffer");this.bindIndexBuffer(n);var s=this._normalizeIndexData(e);return this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,s,r?this._gl.DYNAMIC_DRAW:this._gl.STATIC_DRAW),this._resetIndexBufferBinding(),n.references=1,n.is32Bits=s.BYTES_PER_ELEMENT===4,n},t.prototype._normalizeIndexData=function(e){if(e instanceof Uint16Array)return e;if(this._caps.uintIndices){if(e instanceof Uint32Array)return e;for(var r=0;r<e.length;r++)if(e[r]>=65535)return new Uint32Array(e);return new Uint16Array(e)}return new Uint16Array(e)},t.prototype.bindArrayBuffer=function(e){this._vaoRecordInProgress||this._unbindVertexArrayObject(),this.bindBuffer(e,this._gl.ARRAY_BUFFER)},t.prototype.bindUniformBlock=function(e,r,i){var n=e.program,s=this._gl.getUniformBlockIndex(n,r);this._gl.uniformBlockBinding(n,s,i)},t.prototype.bindIndexBuffer=function(e){this._vaoRecordInProgress||this._unbindVertexArrayObject(),this.bindBuffer(e,this._gl.ELEMENT_ARRAY_BUFFER)},t.prototype.bindBuffer=function(e,r){(this._vaoRecordInProgress||this._currentBoundBuffer[r]!==e)&&(this._gl.bindBuffer(r,e?e.underlyingResource:null),this._currentBoundBuffer[r]=e)},t.prototype.updateArrayBuffer=function(e){this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,e)},t.prototype._vertexAttribPointer=function(e,r,i,n,s,a,o){var l=this._currentBufferPointers[r];if(!!l){var u=!1;l.active?(l.buffer!==e&&(l.buffer=e,u=!0),l.size!==i&&(l.size=i,u=!0),l.type!==n&&(l.type=n,u=!0),l.normalized!==s&&(l.normalized=s,u=!0),l.stride!==a&&(l.stride=a,u=!0),l.offset!==o&&(l.offset=o,u=!0)):(u=!0,l.active=!0,l.index=r,l.size=i,l.type=n,l.normalized=s,l.stride=a,l.offset=o,l.buffer=e),(u||this._vaoRecordInProgress)&&(this.bindArrayBuffer(e),this._gl.vertexAttribPointer(r,i,n,s,a,o))}},t.prototype._bindIndexBufferWithCache=function(e){e!=null&&this._cachedIndexBuffer!==e&&(this._cachedIndexBuffer=e,this.bindIndexBuffer(e),this._uintIndicesCurrentlySet=e.is32Bits)},t.prototype._bindVertexBuffersAttributes=function(e,r){var i=r.getAttributesNames();this._vaoRecordInProgress||this._unbindVertexArrayObject(),this.unbindAllAttributes();for(var n=0;n<i.length;n++){var s=r.getAttributeLocation(n);if(s>=0){var a=e[i[n]];if(!a)continue;this._gl.enableVertexAttribArray(s),this._vaoRecordInProgress||(this._vertexAttribArraysEnabled[s]=!0);var o=a.getBuffer();o&&(this._vertexAttribPointer(o,s,a.getSize(),a.type,a.normalized,a.byteStride,a.byteOffset),a.getIsInstanced()&&(this._gl.vertexAttribDivisor(s,a.getInstanceDivisor()),this._vaoRecordInProgress||(this._currentInstanceLocations.push(s),this._currentInstanceBuffers.push(o))))}}},t.prototype.recordVertexArrayObject=function(e,r,i){var n=this._gl.createVertexArray();return this._vaoRecordInProgress=!0,this._gl.bindVertexArray(n),this._mustWipeVertexAttributes=!0,this._bindVertexBuffersAttributes(e,i),this.bindIndexBuffer(r),this._vaoRecordInProgress=!1,this._gl.bindVertexArray(null),n},t.prototype.bindVertexArrayObject=function(e,r){this._cachedVertexArrayObject!==e&&(this._cachedVertexArrayObject=e,this._gl.bindVertexArray(e),this._cachedVertexBuffers=null,this._cachedIndexBuffer=null,this._uintIndicesCurrentlySet=r!=null&&r.is32Bits,this._mustWipeVertexAttributes=!0)},t.prototype.bindBuffersDirectly=function(e,r,i,n,s){if(this._cachedVertexBuffers!==e||this._cachedEffectForVertexBuffers!==s){this._cachedVertexBuffers=e,this._cachedEffectForVertexBuffers=s;var a=s.getAttributesCount();this._unbindVertexArrayObject(),this.unbindAllAttributes();for(var o=0,l=0;l<a;l++)if(l<i.length){var u=s.getAttributeLocation(l);u>=0&&(this._gl.enableVertexAttribArray(u),this._vertexAttribArraysEnabled[u]=!0,this._vertexAttribPointer(e,u,i[l],this._gl.FLOAT,!1,n,o)),o+=i[l]*4}}this._bindIndexBufferWithCache(r)},t.prototype._unbindVertexArrayObject=function(){!this._cachedVertexArrayObject||(this._cachedVertexArrayObject=null,this._gl.bindVertexArray(null))},t.prototype.bindBuffers=function(e,r,i){(this._cachedVertexBuffers!==e||this._cachedEffectForVertexBuffers!==i)&&(this._cachedVertexBuffers=e,this._cachedEffectForVertexBuffers=i,this._bindVertexBuffersAttributes(e,i)),this._bindIndexBufferWithCache(r)},t.prototype.unbindInstanceAttributes=function(){for(var e,r=0,i=this._currentInstanceLocations.length;r<i;r++){var n=this._currentInstanceBuffers[r];e!=n&&n.references&&(e=n,this.bindArrayBuffer(n));var s=this._currentInstanceLocations[r];this._gl.vertexAttribDivisor(s,0)}this._currentInstanceBuffers.length=0,this._currentInstanceLocations.length=0},t.prototype.releaseVertexArrayObject=function(e){this._gl.deleteVertexArray(e)},t.prototype._releaseBuffer=function(e){return e.references--,e.references===0?(this._deleteBuffer(e),!0):!1},t.prototype._deleteBuffer=function(e){this._gl.deleteBuffer(e.underlyingResource)},t.prototype.updateAndBindInstancesBuffer=function(e,r,i){if(this.bindArrayBuffer(e),r&&this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,r),i[0].index!==void 0)this.bindInstancesBuffer(e,i,!0);else for(var n=0;n<4;n++){var s=i[n];this._vertexAttribArraysEnabled[s]||(this._gl.enableVertexAttribArray(s),this._vertexAttribArraysEnabled[s]=!0),this._vertexAttribPointer(e,s,4,this._gl.FLOAT,!1,64,n*16),this._gl.vertexAttribDivisor(s,1),this._currentInstanceLocations.push(s),this._currentInstanceBuffers.push(e)}},t.prototype.bindInstancesBuffer=function(e,r,i){i===void 0&&(i=!0),this.bindArrayBuffer(e);var n=0;if(i)for(var s=0;s<r.length;s++){var a=r[s];n+=a.attributeSize*4}for(var s=0;s<r.length;s++){var a=r[s];a.index===void 0&&(a.index=this._currentEffect.getAttributeLocationByName(a.attributeName)),!(a.index<0)&&(this._vertexAttribArraysEnabled[a.index]||(this._gl.enableVertexAttribArray(a.index),this._vertexAttribArraysEnabled[a.index]=!0),this._vertexAttribPointer(e,a.index,a.attributeSize,a.attributeType||this._gl.FLOAT,a.normalized||!1,n,a.offset),this._gl.vertexAttribDivisor(a.index,a.divisor===void 0?1:a.divisor),this._currentInstanceLocations.push(a.index),this._currentInstanceBuffers.push(e))}},t.prototype.disableInstanceAttributeByName=function(e){if(!!this._currentEffect){var r=this._currentEffect.getAttributeLocationByName(e);this.disableInstanceAttribute(r)}},t.prototype.disableInstanceAttribute=function(e){for(var r=!1,i;(i=this._currentInstanceLocations.indexOf(e))!==-1;)this._currentInstanceLocations.splice(i,1),this._currentInstanceBuffers.splice(i,1),r=!0,i=this._currentInstanceLocations.indexOf(e);r&&(this._gl.vertexAttribDivisor(e,0),this.disableAttributeByIndex(e))},t.prototype.disableAttributeByIndex=function(e){this._gl.disableVertexAttribArray(e),this._vertexAttribArraysEnabled[e]=!1,this._currentBufferPointers[e].active=!1},t.prototype.draw=function(e,r,i,n){this.drawElementsType(e?0:1,r,i,n)},t.prototype.drawPointClouds=function(e,r,i){this.drawArraysType(2,e,r,i)},t.prototype.drawUnIndexed=function(e,r,i,n){this.drawArraysType(e?0:1,r,i,n)},t.prototype.drawElementsType=function(e,r,i,n){this.applyStates(),this._reportDrawCall();var s=this._drawMode(e),a=this._uintIndicesCurrentlySet?this._gl.UNSIGNED_INT:this._gl.UNSIGNED_SHORT,o=this._uintIndicesCurrentlySet?4:2;n?this._gl.drawElementsInstanced(s,i,a,r*o,n):this._gl.drawElements(s,i,a,r*o)},t.prototype.drawArraysType=function(e,r,i,n){this.applyStates(),this._reportDrawCall();var s=this._drawMode(e);n?this._gl.drawArraysInstanced(s,r,i,n):this._gl.drawArrays(s,r,i)},t.prototype._drawMode=function(e){switch(e){case 0:return this._gl.TRIANGLES;case 2:return this._gl.POINTS;case 1:return this._gl.LINES;case 3:return this._gl.POINTS;case 4:return this._gl.LINES;case 5:return this._gl.LINE_LOOP;case 6:return this._gl.LINE_STRIP;case 7:return this._gl.TRIANGLE_STRIP;case 8:return this._gl.TRIANGLE_FAN;default:return this._gl.TRIANGLES}},t.prototype._reportDrawCall=function(){},t.prototype._releaseEffect=function(e){this._compiledEffects[e._key]&&(delete this._compiledEffects[e._key],this._deletePipelineContext(e.getPipelineContext()))},t.prototype._deletePipelineContext=function(e){var r=e;r&&r.program&&(r.program.__SPECTOR_rebuildProgram=null,this._gl.deleteProgram(r.program))},t.prototype.createEffect=function(e,r,i,n,s,a,o,l,u){var c=e.vertexElement||e.vertex||e.vertexToken||e.vertexSource||e,_=e.fragmentElement||e.fragment||e.fragmentToken||e.fragmentSource||e,d=c+"+"+_+"@"+(s||r.defines);if(this._compiledEffects[d]){var v=this._compiledEffects[d];return o&&v.isReady()&&o(v),v}var b=new Rt(e,r,i,n,this,s,a,o,l,u);return b._key=d,this._compiledEffects[d]=b,b},t._ConcatenateShader=function(e,r,i){return i===void 0&&(i=""),i+(r?r+`
`:"")+e},t.prototype._compileShader=function(e,r,i,n){return this._compileRawShader(t._ConcatenateShader(e,i,n),r)},t.prototype._compileRawShader=function(e,r){var i=this._gl,n=i.createShader(r==="vertex"?i.VERTEX_SHADER:i.FRAGMENT_SHADER);if(!n)throw new Error("Something went wrong while compile the shader.");return i.shaderSource(n,e),i.compileShader(n),n},t.prototype._getShaderSource=function(e){return this._gl.getShaderSource(e)},t.prototype.createRawShaderProgram=function(e,r,i,n,s){s===void 0&&(s=null),n=n||this._gl;var a=this._compileRawShader(r,"vertex"),o=this._compileRawShader(i,"fragment");return this._createShaderProgram(e,a,o,n,s)},t.prototype.createShaderProgram=function(e,r,i,n,s,a){a===void 0&&(a=null),s=s||this._gl;var o=this._webGLVersion>1?`#version 300 es
#define WEBGL2 
`:"",l=this._compileShader(r,"vertex",n,o),u=this._compileShader(i,"fragment",n,o);return this._createShaderProgram(e,l,u,s,a)},t.prototype.createPipelineContext=function(){var e=new zo;return e.engine=this,this._caps.parallelShaderCompile&&(e.isParallelCompiled=!0),e},t.prototype._createShaderProgram=function(e,r,i,n,s){var a=n.createProgram();if(e.program=a,!a)throw new Error("Unable to create program");return n.attachShader(a,r),n.attachShader(a,i),n.linkProgram(a),e.context=n,e.vertexShader=r,e.fragmentShader=i,e.isParallelCompiled||this._finalizePipelineContext(e),a},t.prototype._finalizePipelineContext=function(e){var r=e.context,i=e.vertexShader,n=e.fragmentShader,s=e.program,a=r.getProgramParameter(s,r.LINK_STATUS);if(!a){if(!this._gl.getShaderParameter(i,this._gl.COMPILE_STATUS)){var o=this._gl.getShaderInfoLog(i);if(o)throw e.vertexCompilationError=o,new Error("VERTEX SHADER "+o)}if(!this._gl.getShaderParameter(n,this._gl.COMPILE_STATUS)){var o=this._gl.getShaderInfoLog(n);if(o)throw e.fragmentCompilationError=o,new Error("FRAGMENT SHADER "+o)}var l=r.getProgramInfoLog(s);if(l)throw e.programLinkError=l,new Error(l)}if(this.validateShaderPrograms){r.validateProgram(s);var u=r.getProgramParameter(s,r.VALIDATE_STATUS);if(!u){var l=r.getProgramInfoLog(s);if(l)throw e.programValidationError=l,new Error(l)}}r.deleteShader(i),r.deleteShader(n),e.vertexShader=void 0,e.fragmentShader=void 0,e.onCompiled&&(e.onCompiled(),e.onCompiled=void 0)},t.prototype._preparePipelineContext=function(e,r,i,n,s,a,o){var l=e;n?l.program=this.createRawShaderProgram(l,r,i,void 0,o):l.program=this.createShaderProgram(l,r,i,a,void 0,o),l.program.__SPECTOR_rebuildProgram=s},t.prototype._isRenderingStateCompiled=function(e){var r=e;return this._gl.getProgramParameter(r.program,this._caps.parallelShaderCompile.COMPLETION_STATUS_KHR)?(this._finalizePipelineContext(r),!0):!1},t.prototype._executeWhenRenderingStateIsCompiled=function(e,r){var i=e;if(!i.isParallelCompiled){r();return}var n=i.onCompiled;n?i.onCompiled=function(){n(),r()}:i.onCompiled=r},t.prototype.getUniforms=function(e,r){for(var i=new Array,n=e,s=0;s<r.length;s++)i.push(this._gl.getUniformLocation(n.program,r[s]));return i},t.prototype.getAttributes=function(e,r){for(var i=[],n=e,s=0;s<r.length;s++)try{i.push(this._gl.getAttribLocation(n.program,r[s]))}catch{i.push(-1)}return i},t.prototype.enableEffect=function(e){!e||e===this._currentEffect||(this.bindSamplers(e),this._currentEffect=e,e.onBind&&e.onBind(e),e._onBindObservable&&e._onBindObservable.notifyObservers(e))},t.prototype.setInt=function(e,r){return e?(this._gl.uniform1i(e,r),!0):!1},t.prototype.setIntArray=function(e,r){return e?(this._gl.uniform1iv(e,r),!0):!1},t.prototype.setIntArray2=function(e,r){return!e||r.length%2!==0?!1:(this._gl.uniform2iv(e,r),!0)},t.prototype.setIntArray3=function(e,r){return!e||r.length%3!==0?!1:(this._gl.uniform3iv(e,r),!0)},t.prototype.setIntArray4=function(e,r){return!e||r.length%4!==0?!1:(this._gl.uniform4iv(e,r),!0)},t.prototype.setArray=function(e,r){return e?(this._gl.uniform1fv(e,r),!0):!1},t.prototype.setArray2=function(e,r){return!e||r.length%2!==0?!1:(this._gl.uniform2fv(e,r),!0)},t.prototype.setArray3=function(e,r){return!e||r.length%3!==0?!1:(this._gl.uniform3fv(e,r),!0)},t.prototype.setArray4=function(e,r){return!e||r.length%4!==0?!1:(this._gl.uniform4fv(e,r),!0)},t.prototype.setMatrices=function(e,r){return e?(this._gl.uniformMatrix4fv(e,!1,r),!0):!1},t.prototype.setMatrix3x3=function(e,r){return e?(this._gl.uniformMatrix3fv(e,!1,r),!0):!1},t.prototype.setMatrix2x2=function(e,r){return e?(this._gl.uniformMatrix2fv(e,!1,r),!0):!1},t.prototype.setFloat=function(e,r){return e?(this._gl.uniform1f(e,r),!0):!1},t.prototype.setFloat2=function(e,r,i){return e?(this._gl.uniform2f(e,r,i),!0):!1},t.prototype.setFloat3=function(e,r,i,n){return e?(this._gl.uniform3f(e,r,i,n),!0):!1},t.prototype.setFloat4=function(e,r,i,n,s){return e?(this._gl.uniform4f(e,r,i,n,s),!0):!1},t.prototype.applyStates=function(){if(this._depthCullingState.apply(this._gl),this._stencilState.apply(this._gl),this._alphaState.apply(this._gl),this._colorWriteChanged){this._colorWriteChanged=!1;var e=this._colorWrite;this._gl.colorMask(e,e,e,e)}},t.prototype.setColorWrite=function(e){e!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=e)},t.prototype.getColorWrite=function(){return this._colorWrite},Object.defineProperty(t.prototype,"depthCullingState",{get:function(){return this._depthCullingState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alphaState",{get:function(){return this._alphaState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilState",{get:function(){return this._stencilState},enumerable:!1,configurable:!0}),t.prototype.clearInternalTexturesCache=function(){this._internalTexturesCache=[]},t.prototype.wipeCaches=function(e){this.preventCacheWipeBetweenFrames&&!e||(this._currentEffect=null,this._viewportCached.x=0,this._viewportCached.y=0,this._viewportCached.z=0,this._viewportCached.w=0,this._unbindVertexArrayObject(),e&&(this._currentProgram=null,this.resetTextureCache(),this._stencilState.reset(),this._depthCullingState.reset(),this._depthCullingState.depthFunc=this._gl.LEQUAL,this._alphaState.reset(),this._alphaMode=1,this._alphaEquation=0,this._colorWrite=!0,this._colorWriteChanged=!0,this._unpackFlipYCached=null,this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL,this._gl.NONE),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),this._mustWipeVertexAttributes=!0,this.unbindAllAttributes()),this._resetVertexBufferBinding(),this._cachedIndexBuffer=null,this._cachedEffectForVertexBuffers=null,this.bindIndexBuffer(null))},t.prototype._getSamplingParameters=function(e,r){var i=this._gl,n=i.NEAREST,s=i.NEAREST;switch(e){case 11:n=i.LINEAR,r?s=i.LINEAR_MIPMAP_NEAREST:s=i.LINEAR;break;case 3:n=i.LINEAR,r?s=i.LINEAR_MIPMAP_LINEAR:s=i.LINEAR;break;case 8:n=i.NEAREST,r?s=i.NEAREST_MIPMAP_LINEAR:s=i.NEAREST;break;case 4:n=i.NEAREST,r?s=i.NEAREST_MIPMAP_NEAREST:s=i.NEAREST;break;case 5:n=i.NEAREST,r?s=i.LINEAR_MIPMAP_NEAREST:s=i.LINEAR;break;case 6:n=i.NEAREST,r?s=i.LINEAR_MIPMAP_LINEAR:s=i.LINEAR;break;case 7:n=i.NEAREST,s=i.LINEAR;break;case 1:n=i.NEAREST,s=i.NEAREST;break;case 9:n=i.LINEAR,r?s=i.NEAREST_MIPMAP_NEAREST:s=i.NEAREST;break;case 10:n=i.LINEAR,r?s=i.NEAREST_MIPMAP_LINEAR:s=i.NEAREST;break;case 2:n=i.LINEAR,s=i.LINEAR;break;case 12:n=i.LINEAR,s=i.NEAREST;break}return{min:s,mag:n}},t.prototype._createTexture=function(){var e=this._gl.createTexture();if(!e)throw new Error("Unable to create texture");return e},t.prototype.createTexture=function(e,r,i,n,s,a,o,l,u,c,_,d,v){var b=this;s===void 0&&(s=3),a===void 0&&(a=null),o===void 0&&(o=null),l===void 0&&(l=null),u===void 0&&(u=null),c===void 0&&(c=null),_===void 0&&(_=null),e=e||"";var L=e.substr(0,5)==="data:",F=e.substr(0,5)==="blob:",w=L&&e.indexOf(";base64,")!==-1,P=u||new zi(this,oe.Url),U=e;this._transformTextureUrl&&!w&&!u&&!l&&(e=this._transformTextureUrl(e)),U!==e&&(P._originalUrl=U);var k=e.lastIndexOf("."),q=_||(k>-1?e.substring(k).toLowerCase():""),ee=null,B=q.indexOf("?");B>-1&&(q=q.split("?")[0]);for(var Q=0,H=t._TextureLoaders;Q<H.length;Q++){var te=H[Q];if(te.canLoad(q,d)){ee=te;break}}n&&n._addPendingData(P),P.url=e,P.generateMipMaps=!r,P.samplingMode=s,P.invertY=i,this._doNotHandleContextLost||(P._buffer=l);var ie=null;a&&!u&&(ie=P.onLoadedObservable.add(a)),u||this._internalTexturesCache.push(P);var S=function(j,M){n&&n._removePendingData(P),e===U?(ie&&P.onLoadedObservable.remove(ie),pt.UseFallbackTexture&&b.createTexture(pt.FallbackTexture,r,P.invertY,n,s,null,o,l,P),o&&o((j||"Unknown error")+(pt.UseFallbackTexture?" - Fallback texture was used":""),M)):(ce.Warn("Failed to load "+e+", falling back to "+U),b.createTexture(U,r,P.invertY,n,s,a,o,l,P,c,_,d,v))};if(ee){var K=function(j){ee.loadData(j,P,function(M,G,Y,Z,$e,_e){_e?S("TextureLoader failed to load data"):b._prepareWebGLTexture(P,n,M,G,P.invertY,!Y,Z,function(){return $e(),!1},s)},v)};l?l instanceof ArrayBuffer?K(new Uint8Array(l)):ArrayBuffer.isView(l)?K(l):o&&o("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(e,function(j){return K(new Uint8Array(j))},void 0,n?n.offlineProvider:void 0,!0,function(j,M){S("Unable to load "+(j&&j.responseURL,M))})}else{var ae=function(j){F&&!b._doNotHandleContextLost&&(P._buffer=j),b._prepareWebGLTexture(P,n,j.width,j.height,P.invertY,r,!1,function(M,G,Y){var Z=b._gl,$e=j.width===M&&j.height===G,_e=c?b._getInternalFormat(c):q===".jpg"?Z.RGB:Z.RGBA;if($e)return Z.texImage2D(Z.TEXTURE_2D,0,_e,_e,Z.UNSIGNED_BYTE,j),!1;var Be=b._caps.maxTextureSize;if(j.width>Be||j.height>Be||!b._supportsHardwareTextureRescaling)return b._prepareWorkingCanvas(),!b._workingCanvas||!b._workingContext||(b._workingCanvas.width=M,b._workingCanvas.height=G,b._workingContext.drawImage(j,0,0,j.width,j.height,0,0,M,G),Z.texImage2D(Z.TEXTURE_2D,0,_e,_e,Z.UNSIGNED_BYTE,b._workingCanvas),P.width=M,P.height=G),!1;var ye=new zi(b,oe.Temp);return b._bindTextureDirectly(Z.TEXTURE_2D,ye,!0),Z.texImage2D(Z.TEXTURE_2D,0,_e,_e,Z.UNSIGNED_BYTE,j),b._rescaleTexture(ye,P,n,_e,function(){b._releaseTexture(ye),b._bindTextureDirectly(Z.TEXTURE_2D,P,!0),Y()}),!0},s)};!L||w?l&&(l.decoding||l.close)?ae(l):t._FileToolsLoadImage(e,ae,S,n?n.offlineProvider:null,d):typeof l=="string"||l instanceof ArrayBuffer||ArrayBuffer.isView(l)||l instanceof Blob?t._FileToolsLoadImage(l,ae,S,n?n.offlineProvider:null,d):l&&ae(l)}return P},t._FileToolsLoadImage=function(e,r,i,n,s){throw we.WarnImport("FileTools")},t.prototype._rescaleTexture=function(e,r,i,n,s){},t.prototype.createRawTexture=function(e,r,i,n,s,a,o,l,u){throw we.WarnImport("Engine.RawTexture")},t.prototype.createRawCubeTexture=function(e,r,i,n,s,a,o,l){throw we.WarnImport("Engine.RawTexture")},t.prototype.createRawTexture3D=function(e,r,i,n,s,a,o,l,u,c){throw we.WarnImport("Engine.RawTexture")},t.prototype.createRawTexture2DArray=function(e,r,i,n,s,a,o,l,u,c){throw we.WarnImport("Engine.RawTexture")},t.prototype._unpackFlipY=function(e){this._unpackFlipYCached!==e&&(this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,e?1:0),this.enableUnpackFlipYCached&&(this._unpackFlipYCached=e))},t.prototype._getUnpackAlignement=function(){return this._gl.getParameter(this._gl.UNPACK_ALIGNMENT)},t.prototype._getTextureTarget=function(e){return e.isCube?this._gl.TEXTURE_CUBE_MAP:e.is3D?this._gl.TEXTURE_3D:e.is2DArray||e.isMultiview?this._gl.TEXTURE_2D_ARRAY:this._gl.TEXTURE_2D},t.prototype.updateTextureSamplingMode=function(e,r,i){i===void 0&&(i=!1);var n=this._getTextureTarget(r),s=this._getSamplingParameters(e,r.generateMipMaps||i);this._setTextureParameterInteger(n,this._gl.TEXTURE_MAG_FILTER,s.mag,r),this._setTextureParameterInteger(n,this._gl.TEXTURE_MIN_FILTER,s.min),i&&(r.generateMipMaps=!0,this._gl.generateMipmap(n)),this._bindTextureDirectly(n,null),r.samplingMode=e},t.prototype.updateTextureWrappingMode=function(e,r,i,n){i===void 0&&(i=null),n===void 0&&(n=null);var s=this._getTextureTarget(e);r!==null&&(this._setTextureParameterInteger(s,this._gl.TEXTURE_WRAP_S,this._getTextureWrapMode(r),e),e._cachedWrapU=r),i!==null&&(this._setTextureParameterInteger(s,this._gl.TEXTURE_WRAP_T,this._getTextureWrapMode(i),e),e._cachedWrapV=i),(e.is2DArray||e.is3D)&&n!==null&&(this._setTextureParameterInteger(s,this._gl.TEXTURE_WRAP_R,this._getTextureWrapMode(n),e),e._cachedWrapR=n),this._bindTextureDirectly(s,null)},t.prototype._setupDepthStencilTexture=function(e,r,i,n,s){var a=r.width||r,o=r.height||r,l=r.layers||0;e.baseWidth=a,e.baseHeight=o,e.width=a,e.height=o,e.is2DArray=l>0,e.depth=l,e.isReady=!0,e.samples=1,e.generateMipMaps=!1,e._generateDepthBuffer=!0,e._generateStencilBuffer=i,e.samplingMode=n?2:1,e.type=0,e._comparisonFunction=s;var u=this._gl,c=this._getTextureTarget(e),_=this._getSamplingParameters(e.samplingMode,!1);u.texParameteri(c,u.TEXTURE_MAG_FILTER,_.mag),u.texParameteri(c,u.TEXTURE_MIN_FILTER,_.min),u.texParameteri(c,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(c,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),s===0?(u.texParameteri(c,u.TEXTURE_COMPARE_FUNC,515),u.texParameteri(c,u.TEXTURE_COMPARE_MODE,u.NONE)):(u.texParameteri(c,u.TEXTURE_COMPARE_FUNC,s),u.texParameteri(c,u.TEXTURE_COMPARE_MODE,u.COMPARE_REF_TO_TEXTURE))},t.prototype._uploadCompressedDataToTextureDirectly=function(e,r,i,n,s,a,o){a===void 0&&(a=0),o===void 0&&(o=0);var l=this._gl,u=l.TEXTURE_2D;e.isCube&&(u=l.TEXTURE_CUBE_MAP_POSITIVE_X+a),this._gl.compressedTexImage2D(u,o,r,i,n,0,s)},t.prototype._uploadDataToTextureDirectly=function(e,r,i,n,s,a){i===void 0&&(i=0),n===void 0&&(n=0),a===void 0&&(a=!1);var o=this._gl,l=this._getWebGLTextureType(e.type),u=this._getInternalFormat(e.format),c=s===void 0?this._getRGBABufferInternalSizedFormat(e.type,e.format):this._getInternalFormat(s);this._unpackFlipY(e.invertY);var _=o.TEXTURE_2D;e.isCube&&(_=o.TEXTURE_CUBE_MAP_POSITIVE_X+i);var d=Math.round(Math.log(e.width)*Math.LOG2E),v=Math.round(Math.log(e.height)*Math.LOG2E),b=a?e.width:Math.pow(2,Math.max(d-n,0)),L=a?e.height:Math.pow(2,Math.max(v-n,0));o.texImage2D(_,n,c,b,L,0,u,l,r)},t.prototype.updateTextureData=function(e,r,i,n,s,a,o,l){o===void 0&&(o=0),l===void 0&&(l=0);var u=this._gl,c=this._getWebGLTextureType(e.type),_=this._getInternalFormat(e.format);this._unpackFlipY(e.invertY);var d=u.TEXTURE_2D;e.isCube&&(d=u.TEXTURE_CUBE_MAP_POSITIVE_X+o),u.texSubImage2D(d,l,i,n,s,a,_,c,r)},t.prototype._uploadArrayBufferViewToTexture=function(e,r,i,n){i===void 0&&(i=0),n===void 0&&(n=0);var s=this._gl,a=e.isCube?s.TEXTURE_CUBE_MAP:s.TEXTURE_2D;this._bindTextureDirectly(a,e,!0),this._uploadDataToTextureDirectly(e,r,i,n),this._bindTextureDirectly(a,null,!0)},t.prototype._prepareWebGLTextureContinuation=function(e,r,i,n,s){var a=this._gl;if(!!a){var o=this._getSamplingParameters(s,!i);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,o.mag),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,o.min),!i&&!n&&a.generateMipmap(a.TEXTURE_2D),this._bindTextureDirectly(a.TEXTURE_2D,null),r&&r._removePendingData(e),e.onLoadedObservable.notifyObservers(e),e.onLoadedObservable.clear()}},t.prototype._prepareWebGLTexture=function(e,r,i,n,s,a,o,l,u){var c=this;u===void 0&&(u=3);var _=this.getCaps().maxTextureSize,d=Math.min(_,this.needPOTTextures?t.GetExponentOfTwo(i,_):i),v=Math.min(_,this.needPOTTextures?t.GetExponentOfTwo(n,_):n),b=this._gl;if(!!b){if(!e._webGLTexture){r&&r._removePendingData(e);return}this._bindTextureDirectly(b.TEXTURE_2D,e,!0),this._unpackFlipY(s===void 0?!0:!!s),e.baseWidth=i,e.baseHeight=n,e.width=d,e.height=v,e.isReady=!0,!l(d,v,function(){c._prepareWebGLTextureContinuation(e,r,a,o,u)})&&this._prepareWebGLTextureContinuation(e,r,a,o,u)}},t.prototype._setupFramebufferDepthAttachments=function(e,r,i,n,s){s===void 0&&(s=1);var a=this._gl;if(e&&r)return this._getDepthStencilBuffer(i,n,s,a.DEPTH_STENCIL,a.DEPTH24_STENCIL8,a.DEPTH_STENCIL_ATTACHMENT);if(r){var o=a.DEPTH_COMPONENT16;return this._webGLVersion>1&&(o=a.DEPTH_COMPONENT32F),this._getDepthStencilBuffer(i,n,s,o,o,a.DEPTH_ATTACHMENT)}return e?this._getDepthStencilBuffer(i,n,s,a.STENCIL_INDEX8,a.STENCIL_INDEX8,a.STENCIL_ATTACHMENT):null},t.prototype._releaseFramebufferObjects=function(e){var r=this._gl;e._framebuffer&&(r.deleteFramebuffer(e._framebuffer),e._framebuffer=null),e._depthStencilBuffer&&(r.deleteRenderbuffer(e._depthStencilBuffer),e._depthStencilBuffer=null),e._MSAAFramebuffer&&(r.deleteFramebuffer(e._MSAAFramebuffer),e._MSAAFramebuffer=null),e._MSAARenderBuffer&&(r.deleteRenderbuffer(e._MSAARenderBuffer),e._MSAARenderBuffer=null)},t.prototype._releaseTexture=function(e){this._releaseFramebufferObjects(e),this._deleteTexture(e._webGLTexture),this.unbindAllTextures();var r=this._internalTexturesCache.indexOf(e);r!==-1&&this._internalTexturesCache.splice(r,1),e._lodTextureHigh&&e._lodTextureHigh.dispose(),e._lodTextureMid&&e._lodTextureMid.dispose(),e._lodTextureLow&&e._lodTextureLow.dispose(),e._irradianceTexture&&e._irradianceTexture.dispose()},t.prototype._deleteTexture=function(e){this._gl.deleteTexture(e)},t.prototype._setProgram=function(e){this._currentProgram!==e&&(this._gl.useProgram(e),this._currentProgram=e)},t.prototype.bindSamplers=function(e){var r=e.getPipelineContext();this._setProgram(r.program);for(var i=e.getSamplers(),n=0;n<i.length;n++){var s=e.getUniform(i[n]);s&&(this._boundUniforms[n]=s)}this._currentEffect=null},t.prototype._activateCurrentTexture=function(){this._currentTextureChannel!==this._activeChannel&&(this._gl.activeTexture(this._gl.TEXTURE0+this._activeChannel),this._currentTextureChannel=this._activeChannel)},t.prototype._bindTextureDirectly=function(e,r,i,n){i===void 0&&(i=!1),n===void 0&&(n=!1);var s=!1,a=r&&r._associatedChannel>-1;i&&a&&(this._activeChannel=r._associatedChannel);var o=this._boundTexturesCache[this._activeChannel];return o!==r||n?(this._activateCurrentTexture(),r&&r.isMultiview?this._gl.bindTexture(e,r?r._colorTextureArray:null):this._gl.bindTexture(e,r?r._webGLTexture:null),this._boundTexturesCache[this._activeChannel]=r,r&&(r._associatedChannel=this._activeChannel)):i&&(s=!0,this._activateCurrentTexture()),a&&!i&&this._bindSamplerUniformToChannel(r._associatedChannel,this._activeChannel),s},t.prototype._bindTexture=function(e,r){if(e!==void 0){r&&(r._associatedChannel=e),this._activeChannel=e;var i=r?this._getTextureTarget(r):this._gl.TEXTURE_2D;this._bindTextureDirectly(i,r)}},t.prototype.unbindAllTextures=function(){for(var e=0;e<this._maxSimultaneousTextures;e++)this._activeChannel=e,this._bindTextureDirectly(this._gl.TEXTURE_2D,null),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null),this.webGLVersion>1&&(this._bindTextureDirectly(this._gl.TEXTURE_3D,null),this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY,null))},t.prototype.setTexture=function(e,r,i){e!==void 0&&(r&&(this._boundUniforms[e]=r),this._setTexture(e,i))},t.prototype._bindSamplerUniformToChannel=function(e,r){var i=this._boundUniforms[e];!i||i._currentState===r||(this._gl.uniform1i(i,r),i._currentState=r)},t.prototype._getTextureWrapMode=function(e){switch(e){case 1:return this._gl.REPEAT;case 0:return this._gl.CLAMP_TO_EDGE;case 2:return this._gl.MIRRORED_REPEAT}return this._gl.REPEAT},t.prototype._setTexture=function(e,r,i,n){if(i===void 0&&(i=!1),n===void 0&&(n=!1),!r)return this._boundTexturesCache[e]!=null&&(this._activeChannel=e,this._bindTextureDirectly(this._gl.TEXTURE_2D,null),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null),this.webGLVersion>1&&(this._bindTextureDirectly(this._gl.TEXTURE_3D,null),this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY,null))),!1;if(r.video)this._activeChannel=e,r.update();else if(r.delayLoadState===4)return r.delayLoad(),!1;var s;n?s=r.depthStencilTexture:r.isReady()?s=r.getInternalTexture():r.isCube?s=this.emptyCubeTexture:r.is3D?s=this.emptyTexture3D:r.is2DArray?s=this.emptyTexture2DArray:s=this.emptyTexture,!i&&s&&(s._associatedChannel=e);var a=!0;this._boundTexturesCache[e]===s&&(i||this._bindSamplerUniformToChannel(s._associatedChannel,e),a=!1),this._activeChannel=e;var o=this._getTextureTarget(s);if(a&&this._bindTextureDirectly(o,s,i),s&&!s.isMultiview){if(s.isCube&&s._cachedCoordinatesMode!==r.coordinatesMode){s._cachedCoordinatesMode=r.coordinatesMode;var l=r.coordinatesMode!==3&&r.coordinatesMode!==5?1:0;r.wrapU=l,r.wrapV=l}s._cachedWrapU!==r.wrapU&&(s._cachedWrapU=r.wrapU,this._setTextureParameterInteger(o,this._gl.TEXTURE_WRAP_S,this._getTextureWrapMode(r.wrapU),s)),s._cachedWrapV!==r.wrapV&&(s._cachedWrapV=r.wrapV,this._setTextureParameterInteger(o,this._gl.TEXTURE_WRAP_T,this._getTextureWrapMode(r.wrapV),s)),s.is3D&&s._cachedWrapR!==r.wrapR&&(s._cachedWrapR=r.wrapR,this._setTextureParameterInteger(o,this._gl.TEXTURE_WRAP_R,this._getTextureWrapMode(r.wrapR),s)),this._setAnisotropicLevel(o,s,r.anisotropicFilteringLevel)}return!0},t.prototype.setTextureArray=function(e,r,i){if(!(e===void 0||!r)){(!this._textureUnits||this._textureUnits.length!==i.length)&&(this._textureUnits=new Int32Array(i.length));for(var n=0;n<i.length;n++){var s=i[n].getInternalTexture();s?(this._textureUnits[n]=e+n,s._associatedChannel=e+n):this._textureUnits[n]=-1}this._gl.uniform1iv(r,this._textureUnits);for(var a=0;a<i.length;a++)this._setTexture(this._textureUnits[a],i[a],!0)}},t.prototype._setAnisotropicLevel=function(e,r,i){var n=this._caps.textureAnisotropicFilterExtension;r.samplingMode!==11&&r.samplingMode!==3&&r.samplingMode!==2&&(i=1),n&&r._cachedAnisotropicFilteringLevel!==i&&(this._setTextureParameterFloat(e,n.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(i,this._caps.maxAnisotropy),r),r._cachedAnisotropicFilteringLevel=i)},t.prototype._setTextureParameterFloat=function(e,r,i,n){this._bindTextureDirectly(e,n,!0,!0),this._gl.texParameterf(e,r,i)},t.prototype._setTextureParameterInteger=function(e,r,i,n){n&&this._bindTextureDirectly(e,n,!0,!0),this._gl.texParameteri(e,r,i)},t.prototype.unbindAllAttributes=function(){if(this._mustWipeVertexAttributes){this._mustWipeVertexAttributes=!1;for(var e=0;e<this._caps.maxVertexAttribs;e++)this.disableAttributeByIndex(e);return}for(var e=0,r=this._vertexAttribArraysEnabled.length;e<r;e++)e>=this._caps.maxVertexAttribs||!this._vertexAttribArraysEnabled[e]||this.disableAttributeByIndex(e)},t.prototype.releaseEffects=function(){for(var e in this._compiledEffects){var r=this._compiledEffects[e].getPipelineContext();this._deletePipelineContext(r)}this._compiledEffects={}},t.prototype.dispose=function(){this.stopRenderLoop(),this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._dummyFramebuffer&&this._gl.deleteFramebuffer(this._dummyFramebuffer),this.releaseEffects(),this.unbindAllAttributes(),this._boundUniforms=[],me.IsWindowObjectExist()&&this._renderingCanvas&&(this._doNotHandleContextLost||(this._renderingCanvas.removeEventListener("webglcontextlost",this._onContextLost),this._renderingCanvas.removeEventListener("webglcontextrestored",this._onContextRestored))),this._workingCanvas=null,this._workingContext=null,this._currentBufferPointers=[],this._renderingCanvas=null,this._currentProgram=null,this._boundRenderFunction=null,Rt.ResetCache();for(var e=0,r=this._activeRequests;e<r.length;e++){var i=r[e];i.abort()}},t.prototype.attachContextLostEvent=function(e){this._renderingCanvas&&this._renderingCanvas.addEventListener("webglcontextlost",e,!1)},t.prototype.attachContextRestoredEvent=function(e){this._renderingCanvas&&this._renderingCanvas.addEventListener("webglcontextrestored",e,!1)},t.prototype.getError=function(){return this._gl.getError()},t.prototype._canRenderToFloatFramebuffer=function(){return this._webGLVersion>1?this._caps.colorBufferFloat:this._canRenderToFramebuffer(1)},t.prototype._canRenderToHalfFloatFramebuffer=function(){return this._webGLVersion>1?this._caps.colorBufferFloat:this._canRenderToFramebuffer(2)},t.prototype._canRenderToFramebuffer=function(e){for(var r=this._gl;r.getError()!==r.NO_ERROR;);var i=!0,n=r.createTexture();r.bindTexture(r.TEXTURE_2D,n),r.texImage2D(r.TEXTURE_2D,0,this._getRGBABufferInternalSizedFormat(e),1,1,0,r.RGBA,this._getWebGLTextureType(e),null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0);var a=r.checkFramebufferStatus(r.FRAMEBUFFER);if(i=i&&a===r.FRAMEBUFFER_COMPLETE,i=i&&r.getError()===r.NO_ERROR,i&&(r.clear(r.COLOR_BUFFER_BIT),i=i&&r.getError()===r.NO_ERROR),i){r.bindFramebuffer(r.FRAMEBUFFER,null);var o=r.RGBA,l=r.UNSIGNED_BYTE,u=new Uint8Array(4);r.readPixels(0,0,1,1,o,l,u),i=i&&r.getError()===r.NO_ERROR}for(r.deleteTexture(n),r.deleteFramebuffer(s),r.bindFramebuffer(r.FRAMEBUFFER,null);!i&&r.getError()!==r.NO_ERROR;);return i},t.prototype._getWebGLTextureType=function(e){if(this._webGLVersion===1){switch(e){case 1:return this._gl.FLOAT;case 2:return this._gl.HALF_FLOAT_OES;case 0:return this._gl.UNSIGNED_BYTE;case 8:return this._gl.UNSIGNED_SHORT_4_4_4_4;case 9:return this._gl.UNSIGNED_SHORT_5_5_5_1;case 10:return this._gl.UNSIGNED_SHORT_5_6_5}return this._gl.UNSIGNED_BYTE}switch(e){case 3:return this._gl.BYTE;case 0:return this._gl.UNSIGNED_BYTE;case 4:return this._gl.SHORT;case 5:return this._gl.UNSIGNED_SHORT;case 6:return this._gl.INT;case 7:return this._gl.UNSIGNED_INT;case 1:return this._gl.FLOAT;case 2:return this._gl.HALF_FLOAT;case 8:return this._gl.UNSIGNED_SHORT_4_4_4_4;case 9:return this._gl.UNSIGNED_SHORT_5_5_5_1;case 10:return this._gl.UNSIGNED_SHORT_5_6_5;case 11:return this._gl.UNSIGNED_INT_2_10_10_10_REV;case 12:return this._gl.UNSIGNED_INT_24_8;case 13:return this._gl.UNSIGNED_INT_10F_11F_11F_REV;case 14:return this._gl.UNSIGNED_INT_5_9_9_9_REV;case 15:return this._gl.FLOAT_32_UNSIGNED_INT_24_8_REV}return this._gl.UNSIGNED_BYTE},t.prototype._getInternalFormat=function(e){var r=this._gl.RGBA;switch(e){case 0:r=this._gl.ALPHA;break;case 1:r=this._gl.LUMINANCE;break;case 2:r=this._gl.LUMINANCE_ALPHA;break;case 6:r=this._gl.RED;break;case 7:r=this._gl.RG;break;case 4:r=this._gl.RGB;break;case 5:r=this._gl.RGBA;break}if(this._webGLVersion>1)switch(e){case 8:r=this._gl.RED_INTEGER;break;case 9:r=this._gl.RG_INTEGER;break;case 10:r=this._gl.RGB_INTEGER;break;case 11:r=this._gl.RGBA_INTEGER;break}return r},t.prototype._getRGBABufferInternalSizedFormat=function(e,r){if(this._webGLVersion===1){if(r!==void 0)switch(r){case 0:return this._gl.ALPHA;case 1:return this._gl.LUMINANCE;case 2:return this._gl.LUMINANCE_ALPHA;case 4:return this._gl.RGB}return this._gl.RGBA}switch(e){case 3:switch(r){case 6:return this._gl.R8_SNORM;case 7:return this._gl.RG8_SNORM;case 4:return this._gl.RGB8_SNORM;case 8:return this._gl.R8I;case 9:return this._gl.RG8I;case 10:return this._gl.RGB8I;case 11:return this._gl.RGBA8I;default:return this._gl.RGBA8_SNORM}case 0:switch(r){case 6:return this._gl.R8;case 7:return this._gl.RG8;case 4:return this._gl.RGB8;case 5:return this._gl.RGBA8;case 8:return this._gl.R8UI;case 9:return this._gl.RG8UI;case 10:return this._gl.RGB8UI;case 11:return this._gl.RGBA8UI;case 0:return this._gl.ALPHA;case 1:return this._gl.LUMINANCE;case 2:return this._gl.LUMINANCE_ALPHA;default:return this._gl.RGBA8}case 4:switch(r){case 8:return this._gl.R16I;case 9:return this._gl.RG16I;case 10:return this._gl.RGB16I;case 11:return this._gl.RGBA16I;default:return this._gl.RGBA16I}case 5:switch(r){case 8:return this._gl.R16UI;case 9:return this._gl.RG16UI;case 10:return this._gl.RGB16UI;case 11:return this._gl.RGBA16UI;default:return this._gl.RGBA16UI}case 6:switch(r){case 8:return this._gl.R32I;case 9:return this._gl.RG32I;case 10:return this._gl.RGB32I;case 11:return this._gl.RGBA32I;default:return this._gl.RGBA32I}case 7:switch(r){case 8:return this._gl.R32UI;case 9:return this._gl.RG32UI;case 10:return this._gl.RGB32UI;case 11:return this._gl.RGBA32UI;default:return this._gl.RGBA32UI}case 1:switch(r){case 6:return this._gl.R32F;case 7:return this._gl.RG32F;case 4:return this._gl.RGB32F;case 5:return this._gl.RGBA32F;default:return this._gl.RGBA32F}case 2:switch(r){case 6:return this._gl.R16F;case 7:return this._gl.RG16F;case 4:return this._gl.RGB16F;case 5:return this._gl.RGBA16F;default:return this._gl.RGBA16F}case 10:return this._gl.RGB565;case 13:return this._gl.R11F_G11F_B10F;case 14:return this._gl.RGB9_E5;case 8:return this._gl.RGBA4;case 9:return this._gl.RGB5_A1;case 11:switch(r){case 5:return this._gl.RGB10_A2;case 11:return this._gl.RGB10_A2UI;default:return this._gl.RGB10_A2}}return this._gl.RGBA8},t.prototype._getRGBAMultiSampleBufferFormat=function(e){return e===1?this._gl.RGBA32F:e===2?this._gl.RGBA16F:this._gl.RGBA8},t.prototype._loadFile=function(e,r,i,n,s,a){var o=this,l=t._FileToolsLoadFile(e,r,i,n,s,a);return this._activeRequests.push(l),l.onCompleteObservable.add(function(u){o._activeRequests.splice(o._activeRequests.indexOf(u),1)}),l},t._FileToolsLoadFile=function(e,r,i,n,s,a){throw we.WarnImport("FileTools")},t.prototype.readPixels=function(e,r,i,n,s){s===void 0&&(s=!0);var a=s?4:3,o=s?this._gl.RGBA:this._gl.RGB,l=new Uint8Array(n*i*a);return this._gl.readPixels(e,r,i,n,o,this._gl.UNSIGNED_BYTE,l),l},Object.defineProperty(t,"IsSupported",{get:function(){return this.isSupported()},enumerable:!1,configurable:!0}),t.isSupported=function(){if(this._HasMajorPerformanceCaveat!==null)return!this._HasMajorPerformanceCaveat;if(this._IsSupported===null)try{var e=vr.CreateCanvas(1,1),r=e.getContext("webgl")||e.getContext("experimental-webgl");this._IsSupported=r!=null&&!!window.WebGLRenderingContext}catch{this._IsSupported=!1}return this._IsSupported},Object.defineProperty(t,"HasMajorPerformanceCaveat",{get:function(){if(this._HasMajorPerformanceCaveat===null)try{var e=vr.CreateCanvas(1,1),r=e.getContext("webgl",{failIfMajorPerformanceCaveat:!0})||e.getContext("experimental-webgl",{failIfMajorPerformanceCaveat:!0});this._HasMajorPerformanceCaveat=!r}catch{this._HasMajorPerformanceCaveat=!1}return this._HasMajorPerformanceCaveat},enumerable:!1,configurable:!0}),t.CeilingPOT=function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e},t.FloorPOT=function(e){return e=e|e>>1,e=e|e>>2,e=e|e>>4,e=e|e>>8,e=e|e>>16,e-(e>>1)},t.NearestPOT=function(e){var r=t.CeilingPOT(e),i=t.FloorPOT(e);return r-e>e-i?i:r},t.GetExponentOfTwo=function(e,r,i){i===void 0&&(i=2);var n;switch(i){case 1:n=t.FloorPOT(e);break;case 2:n=t.NearestPOT(e);break;case 3:default:n=t.CeilingPOT(e);break}return Math.min(n,r)},t.QueueNewFrame=function(e,r){return me.IsWindowObjectExist()?(r||(r=window),r.requestPostAnimationFrame?r.requestPostAnimationFrame(e):r.requestAnimationFrame?r.requestAnimationFrame(e):r.msRequestAnimationFrame?r.msRequestAnimationFrame(e):r.webkitRequestAnimationFrame?r.webkitRequestAnimationFrame(e):r.mozRequestAnimationFrame?r.mozRequestAnimationFrame(e):r.oRequestAnimationFrame?r.oRequestAnimationFrame(e):window.setTimeout(e,16)):typeof requestAnimationFrame!="undefined"?requestAnimationFrame(e):setTimeout(e,16)},t.prototype.getHostDocument=function(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:document},t.ExceptionList=[{key:"Chrome/63.0",capture:"63\\.0\\.3239\\.(\\d+)",captureConstraint:108,targets:["uniformBuffer"]},{key:"Firefox/58",capture:null,captureConstraint:null,targets:["uniformBuffer"]},{key:"Firefox/59",capture:null,captureConstraint:null,targets:["uniformBuffer"]},{key:"Chrome/72.+?Mobile",capture:null,captureConstraint:null,targets:["vao"]},{key:"Chrome/73.+?Mobile",capture:null,captureConstraint:null,targets:["vao"]},{key:"Chrome/74.+?Mobile",capture:null,captureConstraint:null,targets:["vao"]},{key:"Mac OS.+Chrome/71",capture:null,captureConstraint:null,targets:["vao"]},{key:"Mac OS.+Chrome/72",capture:null,captureConstraint:null,targets:["vao"]}],t._TextureLoaders=[],t.CollisionsEpsilon=.001,t._IsSupported=null,t._HasMajorPerformanceCaveat=null,t}(),Yt=function(){function t(){}return Object.defineProperty(t,"Now",{get:function(){return me.IsWindowObjectExist()&&window.performance&&window.performance.now?window.performance.now():Date.now()},enumerable:!1,configurable:!0}),t}(),Qo=function(){function t(e){e===void 0&&(e=30),this._enabled=!0,this._rollingFrameTime=new Zo(e)}return t.prototype.sampleFrame=function(e){if(e===void 0&&(e=Yt.Now),!!this._enabled){if(this._lastFrameTimeMs!=null){var r=e-this._lastFrameTimeMs;this._rollingFrameTime.add(r)}this._lastFrameTimeMs=e}},Object.defineProperty(t.prototype,"averageFrameTime",{get:function(){return this._rollingFrameTime.average},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"averageFrameTimeVariance",{get:function(){return this._rollingFrameTime.variance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instantaneousFrameTime",{get:function(){return this._rollingFrameTime.history(0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"averageFPS",{get:function(){return 1e3/this._rollingFrameTime.average},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instantaneousFPS",{get:function(){var e=this._rollingFrameTime.history(0);return e===0?0:1e3/e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSaturated",{get:function(){return this._rollingFrameTime.isSaturated()},enumerable:!1,configurable:!0}),t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1,this._lastFrameTimeMs=null},Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._enabled},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this._lastFrameTimeMs=null,this._rollingFrameTime.reset()},t}(),Zo=function(){function t(e){this._samples=new Array(e),this.reset()}return t.prototype.add=function(e){var r;if(this.isSaturated()){var i=this._samples[this._pos];r=i-this.average,this.average-=r/(this._sampleCount-1),this._m2-=r*(i-this.average)}else this._sampleCount++;r=e-this.average,this.average+=r/this._sampleCount,this._m2+=r*(e-this.average),this.variance=this._m2/(this._sampleCount-1),this._samples[this._pos]=e,this._pos++,this._pos%=this._samples.length},t.prototype.history=function(e){if(e>=this._sampleCount||e>=this._samples.length)return 0;var r=this._wrapPosition(this._pos-1);return this._samples[this._wrapPosition(r-e)]},t.prototype.isSaturated=function(){return this._sampleCount>=this._samples.length},t.prototype.reset=function(){this.average=0,this.variance=0,this._sampleCount=0,this._pos=0,this._m2=0},t.prototype._wrapPosition=function(e){var r=this._samples.length;return(e%r+r)%r},t}(),Jo=function(){function t(){this._startMonitoringTime=0,this._min=0,this._max=0,this._average=0,this._lastSecAverage=0,this._current=0,this._totalValueCount=0,this._totalAccumulated=0,this._lastSecAccumulated=0,this._lastSecTime=0,this._lastSecValueCount=0}return Object.defineProperty(t.prototype,"min",{get:function(){return this._min},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"average",{get:function(){return this._average},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastSecAverage",{get:function(){return this._lastSecAverage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"total",{get:function(){return this._totalAccumulated},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._totalValueCount},enumerable:!1,configurable:!0}),t.prototype.fetchNewFrame=function(){this._totalValueCount++,this._current=0,this._lastSecValueCount++},t.prototype.addCount=function(e,r){!t.Enabled||(this._current+=e,r&&this._fetchResult())},t.prototype.beginMonitoring=function(){!t.Enabled||(this._startMonitoringTime=Yt.Now)},t.prototype.endMonitoring=function(e){if(e===void 0&&(e=!0),!!t.Enabled){e&&this.fetchNewFrame();var r=Yt.Now;this._current=r-this._startMonitoringTime,e&&this._fetchResult()}},t.prototype._fetchResult=function(){this._totalAccumulated+=this._current,this._lastSecAccumulated+=this._current,this._min=Math.min(this._min,this._current),this._max=Math.max(this._max,this._current),this._average=this._totalAccumulated/this._totalValueCount;var e=Yt.Now;e-this._lastSecTime>1e3&&(this._lastSecAverage=this._lastSecAccumulated/this._lastSecValueCount,this._lastSecTime=e,this._lastSecAccumulated=0,this._lastSecValueCount=0)},t.Enabled=!0,t}();Se.prototype.setAlphaConstants=function(t,e,r,i){this._alphaState.setAlphaBlendConstants(t,e,r,i)};Se.prototype.setAlphaMode=function(t,e){if(e===void 0&&(e=!1),this._alphaMode!==t){switch(t){case 0:this._alphaState.alphaBlend=!1;break;case 7:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 8:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA),this._alphaState.alphaBlend=!0;break;case 2:this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 6:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE,this._gl.ZERO,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 1:this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA,this._gl.ONE,this._gl.ZERO,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 3:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ZERO,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 4:this._alphaState.setAlphaBlendFunctionParameters(this._gl.DST_COLOR,this._gl.ZERO,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 5:this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 9:this._alphaState.setAlphaBlendFunctionParameters(this._gl.CONSTANT_COLOR,this._gl.ONE_MINUS_CONSTANT_COLOR,this._gl.CONSTANT_ALPHA,this._gl.ONE_MINUS_CONSTANT_ALPHA),this._alphaState.alphaBlend=!0;break;case 10:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA),this._alphaState.alphaBlend=!0;break;case 11:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case 12:this._alphaState.setAlphaBlendFunctionParameters(this._gl.DST_ALPHA,this._gl.ONE,this._gl.ZERO,this._gl.ZERO),this._alphaState.alphaBlend=!0;break;case 13:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE_MINUS_DST_COLOR,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE_MINUS_DST_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._alphaState.alphaBlend=!0;break;case 14:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA),this._alphaState.alphaBlend=!0;break;case 15:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE,this._gl.ONE,this._gl.ZERO),this._alphaState.alphaBlend=!0;break;case 16:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE_MINUS_DST_COLOR,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ZERO,this._gl.ONE),this._alphaState.alphaBlend=!0;break}e||(this.depthCullingState.depthMask=t===0),this._alphaMode=t}};Se.prototype.getAlphaMode=function(){return this._alphaMode};Se.prototype.setAlphaEquation=function(t){if(this._alphaEquation!==t){switch(t){case 0:this._alphaState.setAlphaEquationParameters(this._gl.FUNC_ADD,this._gl.FUNC_ADD);break;case 1:this._alphaState.setAlphaEquationParameters(this._gl.FUNC_SUBTRACT,this._gl.FUNC_SUBTRACT);break;case 2:this._alphaState.setAlphaEquationParameters(this._gl.FUNC_REVERSE_SUBTRACT,this._gl.FUNC_REVERSE_SUBTRACT);break;case 3:this._alphaState.setAlphaEquationParameters(this._gl.MAX,this._gl.MAX);break;case 4:this._alphaState.setAlphaEquationParameters(this._gl.MIN,this._gl.MIN);break;case 5:this._alphaState.setAlphaEquationParameters(this._gl.MIN,this._gl.FUNC_ADD);break}this._alphaEquation=t}};Se.prototype.getAlphaEquation=function(){return this._alphaEquation};Se.prototype._readTexturePixels=function(t,e,r,i,n,s){i===void 0&&(i=-1),n===void 0&&(n=0),s===void 0&&(s=null);var a=this._gl;if(!a)throw new Error("Engine does not have gl rendering context.");if(!this._dummyFramebuffer){var o=a.createFramebuffer();if(!o)throw new Error("Unable to create dummy framebuffer");this._dummyFramebuffer=o}a.bindFramebuffer(a.FRAMEBUFFER,this._dummyFramebuffer),i>-1?a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+i,t._webGLTexture,n):a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,t._webGLTexture,n);var l=t.type!==void 0?this._getWebGLTextureType(t.type):a.UNSIGNED_BYTE;switch(l){case a.UNSIGNED_BYTE:s||(s=new Uint8Array(4*e*r)),l=a.UNSIGNED_BYTE;break;default:s||(s=new Float32Array(4*e*r)),l=a.FLOAT;break}return a.readPixels(0,0,e,r,a.RGBA,l,s),a.bindFramebuffer(a.FRAMEBUFFER,this._currentFramebuffer),s};Se.prototype.updateDynamicIndexBuffer=function(t,e,r){this._currentBoundBuffer[this._gl.ELEMENT_ARRAY_BUFFER]=null,this.bindIndexBuffer(t);var i;e instanceof Uint16Array||e instanceof Uint32Array?i=e:i=t.is32Bits?new Uint32Array(e):new Uint16Array(e),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,i,this._gl.DYNAMIC_DRAW),this._resetIndexBufferBinding()};Se.prototype.updateDynamicVertexBuffer=function(t,e,r,i){this.bindArrayBuffer(t),r===void 0&&(r=0);var n=e.length||e.byteLength;i===void 0||i>=n&&r===0?e instanceof Array?this._gl.bufferSubData(this._gl.ARRAY_BUFFER,r,new Float32Array(e)):this._gl.bufferSubData(this._gl.ARRAY_BUFFER,r,e):e instanceof Array?this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,new Float32Array(e).subarray(r,r+i)):(e instanceof ArrayBuffer?e=new Uint8Array(e,r,i):e=new Uint8Array(e.buffer,e.byteOffset+r,i),this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,e)),this._resetVertexBufferBinding()};var ol=function(t){Ke(e,t);function e(r,i,n,s){s===void 0&&(s=!1);var a=t.call(this,r,i,n,s)||this;if(a.enableOfflineSupport=!1,a.disableManifestCheck=!1,a.scenes=new Array,a.onNewSceneAddedObservable=new he,a.postProcesses=new Array,a.isPointerLock=!1,a.onResizeObservable=new he,a.onCanvasBlurObservable=new he,a.onCanvasFocusObservable=new he,a.onCanvasPointerOutObservable=new he,a.onBeginFrameObservable=new he,a.customAnimationFrameRequester=null,a.onEndFrameObservable=new he,a.onBeforeShaderCompilationObservable=new he,a.onAfterShaderCompilationObservable=new he,a._deterministicLockstep=!1,a._lockstepMaxSteps=4,a._timeStep=1/60,a._fps=60,a._deltaTime=0,a._drawCalls=new Jo,a.canvasTabIndex=1,a.disablePerformanceMonitorInBackground=!1,a._performanceMonitor=new Qo,e.Instances.push(a),!r)return a;if(n=a._creationOptions,r.getContext){var o=r;if(a._onCanvasFocus=function(){a.onCanvasFocusObservable.notifyObservers(a)},a._onCanvasBlur=function(){a.onCanvasBlurObservable.notifyObservers(a)},o.addEventListener("focus",a._onCanvasFocus),o.addEventListener("blur",a._onCanvasBlur),a._onBlur=function(){a.disablePerformanceMonitorInBackground&&a._performanceMonitor.disable(),a._windowIsBackground=!0},a._onFocus=function(){a.disablePerformanceMonitorInBackground&&a._performanceMonitor.enable(),a._windowIsBackground=!1},a._onCanvasPointerOut=function(c){a.onCanvasPointerOutObservable.notifyObservers(c)},o.addEventListener("pointerout",a._onCanvasPointerOut),me.IsWindowObjectExist()){var l=a.getHostWindow();l.addEventListener("blur",a._onBlur),l.addEventListener("focus",a._onFocus);var u=document;a._onFullscreenChange=function(){u.fullscreen!==void 0?a.isFullscreen=u.fullscreen:u.mozFullScreen!==void 0?a.isFullscreen=u.mozFullScreen:u.webkitIsFullScreen!==void 0?a.isFullscreen=u.webkitIsFullScreen:u.msIsFullScreen!==void 0&&(a.isFullscreen=u.msIsFullScreen),a.isFullscreen&&a._pointerLockRequested&&o&&e._RequestPointerlock(o)},document.addEventListener("fullscreenchange",a._onFullscreenChange,!1),document.addEventListener("mozfullscreenchange",a._onFullscreenChange,!1),document.addEventListener("webkitfullscreenchange",a._onFullscreenChange,!1),document.addEventListener("msfullscreenchange",a._onFullscreenChange,!1),a._onPointerLockChange=function(){a.isPointerLock=u.mozPointerLockElement===o||u.webkitPointerLockElement===o||u.msPointerLockElement===o||u.pointerLockElement===o},document.addEventListener("pointerlockchange",a._onPointerLockChange,!1),document.addEventListener("mspointerlockchange",a._onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",a._onPointerLockChange,!1),document.addEventListener("webkitpointerlockchange",a._onPointerLockChange,!1),!e.audioEngine&&n.audioEngine&&e.AudioEngineFactory&&(e.audioEngine=e.AudioEngineFactory(a.getRenderingCanvas()))}a._connectVREvents(),a.enableOfflineSupport=e.OfflineProviderFactory!==void 0,n.doNotHandleTouchAction||a._disableTouchAction(),a._deterministicLockstep=!!n.deterministicLockstep,a._lockstepMaxSteps=n.lockstepMaxSteps||0,a._timeStep=n.timeStep||1/60}return a._prepareVRComponent(),n.autoEnableWebVR&&a.initWebVR(),a}return Object.defineProperty(e,"NpmPackage",{get:function(){return Se.NpmPackage},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Version",{get:function(){return Se.Version},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Instances",{get:function(){return pt.Instances},enumerable:!1,configurable:!0}),Object.defineProperty(e,"LastCreatedEngine",{get:function(){return pt.LastCreatedEngine},enumerable:!1,configurable:!0}),Object.defineProperty(e,"LastCreatedScene",{get:function(){return pt.LastCreatedScene},enumerable:!1,configurable:!0}),e.MarkAllMaterialsAsDirty=function(r,i){for(var n=0;n<e.Instances.length;n++)for(var s=e.Instances[n],a=0;a<s.scenes.length;a++)s.scenes[a].markAllMaterialsAsDirty(r,i)},e.DefaultLoadingScreenFactory=function(r){throw we.WarnImport("LoadingScreen")},Object.defineProperty(e.prototype,"_supportsHardwareTextureRescaling",{get:function(){return!!e._RescalePostProcessFactory},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"performanceMonitor",{get:function(){return this._performanceMonitor},enumerable:!1,configurable:!0}),e.prototype.getInputElement=function(){return this._renderingCanvas},e.prototype.getAspectRatio=function(r,i){i===void 0&&(i=!1);var n=r.viewport;return this.getRenderWidth(i)*n.width/(this.getRenderHeight(i)*n.height)},e.prototype.getScreenAspectRatio=function(){return this.getRenderWidth(!0)/this.getRenderHeight(!0)},e.prototype.getRenderingCanvasClientRect=function(){return this._renderingCanvas?this._renderingCanvas.getBoundingClientRect():null},e.prototype.getInputElementClientRect=function(){return this._renderingCanvas?this.getInputElement().getBoundingClientRect():null},e.prototype.isDeterministicLockStep=function(){return this._deterministicLockstep},e.prototype.getLockstepMaxSteps=function(){return this._lockstepMaxSteps},e.prototype.getTimeStep=function(){return this._timeStep*1e3},e.prototype.generateMipMapsForCubemap=function(r,i){if(i===void 0&&(i=!0),r.generateMipMaps){var n=this._gl;this._bindTextureDirectly(n.TEXTURE_CUBE_MAP,r,!0),n.generateMipmap(n.TEXTURE_CUBE_MAP),i&&this._bindTextureDirectly(n.TEXTURE_CUBE_MAP,null)}},e.prototype.setState=function(r,i,n,s){i===void 0&&(i=0),s===void 0&&(s=!1),(this._depthCullingState.cull!==r||n)&&(this._depthCullingState.cull=r);var a=this.cullBackFaces?this._gl.BACK:this._gl.FRONT;(this._depthCullingState.cullFace!==a||n)&&(this._depthCullingState.cullFace=a),this.setZOffset(i);var o=s?this._gl.CW:this._gl.CCW;(this._depthCullingState.frontFace!==o||n)&&(this._depthCullingState.frontFace=o)},e.prototype.setZOffset=function(r){this._depthCullingState.zOffset=r},e.prototype.getZOffset=function(){return this._depthCullingState.zOffset},e.prototype.setDepthBuffer=function(r){this._depthCullingState.depthTest=r},e.prototype.getDepthWrite=function(){return this._depthCullingState.depthMask},e.prototype.setDepthWrite=function(r){this._depthCullingState.depthMask=r},e.prototype.getStencilBuffer=function(){return this._stencilState.stencilTest},e.prototype.setStencilBuffer=function(r){this._stencilState.stencilTest=r},e.prototype.getStencilMask=function(){return this._stencilState.stencilMask},e.prototype.setStencilMask=function(r){this._stencilState.stencilMask=r},e.prototype.getStencilFunction=function(){return this._stencilState.stencilFunc},e.prototype.getStencilFunctionReference=function(){return this._stencilState.stencilFuncRef},e.prototype.getStencilFunctionMask=function(){return this._stencilState.stencilFuncMask},e.prototype.setStencilFunction=function(r){this._stencilState.stencilFunc=r},e.prototype.setStencilFunctionReference=function(r){this._stencilState.stencilFuncRef=r},e.prototype.setStencilFunctionMask=function(r){this._stencilState.stencilFuncMask=r},e.prototype.getStencilOperationFail=function(){return this._stencilState.stencilOpStencilFail},e.prototype.getStencilOperationDepthFail=function(){return this._stencilState.stencilOpDepthFail},e.prototype.getStencilOperationPass=function(){return this._stencilState.stencilOpStencilDepthPass},e.prototype.setStencilOperationFail=function(r){this._stencilState.stencilOpStencilFail=r},e.prototype.setStencilOperationDepthFail=function(r){this._stencilState.stencilOpDepthFail=r},e.prototype.setStencilOperationPass=function(r){this._stencilState.stencilOpStencilDepthPass=r},e.prototype.setDitheringState=function(r){r?this._gl.enable(this._gl.DITHER):this._gl.disable(this._gl.DITHER)},e.prototype.setRasterizerState=function(r){r?this._gl.disable(this._gl.RASTERIZER_DISCARD):this._gl.enable(this._gl.RASTERIZER_DISCARD)},e.prototype.getDepthFunction=function(){return this._depthCullingState.depthFunc},e.prototype.setDepthFunction=function(r){this._depthCullingState.depthFunc=r},e.prototype.setDepthFunctionToGreater=function(){this._depthCullingState.depthFunc=this._gl.GREATER},e.prototype.setDepthFunctionToGreaterOrEqual=function(){this._depthCullingState.depthFunc=this._gl.GEQUAL},e.prototype.setDepthFunctionToLess=function(){this._depthCullingState.depthFunc=this._gl.LESS},e.prototype.setDepthFunctionToLessOrEqual=function(){this._depthCullingState.depthFunc=this._gl.LEQUAL},e.prototype.cacheStencilState=function(){this._cachedStencilBuffer=this.getStencilBuffer(),this._cachedStencilFunction=this.getStencilFunction(),this._cachedStencilMask=this.getStencilMask(),this._cachedStencilOperationPass=this.getStencilOperationPass(),this._cachedStencilOperationFail=this.getStencilOperationFail(),this._cachedStencilOperationDepthFail=this.getStencilOperationDepthFail(),this._cachedStencilReference=this.getStencilFunctionReference()},e.prototype.restoreStencilState=function(){this.setStencilFunction(this._cachedStencilFunction),this.setStencilMask(this._cachedStencilMask),this.setStencilBuffer(this._cachedStencilBuffer),this.setStencilOperationPass(this._cachedStencilOperationPass),this.setStencilOperationFail(this._cachedStencilOperationFail),this.setStencilOperationDepthFail(this._cachedStencilOperationDepthFail),this.setStencilFunctionReference(this._cachedStencilReference)},e.prototype.setDirectViewport=function(r,i,n,s){var a=this._cachedViewport;return this._cachedViewport=null,this._viewport(r,i,n,s),a},e.prototype.scissorClear=function(r,i,n,s,a){this.enableScissor(r,i,n,s),this.clear(a,!0,!0,!0),this.disableScissor()},e.prototype.enableScissor=function(r,i,n,s){var a=this._gl;a.enable(a.SCISSOR_TEST),a.scissor(r,i,n,s)},e.prototype.disableScissor=function(){var r=this._gl;r.disable(r.SCISSOR_TEST)},e.prototype._reportDrawCall=function(){this._drawCalls.addCount(1,!1)},e.prototype.initWebVR=function(){throw we.WarnImport("WebVRCamera")},e.prototype._prepareVRComponent=function(){},e.prototype._connectVREvents=function(r,i){},e.prototype._submitVRFrame=function(){},e.prototype.disableVR=function(){},e.prototype.isVRPresenting=function(){return!1},e.prototype._requestVRFrame=function(){},e.prototype._loadFileAsync=function(r,i,n){var s=this;return new Promise(function(a,o){s._loadFile(r,function(l){a(l)},void 0,i,n,function(l,u){o(u)})})},e.prototype.getVertexShaderSource=function(r){var i=this._gl.getAttachedShaders(r);return i?this._gl.getShaderSource(i[0]):null},e.prototype.getFragmentShaderSource=function(r){var i=this._gl.getAttachedShaders(r);return i?this._gl.getShaderSource(i[1]):null},e.prototype.setDepthStencilTexture=function(r,i,n){r!==void 0&&(i&&(this._boundUniforms[r]=i),!n||!n.depthStencilTexture?this._setTexture(r,null):this._setTexture(r,n,!1,!0))},e.prototype.setTextureFromPostProcess=function(r,i){this._bindTexture(r,i?i._textures.data[i._currentRenderTextureInd]:null)},e.prototype.setTextureFromPostProcessOutput=function(r,i){this._bindTexture(r,i?i._outputTexture:null)},e.prototype._rebuildBuffers=function(){for(var r=0,i=this.scenes;r<i.length;r++){var n=i[r];n.resetCachedMaterial(),n._rebuildGeometries(),n._rebuildTextures()}t.prototype._rebuildBuffers.call(this)},e.prototype._renderFrame=function(){for(var r=0;r<this._activeRenderLoops.length;r++){var i=this._activeRenderLoops[r];i()}},e.prototype._renderLoop=function(){if(!this._contextWasLost){var r=!0;!this.renderEvenInBackground&&this._windowIsBackground&&(r=!1),r&&(this.beginFrame(),this._renderViews()||this._renderFrame(),this.endFrame())}this._activeRenderLoops.length>0?this.customAnimationFrameRequester?(this.customAnimationFrameRequester.requestID=this._queueNewFrame(this.customAnimationFrameRequester.renderFunction||this._boundRenderFunction,this.customAnimationFrameRequester),this._frameHandler=this.customAnimationFrameRequester.requestID):this.isVRPresenting()?this._requestVRFrame():this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()):this._renderingQueueLaunched=!1},e.prototype._renderViews=function(){return!1},e.prototype.switchFullscreen=function(r){this.isFullscreen?this.exitFullscreen():this.enterFullscreen(r)},e.prototype.enterFullscreen=function(r){this.isFullscreen||(this._pointerLockRequested=r,this._renderingCanvas&&e._RequestFullscreen(this._renderingCanvas))},e.prototype.exitFullscreen=function(){this.isFullscreen&&e._ExitFullscreen()},e.prototype.enterPointerlock=function(){this._renderingCanvas&&e._RequestPointerlock(this._renderingCanvas)},e.prototype.exitPointerlock=function(){e._ExitPointerlock()},e.prototype.beginFrame=function(){this._measureFps(),this.onBeginFrameObservable.notifyObservers(this),t.prototype.beginFrame.call(this)},e.prototype.endFrame=function(){t.prototype.endFrame.call(this),this._submitVRFrame(),this.onEndFrameObservable.notifyObservers(this)},e.prototype.resize=function(){this.isVRPresenting()||t.prototype.resize.call(this)},e.prototype.setSize=function(r,i){if(!this._renderingCanvas||!t.prototype.setSize.call(this,r,i))return!1;if(this.scenes){for(var n=0;n<this.scenes.length;n++)for(var s=this.scenes[n],a=0;a<s.cameras.length;a++){var o=s.cameras[a];o._currentRenderId=0}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0},e.prototype._deletePipelineContext=function(r){var i=r;i&&i.program&&i.transformFeedback&&(this.deleteTransformFeedback(i.transformFeedback),i.transformFeedback=null),t.prototype._deletePipelineContext.call(this,r)},e.prototype.createShaderProgram=function(r,i,n,s,a,o){o===void 0&&(o=null),a=a||this._gl,this.onBeforeShaderCompilationObservable.notifyObservers(this);var l=t.prototype.createShaderProgram.call(this,r,i,n,s,a,o);return this.onAfterShaderCompilationObservable.notifyObservers(this),l},e.prototype._createShaderProgram=function(r,i,n,s,a){a===void 0&&(a=null);var o=s.createProgram();if(r.program=o,!o)throw new Error("Unable to create program");if(s.attachShader(o,i),s.attachShader(o,n),this.webGLVersion>1&&a){var l=this.createTransformFeedback();this.bindTransformFeedback(l),this.setTranformFeedbackVaryings(o,a),r.transformFeedback=l}return s.linkProgram(o),this.webGLVersion>1&&a&&this.bindTransformFeedback(null),r.context=s,r.vertexShader=i,r.fragmentShader=n,r.isParallelCompiled||this._finalizePipelineContext(r),o},e.prototype._releaseTexture=function(r){t.prototype._releaseTexture.call(this,r),this.scenes.forEach(function(i){i.postProcesses.forEach(function(n){n._outputTexture==r&&(n._outputTexture=null)}),i.cameras.forEach(function(n){n._postProcesses.forEach(function(s){s&&s._outputTexture==r&&(s._outputTexture=null)})})})},e.prototype._rescaleTexture=function(r,i,n,s,a){var o=this;this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE);var l=this.createRenderTargetTexture({width:i.width,height:i.height},{generateMipMaps:!1,type:0,samplingMode:2,generateDepthBuffer:!1,generateStencilBuffer:!1});!this._rescalePostProcess&&e._RescalePostProcessFactory&&(this._rescalePostProcess=e._RescalePostProcessFactory(this)),this._rescalePostProcess.getEffect().executeWhenCompiled(function(){o._rescalePostProcess.onApply=function(c){c._bindTexture("textureSampler",r)};var u=n;u||(u=o.scenes[o.scenes.length-1]),u.postProcessManager.directRender([o._rescalePostProcess],l,!0),o._bindTextureDirectly(o._gl.TEXTURE_2D,i,!0),o._gl.copyTexImage2D(o._gl.TEXTURE_2D,0,s,0,0,i.width,i.height,0),o.unBindFramebuffer(l),o._releaseTexture(l),a&&a()})},e.prototype.getFps=function(){return this._fps},e.prototype.getDeltaTime=function(){return this._deltaTime},e.prototype._measureFps=function(){this._performanceMonitor.sampleFrame(),this._fps=this._performanceMonitor.averageFPS,this._deltaTime=this._performanceMonitor.instantaneousFrameTime||0},e.prototype._uploadImageToTexture=function(r,i,n,s){n===void 0&&(n=0),s===void 0&&(s=0);var a=this._gl,o=this._getWebGLTextureType(r.type),l=this._getInternalFormat(r.format),u=this._getRGBABufferInternalSizedFormat(r.type,l),c=r.isCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D;this._bindTextureDirectly(c,r,!0),this._unpackFlipY(r.invertY);var _=a.TEXTURE_2D;r.isCube&&(_=a.TEXTURE_CUBE_MAP_POSITIVE_X+n),a.texImage2D(_,s,u,l,o,i),this._bindTextureDirectly(c,null,!0)},e.prototype.updateRenderTargetTextureSampleCount=function(r,i){if(this.webGLVersion<2||!r)return 1;if(r.samples===i)return i;var n=this._gl;if(i=Math.min(i,this.getCaps().maxMSAASamples),r._depthStencilBuffer&&(n.deleteRenderbuffer(r._depthStencilBuffer),r._depthStencilBuffer=null),r._MSAAFramebuffer&&(n.deleteFramebuffer(r._MSAAFramebuffer),r._MSAAFramebuffer=null),r._MSAARenderBuffer&&(n.deleteRenderbuffer(r._MSAARenderBuffer),r._MSAARenderBuffer=null),i>1&&n.renderbufferStorageMultisample){var s=n.createFramebuffer();if(!s)throw new Error("Unable to create multi sampled framebuffer");r._MSAAFramebuffer=s,this._bindUnboundFramebuffer(r._MSAAFramebuffer);var a=n.createRenderbuffer();if(!a)throw new Error("Unable to create multi sampled framebuffer");n.bindRenderbuffer(n.RENDERBUFFER,a),n.renderbufferStorageMultisample(n.RENDERBUFFER,i,this._getRGBAMultiSampleBufferFormat(r.type),r.width,r.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,a),r._MSAARenderBuffer=a}else this._bindUnboundFramebuffer(r._framebuffer);return r.samples=i,r._depthStencilBuffer=this._setupFramebufferDepthAttachments(r._generateStencilBuffer,r._generateDepthBuffer,r.width,r.height,i),this._bindUnboundFramebuffer(null),i},e.prototype.updateTextureComparisonFunction=function(r,i){if(this.webGLVersion===1){ce.Error("WebGL 1 does not support texture comparison.");return}var n=this._gl;r.isCube?(this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,r,!0),i===0?(n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_COMPARE_FUNC,515),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_COMPARE_MODE,n.NONE)):(n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_COMPARE_FUNC,i),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE)),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null)):(this._bindTextureDirectly(this._gl.TEXTURE_2D,r,!0),i===0?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_COMPARE_FUNC,515),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_COMPARE_MODE,n.NONE)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_COMPARE_FUNC,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE)),this._bindTextureDirectly(this._gl.TEXTURE_2D,null)),r._comparisonFunction=i},e.prototype.createInstancesBuffer=function(r){var i=this._gl.createBuffer();if(!i)throw new Error("Unable to create instance buffer");var n=new Vr(i);return n.capacity=r,this.bindArrayBuffer(n),this._gl.bufferData(this._gl.ARRAY_BUFFER,r,this._gl.DYNAMIC_DRAW),n},e.prototype.deleteInstancesBuffer=function(r){this._gl.deleteBuffer(r)},e.prototype._clientWaitAsync=function(r,i,n){i===void 0&&(i=0),n===void 0&&(n=10);var s=this._gl;return new Promise(function(a,o){var l=function(){var u=s.clientWaitSync(r,i,0);if(u==s.WAIT_FAILED){o();return}if(u==s.TIMEOUT_EXPIRED){setTimeout(l,n);return}a()};l()})},e.prototype._readPixelsAsync=function(r,i,n,s,a,o,l){if(this._webGLVersion<2)throw new Error("_readPixelsAsync only work on WebGL2+");var u=this._gl,c=u.createBuffer();u.bindBuffer(u.PIXEL_PACK_BUFFER,c),u.bufferData(u.PIXEL_PACK_BUFFER,l.byteLength,u.STREAM_READ),u.readPixels(r,i,n,s,a,o,0),u.bindBuffer(u.PIXEL_PACK_BUFFER,null);var _=u.fenceSync(u.SYNC_GPU_COMMANDS_COMPLETE,0);return _?(u.flush(),this._clientWaitAsync(_,0,10).then(function(){return u.deleteSync(_),u.bindBuffer(u.PIXEL_PACK_BUFFER,c),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),u.deleteBuffer(c),l})):null},e.prototype.dispose=function(){for(this.hideLoadingUI(),this.onNewSceneAddedObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(this._rescalePostProcess&&this._rescalePostProcess.dispose();this.scenes.length;)this.scenes[0].dispose();e.Instances.length===1&&e.audioEngine&&e.audioEngine.dispose(),this.disableVR(),me.IsWindowObjectExist()&&(window.removeEventListener("blur",this._onBlur),window.removeEventListener("focus",this._onFocus),this._renderingCanvas&&(this._renderingCanvas.removeEventListener("focus",this._onCanvasFocus),this._renderingCanvas.removeEventListener("blur",this._onCanvasBlur),this._renderingCanvas.removeEventListener("pointerout",this._onCanvasPointerOut)),me.IsDocumentAvailable()&&(document.removeEventListener("fullscreenchange",this._onFullscreenChange),document.removeEventListener("mozfullscreenchange",this._onFullscreenChange),document.removeEventListener("webkitfullscreenchange",this._onFullscreenChange),document.removeEventListener("msfullscreenchange",this._onFullscreenChange),document.removeEventListener("pointerlockchange",this._onPointerLockChange),document.removeEventListener("mspointerlockchange",this._onPointerLockChange),document.removeEventListener("mozpointerlockchange",this._onPointerLockChange),document.removeEventListener("webkitpointerlockchange",this._onPointerLockChange))),t.prototype.dispose.call(this);var r=e.Instances.indexOf(this);r>=0&&e.Instances.splice(r,1),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()},e.prototype._disableTouchAction=function(){!this._renderingCanvas||!this._renderingCanvas.setAttribute||(this._renderingCanvas.setAttribute("touch-action","none"),this._renderingCanvas.style.touchAction="none",this._renderingCanvas.style.msTouchAction="none")},e.prototype.displayLoadingUI=function(){if(!!me.IsWindowObjectExist()){var r=this.loadingScreen;r&&r.displayLoadingUI()}},e.prototype.hideLoadingUI=function(){if(!!me.IsWindowObjectExist()){var r=this._loadingScreen;r&&r.hideLoadingUI()}},Object.defineProperty(e.prototype,"loadingScreen",{get:function(){return!this._loadingScreen&&this._renderingCanvas&&(this._loadingScreen=e.DefaultLoadingScreenFactory(this._renderingCanvas)),this._loadingScreen},set:function(r){this._loadingScreen=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loadingUIText",{set:function(r){this.loadingScreen.loadingUIText=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loadingUIBackgroundColor",{set:function(r){this.loadingScreen.loadingUIBackgroundColor=r},enumerable:!1,configurable:!0}),e._RequestPointerlock=function(r){r.requestPointerLock=r.requestPointerLock||r.msRequestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock,r.requestPointerLock&&r.requestPointerLock()},e._ExitPointerlock=function(){var r=document;document.exitPointerLock=document.exitPointerLock||r.msExitPointerLock||r.mozExitPointerLock||r.webkitExitPointerLock,document.exitPointerLock&&document.exitPointerLock()},e._RequestFullscreen=function(r){var i=r.requestFullscreen||r.msRequestFullscreen||r.webkitRequestFullscreen||r.mozRequestFullScreen;!i||i.call(r)},e._ExitFullscreen=function(){var r=document;document.exitFullscreen?document.exitFullscreen():r.mozCancelFullScreen?r.mozCancelFullScreen():r.webkitCancelFullScreen?r.webkitCancelFullScreen():r.msCancelFullScreen&&r.msCancelFullScreen()},e.ALPHA_DISABLE=0,e.ALPHA_ADD=1,e.ALPHA_COMBINE=2,e.ALPHA_SUBTRACT=3,e.ALPHA_MULTIPLY=4,e.ALPHA_MAXIMIZED=5,e.ALPHA_ONEONE=6,e.ALPHA_PREMULTIPLIED=7,e.ALPHA_PREMULTIPLIED_PORTERDUFF=8,e.ALPHA_INTERPOLATE=9,e.ALPHA_SCREENMODE=10,e.DELAYLOADSTATE_NONE=0,e.DELAYLOADSTATE_LOADED=1,e.DELAYLOADSTATE_LOADING=2,e.DELAYLOADSTATE_NOTLOADED=4,e.NEVER=512,e.ALWAYS=519,e.LESS=513,e.EQUAL=514,e.LEQUAL=515,e.GREATER=516,e.GEQUAL=518,e.NOTEQUAL=517,e.KEEP=7680,e.REPLACE=7681,e.INCR=7682,e.DECR=7683,e.INVERT=5386,e.INCR_WRAP=34055,e.DECR_WRAP=34056,e.TEXTURE_CLAMP_ADDRESSMODE=0,e.TEXTURE_WRAP_ADDRESSMODE=1,e.TEXTURE_MIRROR_ADDRESSMODE=2,e.TEXTUREFORMAT_ALPHA=0,e.TEXTUREFORMAT_LUMINANCE=1,e.TEXTUREFORMAT_LUMINANCE_ALPHA=2,e.TEXTUREFORMAT_RGB=4,e.TEXTUREFORMAT_RGBA=5,e.TEXTUREFORMAT_RED=6,e.TEXTUREFORMAT_R=6,e.TEXTUREFORMAT_RG=7,e.TEXTUREFORMAT_RED_INTEGER=8,e.TEXTUREFORMAT_R_INTEGER=8,e.TEXTUREFORMAT_RG_INTEGER=9,e.TEXTUREFORMAT_RGB_INTEGER=10,e.TEXTUREFORMAT_RGBA_INTEGER=11,e.TEXTURETYPE_UNSIGNED_BYTE=0,e.TEXTURETYPE_UNSIGNED_INT=0,e.TEXTURETYPE_FLOAT=1,e.TEXTURETYPE_HALF_FLOAT=2,e.TEXTURETYPE_BYTE=3,e.TEXTURETYPE_SHORT=4,e.TEXTURETYPE_UNSIGNED_SHORT=5,e.TEXTURETYPE_INT=6,e.TEXTURETYPE_UNSIGNED_INTEGER=7,e.TEXTURETYPE_UNSIGNED_SHORT_4_4_4_4=8,e.TEXTURETYPE_UNSIGNED_SHORT_5_5_5_1=9,e.TEXTURETYPE_UNSIGNED_SHORT_5_6_5=10,e.TEXTURETYPE_UNSIGNED_INT_2_10_10_10_REV=11,e.TEXTURETYPE_UNSIGNED_INT_24_8=12,e.TEXTURETYPE_UNSIGNED_INT_10F_11F_11F_REV=13,e.TEXTURETYPE_UNSIGNED_INT_5_9_9_9_REV=14,e.TEXTURETYPE_FLOAT_32_UNSIGNED_INT_24_8_REV=15,e.TEXTURE_NEAREST_SAMPLINGMODE=1,e.TEXTURE_BILINEAR_SAMPLINGMODE=2,e.TEXTURE_TRILINEAR_SAMPLINGMODE=3,e.TEXTURE_NEAREST_NEAREST_MIPLINEAR=8,e.TEXTURE_LINEAR_LINEAR_MIPNEAREST=11,e.TEXTURE_LINEAR_LINEAR_MIPLINEAR=3,e.TEXTURE_NEAREST_NEAREST_MIPNEAREST=4,e.TEXTURE_NEAREST_LINEAR_MIPNEAREST=5,e.TEXTURE_NEAREST_LINEAR_MIPLINEAR=6,e.TEXTURE_NEAREST_LINEAR=7,e.TEXTURE_NEAREST_NEAREST=1,e.TEXTURE_LINEAR_NEAREST_MIPNEAREST=9,e.TEXTURE_LINEAR_NEAREST_MIPLINEAR=10,e.TEXTURE_LINEAR_LINEAR=2,e.TEXTURE_LINEAR_NEAREST=12,e.TEXTURE_EXPLICIT_MODE=0,e.TEXTURE_SPHERICAL_MODE=1,e.TEXTURE_PLANAR_MODE=2,e.TEXTURE_CUBIC_MODE=3,e.TEXTURE_PROJECTION_MODE=4,e.TEXTURE_SKYBOX_MODE=5,e.TEXTURE_INVCUBIC_MODE=6,e.TEXTURE_EQUIRECTANGULAR_MODE=7,e.TEXTURE_FIXED_EQUIRECTANGULAR_MODE=8,e.TEXTURE_FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,e.SCALEMODE_FLOOR=1,e.SCALEMODE_NEAREST=2,e.SCALEMODE_CEILING=3,e._RescalePostProcessFactory=null,e}(Se);export{Yi as A,Jo as B,vr as C,me as D,ol as E,Oe as F,Rt as G,ce as L,he as O,Yt as P,br as S,Jn as T,Vr as W,Ke as _,Un as a,Ga as b,rl as c,Kn as d,Hr as e,ei as f,be as g,ra as h,nl as i,il as j,Xa as k,ja as l,Ya as m,Wr as n,Bn as o,sl as p,Se as q,tl as r,qi as s,el as t,js as u,pt as v,dr as w,we as x,Ko as y,al as z};
//# sourceMappingURL=vendor.db607760.js.map
